# Supabase Configuration
# Get these from your Supabase project settings: https://app.supabase.com/project/_/settings/api
NEXT_PUBLIC_SUPABASE_URL=https://your-project-id.supabase.co
NEXT_PUBLIC_SUPABASE_ANON_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.your-anon-key-here
# ⚠️ CRITICAL: Never commit the service role key - it has full database access!
# Get from Supabase project settings (service_role key)
SUPABASE_SERVICE_ROLE_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.your-service-role-key-here

# Database Configuration (Direct PostgreSQL - Fallback)
# ⚠️ CRITICAL: Never commit database passwords - use Supabase connection pooling instead
DATABASE_URL=postgresql://postgres:your-database-password@db.your-project-id.supabase.co:5432/postgres
DATABASE_TEST_URL=postgresql://postgres:your-database-password@db.your-project-id.supabase.co:5432/postgres

# JWT Configuration
JWT_SECRET=your-super-secret-jwt-key-here
JWT_EXPIRES_IN=24h

# Stripe Configuration
STRIPE_SECRET_KEY=sk_test_your_stripe_secret_key
STRIPE_PUBLISHABLE_KEY=pk_test_your_stripe_publishable_key
# Stripe best practice: Use environment-specific webhook secrets
# For development (Stripe CLI or test webhook endpoint)
STRIPE_WEBHOOK_SECRET_DEV=whsec_your_dev_webhook_secret
# For production (production webhook endpoint)
STRIPE_WEBHOOK_SECRET_PROD=whsec_your_prod_webhook_secret
# Fallback: Single webhook secret (backward compatibility)
STRIPE_WEBHOOK_SECRET=whsec_your_webhook_secret
STRIPE_PRICE_STARTER_MONTHLY=
STRIPE_PRICE_PRO_MONTHLY=
STRIPE_PRICE_BUSINESS_MONTHLY=

# Auth0 SDK Configuration (replaces NextAuth)
# Generate AUTH0_SECRET with: openssl rand -hex 32
AUTH0_SECRET=use `openssl rand -hex 32`
# Base URL - dynamically detected in preview (VERCEL_URL), explicit in production
# Development: http://localhost:3000
# Preview: Auto-detected from VERCEL_URL (e.g., https://prepflow-landing-abc123.vercel.app)
# Production: https://www.prepflow.org
AUTH0_BASE_URL=http://localhost:3000
AUTH0_ISSUER_BASE_URL=https://your-tenant.auth0.com
AUTH0_CLIENT_ID=your-auth0-client-id
AUTH0_CLIENT_SECRET=your-auth0-client-secret

# NextAuth (DEPRECATED - removed in Auth0 SDK migration)
# NEXTAUTH_SECRET=use `openssl rand -base64 32`
# NEXTAUTH_URL=http://localhost:3000
# NEXTAUTH_SESSION_MAX_AGE=14400

# Access Control
# Comma-separated list of allowed email addresses (e.g., "user1@example.com,user2@example.com")
ALLOWED_EMAILS=your-email@example.com
# Set DISABLE_ALLOWLIST=true to allow all authenticated users (useful for testing/friend access)
# DISABLE_ALLOWLIST=false

# Email Configuration
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_USER=your-email@gmail.com
SMTP_PASS=your-app-password
FROM_EMAIL=noreply@prepflow.org
FROM_NAME=PrepFlow Team

# Server Configuration
PORT=3001
NODE_ENV=development
CORS_ORIGIN=http://localhost:3000

# Security
BCRYPT_ROUNDS=12
RATE_LIMIT_WINDOW_MS=900000
RATE_LIMIT_MAX_REQUESTS=100

# Logging
LOG_LEVEL=info
# Error Logging to Database (set to 'true' to enable error storage in production)
# In development, errors are automatically stored. In production, set this to 'true' to enable.
STORE_ERROR_LOGS=true

# Seed Admin Key (for /api/db/reset and /api/db/seed)
SEED_ADMIN_KEY=your-seed-admin-key

# AI Configuration
AI_ENABLED=true

# Hugging Face API
# IMPORTANT: Uses Router API for text generation and Inference Providers for image generation
# Get free API key at https://huggingface.co/settings/tokens
# API key is REQUIRED for all AI features (text and image generation)
# Enable Inference Providers in your Hugging Face account settings to use image generation
HUGGINGFACE_API_KEY=your-huggingface-api-key-here

# Text Generation Model (Llama 3.2 3B - Apache 2.0 license, commercial use allowed)
# Router API supports specific models like Llama - Mistral is not supported
HUGGINGFACE_TEXT_MODEL=meta-llama/Llama-3.2-3B-Instruct

# Image Generation Model (Stable Diffusion XL - CreativeML Open RAIL-M license, commercial use allowed)
# Uses Inference Providers API with fal-ai or replicate providers
HUGGINGFACE_IMAGE_MODEL=stabilityai/stable-diffusion-xl-base-1.0

# Vision/Image Analysis: Not available via free router API (requires Inference Endpoints - paid)
HUGGINGFACE_VISION_MODEL=Salesforce/blip-image-captioning-base

# Backup & Restore Configuration
PREPFLOW_BACKUP_ENCRYPTION_KEY=your-64-character-hex-encryption-key-here
GOOGLE_TOKEN_ENCRYPTION_KEY=your-64-character-hex-encryption-key-for-google-tokens
GOOGLE_CLIENT_ID=your-google-oauth-client-id
GOOGLE_CLIENT_SECRET=your-google-oauth-client-secret
GOOGLE_REDIRECT_URI=http://localhost:3000/api/backup/google-callback
CRON_SECRET=your-cron-secret-for-backup-scheduler

# Square POS Integration (OAuth Application)
# PrepFlow has ONE Square Application that all users connect through
# Get these from Square Developer Dashboard: https://developer.squareup.com/apps
# Create ONE application for PrepFlow, then add these credentials here
SQUARE_APPLICATION_ID=your-square-application-id
SQUARE_APPLICATION_SECRET=your-square-application-secret
# Square Token Encryption Key (MANDATORY - 64 hex characters)
# Generate with: openssl rand -hex 32
SQUARE_TOKEN_ENCRYPTION_KEY=your-64-character-hex-encryption-key-here
# Square Webhook Secret (Optional - for webhook signature verification)
SQUARE_WEBHOOK_SECRET=your-webhook-secret-from-square-dashboard
