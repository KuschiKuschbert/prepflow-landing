#!/bin/sh
. "$(dirname "$0")/_/husky.sh"

# Get staged files
STAGED_FILES=$(git diff --cached --name-only --diff-filter=ACMR | tr '\n' ' ')

# Run file size guard on staged files (if any)
if [ -n "$STAGED_FILES" ]; then
  echo "Checking file size limits on staged files..."
  node scripts/check-file-sizes.js $STAGED_FILES || exit 1
fi

# Run lint-staged for formatting
npm run format:staged
