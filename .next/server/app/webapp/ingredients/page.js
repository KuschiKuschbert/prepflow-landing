(()=>{var a={};a.id=5901,a.ids=[5901],a.modules={261:a=>{"use strict";a.exports=require("next/dist/shared/lib/router/utils/app-paths")},3295:a=>{"use strict";a.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},9448:(a,b,c)=>{"use strict";c.r(b),c.d(b,{default:()=>u});var d=c(21124),e=c(59009),f=c(38301),g=c(29376),h=c(19128),i=c(88572),j=c(26606);function k({ingredients:a,displayUnit:b,onEdit:c,onDelete:e,selectedIngredients:g,onSelectIngredient:k,onSelectAll:l,loading:m=!1}){let{t:n}=(0,h.Bd)(),[o,p]=(0,f.useState)(null),q=async a=>{if(window.confirm("Are you sure you want to delete this ingredient?")){p(a);try{await e(a)}finally{p(null)}}};return m?(0,d.jsx)("div",{className:"bg-[#1f1f1f] rounded-3xl p-6 border border-[#2a2a2a]",children:(0,d.jsx)(i.O0,{variant:"table"})}):0===a.length?(0,d.jsx)("div",{className:"bg-[#1f1f1f] rounded-3xl p-6 border border-[#2a2a2a] text-center",children:(0,d.jsxs)("div",{className:"text-gray-400 mb-4",children:[(0,d.jsx)("svg",{className:"w-16 h-16 mx-auto mb-4",fill:"currentColor",viewBox:"0 0 20 20",children:(0,d.jsx)("path",{fillRule:"evenodd",d:"M3 4a1 1 0 011-1h12a1 1 0 011 1v2a1 1 0 01-1 1H4a1 1 0 01-1-1V4zm0 4a1 1 0 011-1h6a1 1 0 011 1v6a1 1 0 01-1 1H4a1 1 0 01-1-1V8zm8 0a1 1 0 011-1h4a1 1 0 011 1v6a1 1 0 01-1 1h-4a1 1 0 01-1-1V8z",clipRule:"evenodd"})}),(0,d.jsx)("h3",{className:"text-xl font-semibold text-white mb-2",children:"No Ingredients Found"}),(0,d.jsx)("p",{className:"text-gray-400",children:"Start by adding your first ingredient to get started."})]})}):(0,d.jsxs)("div",{className:"bg-[#1f1f1f] rounded-3xl border border-[#2a2a2a] overflow-hidden",children:[(0,d.jsx)("div",{className:"px-6 py-4 bg-gradient-to-r from-[#2a2a2a]/50 to-[#2a2a2a]/20",children:(0,d.jsxs)("div",{className:"flex items-center justify-between",children:[(0,d.jsxs)("h2",{className:"text-xl font-semibold text-white",children:["Ingredients (",a.length,")"]}),(0,d.jsx)("div",{className:"flex items-center gap-4",children:(0,d.jsxs)("label",{className:"flex items-center gap-2 text-sm text-gray-300",children:[(0,d.jsx)("input",{type:"checkbox",checked:g.size===a.length&&a.length>0,onChange:a=>l(a.target.checked),className:"w-4 h-4 text-[#29E7CD] bg-[#2a2a2a] border-[#2a2a2a] rounded focus:ring-[#29E7CD] focus:ring-2"}),"Select All"]})})]})}),(0,d.jsx)("div",{className:"overflow-x-auto",children:(0,d.jsxs)("table",{className:"w-full",children:[(0,d.jsx)("thead",{className:"bg-gradient-to-r from-[#2a2a2a]/50 to-[#2a2a2a]/20",children:(0,d.jsxs)("tr",{children:[(0,d.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:(0,d.jsx)("input",{type:"checkbox",checked:g.size===a.length&&a.length>0,onChange:a=>l(a.target.checked),className:"w-4 h-4 text-[#29E7CD] bg-[#2a2a2a] border-[#2a2a2a] rounded focus:ring-[#29E7CD] focus:ring-2"})}),(0,d.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Name"}),(0,d.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Brand"}),(0,d.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Pack Size"}),(0,d.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Cost/Unit"}),(0,d.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Supplier"}),(0,d.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Stock"}),(0,d.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Actions"})]})}),(0,d.jsx)("tbody",{className:"divide-y divide-[#2a2a2a]",children:a.map(a=>{let e=(0,j.mT)(a.cost_per_unit,a.unit||"GM",b,a.ingredient_name||"Unknown"),f=a.min_stock_level&&a.current_stock&&a.current_stock<=a.min_stock_level;return(0,d.jsxs)("tr",{className:"hover:bg-[#2a2a2a]/20 transition-colors duration-200",children:[(0,d.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,d.jsx)("input",{type:"checkbox",checked:g.has(a.id),onChange:b=>k(a.id,b.target.checked),className:"w-4 h-4 text-[#29E7CD] bg-[#2a2a2a] border-[#2a2a2a] rounded focus:ring-[#29E7CD] focus:ring-2"})}),(0,d.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap",children:[(0,d.jsx)("div",{className:"text-sm font-medium text-white",children:a.ingredient_name}),a.product_code&&(0,d.jsx)("div",{className:"text-sm text-gray-400",children:a.product_code})]}),(0,d.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-300",children:a.brand||"-"}),(0,d.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-300",children:[a.pack_size," ",a.pack_size_unit]}),(0,d.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-300",children:[new Intl.NumberFormat("en-AU",{style:"currency",currency:"AUD",minimumFractionDigits:2,maximumFractionDigits:4}).format(e),"/",b]}),(0,d.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-300",children:a.supplier||"-"}),(0,d.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,d.jsxs)("div",{className:"flex items-center gap-2",children:[(0,d.jsxs)("span",{className:`text-sm ${f?"text-red-400":"text-gray-300"}`,children:[a.current_stock||0," ",a.unit]}),f&&(0,d.jsx)("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-red-900/20 text-red-400",children:"Low Stock"})]})}),(0,d.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:(0,d.jsxs)("div",{className:"flex items-center gap-2",children:[(0,d.jsx)("button",{onClick:()=>c(a),className:"text-[#29E7CD] hover:text-[#29E7CD]/80 transition-colors","aria-label":`Edit ${a.ingredient_name}`,children:(0,d.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,d.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})})}),(0,d.jsx)("button",{onClick:()=>q(a.id),disabled:o===a.id,className:"text-red-400 hover:text-red-300 transition-colors disabled:opacity-50","aria-label":`Delete ${a.ingredient_name}`,children:o===a.id?(0,d.jsx)("div",{className:"w-4 h-4 border-2 border-red-400 border-t-transparent rounded-full animate-spin"}):(0,d.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,d.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})})]},a.id)})})]})})]})}function l({ingredients:a,searchTerm:b,supplierFilter:c,storageFilter:e,sortBy:f,displayUnit:g,onSearchChange:i,onSupplierFilterChange:j,onStorageFilterChange:k,onSortChange:l,onDisplayUnitChange:m}){let{t:n}=(0,h.Bd)(),o=Array.from(new Set(a.map(a=>a.supplier).filter(Boolean))).sort(),p=Array.from(new Set(a.map(a=>a.storage_location).filter(Boolean))).sort();return(0,d.jsxs)("div",{className:"space-y-6",children:[(0,d.jsx)("div",{className:"bg-[#1f1f1f] p-4 rounded-lg border border-[#2a2a2a]",children:(0,d.jsxs)("div",{className:"flex items-center gap-3",children:[(0,d.jsx)("label",{className:"text-sm font-medium text-gray-300",children:"Display costs in:"}),(0,d.jsxs)("select",{value:g,onChange:a=>m(a.target.value),className:"px-3 py-2 bg-[#0a0a0a] border border-[#2a2a2a] rounded-lg text-white focus:ring-2 focus:ring-[#29E7CD] focus:border-transparent",children:[(0,d.jsxs)("optgroup",{label:"Weight",children:[(0,d.jsx)("option",{value:"g",children:"Grams (g)"}),(0,d.jsx)("option",{value:"kg",children:"Kilograms (kg)"}),(0,d.jsx)("option",{value:"oz",children:"Ounces (oz)"}),(0,d.jsx)("option",{value:"lb",children:"Pounds (lb)"})]}),(0,d.jsxs)("optgroup",{label:"Volume",children:[(0,d.jsx)("option",{value:"ml",children:"Milliliters (ml)"}),(0,d.jsx)("option",{value:"l",children:"Liters (L)"}),(0,d.jsx)("option",{value:"tsp",children:"Teaspoons (tsp)"}),(0,d.jsx)("option",{value:"tbsp",children:"Tablespoons (tbsp)"}),(0,d.jsx)("option",{value:"cup",children:"Cups"})]})]})]})}),(0,d.jsxs)("div",{className:"bg-[#1f1f1f] p-4 sm:p-6 rounded-lg shadow border border-[#2a2a2a]",children:[(0,d.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"\uD83D\uDD0D Search"}),(0,d.jsx)("input",{type:"text",placeholder:"Search ingredients...",value:b,onChange:a=>i(a.target.value),className:"w-full px-3 py-2 border border-[#2a2a2a] bg-[#0a0a0a] text-white rounded-md focus:outline-none focus:ring-2 focus:ring-[#29E7CD] placeholder-gray-500"})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"\uD83C\uDFEA Supplier"}),(0,d.jsxs)("select",{value:c,onChange:a=>j(a.target.value),className:"w-full px-3 py-2 border border-[#2a2a2a] bg-[#0a0a0a] text-white rounded-md focus:outline-none focus:ring-2 focus:ring-[#29E7CD]",children:[(0,d.jsx)("option",{value:"",children:"All Suppliers"}),o.map(a=>(0,d.jsx)("option",{value:a,children:a},a))]})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"\uD83D\uDCCD Storage"}),(0,d.jsxs)("select",{value:e,onChange:a=>k(a.target.value),className:"w-full px-3 py-2 border border-[#2a2a2a] bg-[#0a0a0a] text-white rounded-md focus:outline-none focus:ring-2 focus:ring-[#29E7CD]",children:[(0,d.jsx)("option",{value:"",children:"All Locations"}),p.map(a=>(0,d.jsx)("option",{value:a,children:a},a))]})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"\uD83D\uDCCA Sort By"}),(0,d.jsxs)("select",{value:f,onChange:a=>l(a.target.value),className:"w-full px-3 py-2 border border-[#2a2a2a] bg-[#0a0a0a] text-white rounded-md focus:outline-none focus:ring-2 focus:ring-[#29E7CD]",children:[(0,d.jsx)("option",{value:"name",children:"Name"}),(0,d.jsx)("option",{value:"cost_asc",children:"Cost (Low to High)"}),(0,d.jsx)("option",{value:"cost_desc",children:"Cost (High to Low)"}),(0,d.jsx)("option",{value:"supplier",children:"Supplier"})]})]})]}),(b||c||e)&&(0,d.jsx)("div",{className:"mt-4 pt-4 border-t border-[#2a2a2a]",children:(0,d.jsxs)("div",{className:"flex flex-wrap gap-2",children:[(0,d.jsx)("span",{className:"text-sm text-gray-400",children:"Active filters:"}),b&&(0,d.jsxs)("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-[#29E7CD]/10 text-[#29E7CD] border border-[#29E7CD]/20",children:['Search: "',b,'"']}),c&&(0,d.jsxs)("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-[#3B82F6]/10 text-[#3B82F6] border border-[#3B82F6]/20",children:["Supplier: ",c]}),e&&(0,d.jsxs)("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-[#D925C7]/10 text-[#D925C7] border border-[#D925C7]/20",children:["Storage: ",e]}),(0,d.jsx)("button",{onClick:()=>{i(""),j(""),k("")},className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-gray-600/10 text-gray-400 hover:text-white border border-gray-600/20 hover:border-gray-500/40 transition-colors",children:"Clear All"})]})})]})]})}function m({selectedIngredients:a,filteredIngredients:b,onAddIngredient:c,onImportCSV:e,onExportCSV:g,onBulkDelete:i,onBulkUpdate:j,loading:k=!1}){let{t:l}=(0,h.Bd)(),[m,n]=(0,f.useState)(!1),[o,p]=(0,f.useState)(!1),q=a.size;b.filter(b=>a.has(b.id));let r=async()=>{if(0===q)return;let b=`Are you sure you want to delete ${q} ingredient${q>1?"s":""}?`;if(window.confirm(b)){n(!0);try{await i(Array.from(a))}finally{n(!1),p(!1)}}},s=async()=>{if(0===q)return;let b=window.prompt(`Enter new supplier for ${q} ingredient${q>1?"s":""}:`);if(b?.trim()){n(!0);try{await j(Array.from(a),{supplier:b.trim()})}finally{n(!1),p(!1)}}},t=async()=>{if(0===q)return;let b=window.prompt(`Enter new storage location for ${q} ingredient${q>1?"s":""}:`);if(b?.trim()){n(!0);try{await j(Array.from(a),{storage_location:b.trim()})}finally{n(!1),p(!1)}}},u=async()=>{if(0===q)return;let b=window.prompt(`Enter wastage percentage (0-100) for ${q} ingredient${q>1?"s":""}:`);if(!b)return;let c=parseFloat(b);if(isNaN(c)||c<0||c>100)return void alert("Please enter a valid percentage between 0 and 100");n(!0);try{await j(Array.from(a),{trim_peel_waste_percentage:c,yield_percentage:100-c})}finally{n(!1),p(!1)}};return(0,d.jsxs)("div",{className:"flex flex-wrap gap-3 mb-6",children:[(0,d.jsx)("button",{onClick:c,className:"bg-gradient-to-r from-[#29E7CD] to-[#D925C7] text-white px-4 py-2 rounded-lg hover:from-[#29E7CD]/80 hover:to-[#D925C7]/80 transition-all duration-200 shadow-lg hover:shadow-xl font-medium",children:"+ Add Ingredient"}),(0,d.jsx)("button",{onClick:e,className:"bg-gradient-to-r from-[#3B82F6] to-[#29E7CD] text-white px-4 py-2 rounded-lg hover:from-[#3B82F6]/80 hover:to-[#29E7CD]/80 transition-all duration-200 shadow-lg hover:shadow-xl font-medium",children:"\uD83D\uDCC1 Import CSV"}),(0,d.jsx)("button",{onClick:g,className:"bg-gradient-to-r from-[#D925C7] to-[#3B82F6] text-white px-4 py-2 rounded-lg hover:from-[#D925C7]/80 hover:to-[#3B82F6]/80 transition-all duration-200 shadow-lg hover:shadow-xl font-medium",children:"\uD83D\uDCE4 Export CSV"}),q>0&&(0,d.jsxs)("div",{className:"relative",children:[(0,d.jsxs)("button",{onClick:()=>p(!o),className:"bg-gradient-to-r from-orange-500 to-red-500 text-white px-4 py-2 rounded-lg hover:from-orange-500/80 hover:to-red-500/80 transition-all duration-200 shadow-lg hover:shadow-xl font-medium",children:["⚡ Bulk Actions (",q,")"]}),o&&(0,d.jsx)("div",{className:"absolute top-full left-0 mt-2 w-64 bg-[#1f1f1f] border border-[#2a2a2a] rounded-lg shadow-xl z-10",children:(0,d.jsxs)("div",{className:"p-2",children:[(0,d.jsxs)("div",{className:"text-xs text-gray-400 px-3 py-2 border-b border-[#2a2a2a]",children:[q," ingredient",q>1?"s":""," selected"]}),(0,d.jsxs)("div",{className:"space-y-1 mt-2",children:[(0,d.jsx)("button",{onClick:r,disabled:m,className:"w-full text-left px-3 py-2 text-red-400 hover:bg-red-500/10 rounded transition-colors disabled:opacity-50",children:"\uD83D\uDDD1️ Delete Selected"}),(0,d.jsx)("button",{onClick:s,disabled:m,className:"w-full text-left px-3 py-2 text-gray-300 hover:bg-[#2a2a2a] rounded transition-colors disabled:opacity-50",children:"\uD83C\uDFEA Update Supplier"}),(0,d.jsx)("button",{onClick:t,disabled:m,className:"w-full text-left px-3 py-2 text-gray-300 hover:bg-[#2a2a2a] rounded transition-colors disabled:opacity-50",children:"\uD83D\uDCCD Update Storage Location"}),(0,d.jsx)("button",{onClick:u,disabled:m,className:"w-full text-left px-3 py-2 text-gray-300 hover:bg-[#2a2a2a] rounded transition-colors disabled:opacity-50",children:"\uD83C\uDFAF Update Wastage %"})]})]})})]}),(k||m)&&(0,d.jsxs)("div",{className:"flex items-center gap-2 text-gray-400",children:[(0,d.jsx)("div",{className:"w-4 h-4 border-2 border-[#29E7CD] border-t-transparent rounded-full animate-spin"}),(0,d.jsx)("span",{className:"text-sm",children:m?"Processing...":"Loading..."})]}),q>0&&(0,d.jsxs)("div",{className:"flex items-center gap-2 text-sm text-gray-400",children:[(0,d.jsx)("span",{children:"Selected:"}),(0,d.jsx)("span",{className:"text-[#29E7CD] font-medium",children:q}),(0,d.jsx)("span",{children:"of"}),(0,d.jsx)("span",{className:"text-white font-medium",children:b.length})]})]})}function n({ingredient:a,suppliers:b,availableUnits:c,onSave:e,onCancel:i,loading:k=!1}){let{t:l}=(0,h.Bd)(),[m,n]=(0,f.useState)({ingredient_name:"",brand:"",pack_size:"",pack_size_unit:"GM",pack_price:0,unit:"GM",cost_per_unit:0,cost_per_unit_as_purchased:0,cost_per_unit_incl_trim:0,trim_peel_waste_percentage:0,yield_percentage:100,supplier:"",product_code:"",storage_location:"",min_stock_level:0,current_stock:0,...a}),[o,p]=(0,f.useState)({}),q=()=>{if(m.pack_price&&m.pack_size&&m.pack_size_unit&&m.unit){var a,b,c,d;let e=(a=m.pack_price,b=parseFloat(m.pack_size),c=m.pack_size_unit,d=m.unit,0===a||0===b?0:a/(b*(0,j.oU)(1,c,d).conversionFactor));n(a=>({...a,cost_per_unit:e,cost_per_unit_as_purchased:e,cost_per_unit_incl_trim:e}))}},r=(a,b)=>{let c="string"==typeof b?(0,g.$m)(b):b;n(b=>({...b,[a]:c})),o[a]&&p(b=>({...b,[a]:""})),["pack_price","pack_size","pack_size_unit","unit"].includes(a)&&setTimeout(q,100)},s=async a=>{if(a.preventDefault(),(()=>{let a={};return m.ingredient_name?.trim()||(a.ingredient_name="Ingredient name is required"),(!m.pack_price||m.pack_price<=0)&&(a.pack_price="Pack price must be greater than 0"),(!m.pack_size||0>=parseFloat(m.pack_size))&&(a.pack_size="Pack size must be greater than 0"),m.unit||(a.unit="Unit is required"),p(a),0===Object.keys(a).length})())try{await e(m)}catch(a){console.error("Error saving ingredient:",a)}};return(0,d.jsxs)("div",{className:"bg-[#1f1f1f] rounded-3xl p-6 border border-[#2a2a2a]",children:[(0,d.jsx)("h2",{className:"text-2xl font-bold text-white mb-6",children:a?"Edit Ingredient":"Add New Ingredient"}),(0,d.jsxs)("form",{onSubmit:s,className:"space-y-6",children:[(0,d.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Ingredient Name *"}),(0,d.jsx)("input",{type:"text",value:m.ingredient_name||"",onChange:a=>r("ingredient_name",a.target.value),className:"w-full px-4 py-3 bg-[#2a2a2a] border border-[#2a2a2a] rounded-2xl text-white placeholder-gray-400 focus:ring-2 focus:ring-[#29E7CD] focus:border-transparent",placeholder:"e.g., Tomatoes",required:!0}),o.ingredient_name&&(0,d.jsx)("p",{className:"text-red-400 text-sm mt-1",children:o.ingredient_name})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Brand"}),(0,d.jsx)("input",{type:"text",value:m.brand||"",onChange:a=>r("brand",a.target.value),className:"w-full px-4 py-3 bg-[#2a2a2a] border border-[#2a2a2a] rounded-2xl text-white placeholder-gray-400 focus:ring-2 focus:ring-[#29E7CD] focus:border-transparent",placeholder:"e.g., Coles"})]})]}),(0,d.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Pack Size *"}),(0,d.jsx)("input",{type:"number",step:"0.01",value:m.pack_size||"",onChange:a=>r("pack_size",a.target.value),className:"w-full px-4 py-3 bg-[#2a2a2a] border border-[#2a2a2a] rounded-2xl text-white placeholder-gray-400 focus:ring-2 focus:ring-[#29E7CD] focus:border-transparent",placeholder:"e.g., 5",required:!0}),o.pack_size&&(0,d.jsx)("p",{className:"text-red-400 text-sm mt-1",children:o.pack_size})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Pack Size Unit"}),(0,d.jsx)("select",{value:m.pack_size_unit||"GM",onChange:a=>r("pack_size_unit",a.target.value),className:"w-full px-4 py-3 bg-[#2a2a2a] border border-[#2a2a2a] rounded-2xl text-white focus:ring-2 focus:ring-[#29E7CD] focus:border-transparent",children:c.map(a=>(0,d.jsx)("option",{value:a,children:a},a))})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Pack Price *"}),(0,d.jsx)("input",{type:"number",step:"0.01",value:m.pack_price||"",onChange:a=>r("pack_price",parseFloat(a.target.value)||0),className:"w-full px-4 py-3 bg-[#2a2a2a] border border-[#2a2a2a] rounded-2xl text-white placeholder-gray-400 focus:ring-2 focus:ring-[#29E7CD] focus:border-transparent",placeholder:"e.g., 12.50",required:!0}),o.pack_price&&(0,d.jsx)("p",{className:"text-red-400 text-sm mt-1",children:o.pack_price})]})]}),(0,d.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Cost Per Unit *"}),(0,d.jsx)("input",{type:"number",step:"0.01",value:m.cost_per_unit||"",onChange:a=>r("cost_per_unit",parseFloat(a.target.value)||0),className:"w-full px-4 py-3 bg-[#2a2a2a] border border-[#2a2a2a] rounded-2xl text-white placeholder-gray-400 focus:ring-2 focus:ring-[#29E7CD] focus:border-transparent",placeholder:"Auto-calculated",required:!0}),o.cost_per_unit&&(0,d.jsx)("p",{className:"text-red-400 text-sm mt-1",children:o.cost_per_unit})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Unit *"}),(0,d.jsx)("select",{value:m.unit||"GM",onChange:a=>r("unit",a.target.value),className:"w-full px-4 py-3 bg-[#2a2a2a] border border-[#2a2a2a] rounded-2xl text-white focus:ring-2 focus:ring-[#29E7CD] focus:border-transparent",required:!0,children:c.map(a=>(0,d.jsx)("option",{value:a,children:a},a))}),o.unit&&(0,d.jsx)("p",{className:"text-red-400 text-sm mt-1",children:o.unit})]})]}),(0,d.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Supplier"}),(0,d.jsx)("input",{type:"text",value:m.supplier||"",onChange:a=>r("supplier",a.target.value),className:"w-full px-4 py-3 bg-[#2a2a2a] border border-[#2a2a2a] rounded-2xl text-white placeholder-gray-400 focus:ring-2 focus:ring-[#29E7CD] focus:border-transparent",placeholder:"e.g., Coles"})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Storage Location"}),(0,d.jsx)("input",{type:"text",value:m.storage_location||"",onChange:a=>r("storage_location",a.target.value),className:"w-full px-4 py-3 bg-[#2a2a2a] border border-[#2a2a2a] rounded-2xl text-white placeholder-gray-400 focus:ring-2 focus:ring-[#29E7CD] focus:border-transparent",placeholder:"e.g., Coolroom"})]})]}),(0,d.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Trim/Peel Waste (%)"}),(0,d.jsx)("input",{type:"number",step:"0.1",min:"0",max:"100",value:m.trim_peel_waste_percentage||0,onChange:a=>r("trim_peel_waste_percentage",parseFloat(a.target.value)||0),className:"w-full px-4 py-3 bg-[#2a2a2a] border border-[#2a2a2a] rounded-2xl text-white placeholder-gray-400 focus:ring-2 focus:ring-[#29E7CD] focus:border-transparent",placeholder:"e.g., 10"})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Yield (%)"}),(0,d.jsx)("input",{type:"number",step:"0.1",min:"0",max:"100",value:m.yield_percentage||100,onChange:a=>r("yield_percentage",parseFloat(a.target.value)||100),className:"w-full px-4 py-3 bg-[#2a2a2a] border border-[#2a2a2a] rounded-2xl text-white placeholder-gray-400 focus:ring-2 focus:ring-[#29E7CD] focus:border-transparent",placeholder:"e.g., 90"})]})]}),(0,d.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Min Stock Level"}),(0,d.jsx)("input",{type:"number",step:"0.01",min:"0",value:m.min_stock_level||0,onChange:a=>r("min_stock_level",parseFloat(a.target.value)||0),className:"w-full px-4 py-3 bg-[#2a2a2a] border border-[#2a2a2a] rounded-2xl text-white placeholder-gray-400 focus:ring-2 focus:ring-[#29E7CD] focus:border-transparent",placeholder:"e.g., 5"})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Current Stock"}),(0,d.jsx)("input",{type:"number",step:"0.01",min:"0",value:m.current_stock||0,onChange:a=>r("current_stock",parseFloat(a.target.value)||0),className:"w-full px-4 py-3 bg-[#2a2a2a] border border-[#2a2a2a] rounded-2xl text-white placeholder-gray-400 focus:ring-2 focus:ring-[#29E7CD] focus:border-transparent",placeholder:"e.g., 10"})]})]}),(0,d.jsxs)("div",{className:"flex gap-4 pt-6",children:[(0,d.jsx)("button",{type:"submit",disabled:k,className:"flex-1 bg-gradient-to-r from-[#29E7CD] to-[#3B82F6] text-white px-6 py-3 rounded-2xl font-semibold hover:shadow-lg hover:shadow-[#29E7CD]/25 transition-all duration-300 disabled:opacity-50 disabled:cursor-not-allowed",children:k?"Saving...":a?"Update Ingredient":"Add Ingredient"}),(0,d.jsx)("button",{type:"button",onClick:i,className:"flex-1 bg-[#2a2a2a] text-white px-6 py-3 rounded-2xl font-semibold hover:bg-[#3a3a3a] transition-all duration-300",children:"Cancel"})]})]})]})}function o({isOpen:a,onClose:b,onImport:c,loading:e=!1}){let{t:i}=(0,h.Bd)(),[j,k]=(0,f.useState)(""),[l,m]=(0,f.useState)([]),[n,o]=(0,f.useState)(new Set),[p,q]=(0,f.useState)(null),r=a=>{a?o(new Set(l.map((a,b)=>b.toString()))):o(new Set)},s=async()=>{try{let a=l.filter((a,b)=>n.has(b.toString())).map(a=>({...a,ingredient_name:(0,g._J)(a.ingredient_name||""),brand:(0,g.SC)(a.brand||""),supplier:(0,g.zl)(a.supplier||""),storage_location:(0,g.M$)(a.storage_location||"")}));await c(a),k(""),m([]),o(new Set),q(null)}catch(a){console.error("Failed to import ingredients:",a)}},t=()=>{k(""),m([]),o(new Set),q(null),b()};return a?(0,d.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:(0,d.jsxs)("div",{className:"bg-[#1f1f1f] rounded-2xl shadow-2xl max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:[(0,d.jsx)("div",{className:"p-6 border-b border-[#2a2a2a]",children:(0,d.jsxs)("div",{className:"flex justify-between items-center",children:[(0,d.jsx)("h2",{className:"text-2xl font-bold text-white",children:"\uD83D\uDCC1 Import Ingredients from CSV"}),(0,d.jsx)("button",{onClick:t,className:"p-2 rounded-full bg-[#2a2a2a] hover:bg-[#3a3a3a] text-gray-400 hover:text-white transition-colors",children:(0,d.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,d.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})}),(0,d.jsxs)("div",{className:"p-6 space-y-6",children:[(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Upload CSV File"}),(0,d.jsx)("input",{type:"file",accept:".csv",onChange:a=>{let b=a.target.files?.[0];if(!b)return;let c=new FileReader;c.onload=a=>{let b=a.target?.result;k(b),(a=>{try{let b=a.split("\n").filter(a=>a.trim());if(b.length<2)return void q("CSV must have at least a header row and one data row");let c=b[0].split(",").map(a=>a.trim().toLowerCase()),d=[];for(let a=1;a<b.length;a++){let e=b[a].split(",").map(a=>a.trim()),f={};c.forEach((a,b)=>{let c=e[b]||"";a.includes("name")||a.includes("ingredient")?f.ingredient_name=(0,g._J)(c):a.includes("brand")?f.brand=(0,g.SC)(c):a.includes("cost")||a.includes("price")?f.cost_per_unit=parseFloat(c)||0:a.includes("unit")?f.unit=c.toUpperCase():a.includes("supplier")?f.supplier=(0,g.zl)(c):a.includes("code")||a.includes("sku")?f.product_code=c:a.includes("location")||a.includes("storage")?f.storage_location=(0,g.M$)(c):(a.includes("pack")||a.includes("size"))&&(f.pack_size=c||"1")}),f.ingredient_name&&(f.cost_per_unit||(f.cost_per_unit=0),f.cost_per_unit_as_purchased||(f.cost_per_unit_as_purchased=f.cost_per_unit||0),f.cost_per_unit_incl_trim||(f.cost_per_unit_incl_trim=f.cost_per_unit||0),f.trim_peel_waste_percentage||(f.trim_peel_waste_percentage=0),f.yield_percentage||(f.yield_percentage=100),f.unit||(f.unit="GM"),f.pack_size||(f.pack_size="1"),d.push(f))}m(d),q(null)}catch(a){q("Failed to parse CSV file")}})(b)},c.readAsText(b)},className:"w-full px-3 py-2 border border-[#2a2a2a] bg-[#0a0a0a] text-white rounded-lg focus:outline-none focus:ring-2 focus:ring-[#29E7CD]"}),(0,d.jsx)("p",{className:"text-xs text-gray-400 mt-1",children:"Supported columns: name, brand, cost, unit, supplier, code, location, pack_size"})]}),p&&(0,d.jsx)("div",{className:"bg-red-900/20 border border-red-500 text-red-400 px-4 py-3 rounded-lg",children:p}),l.length>0&&(0,d.jsxs)("div",{children:[(0,d.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,d.jsxs)("h3",{className:"text-lg font-medium text-white",children:["Preview (",l.length," ingredients found)"]}),(0,d.jsxs)("div",{className:"space-x-2",children:[(0,d.jsx)("button",{onClick:()=>r(!0),className:"text-sm text-[#29E7CD] hover:text-[#29E7CD]/80 transition-colors",children:"Select All"}),(0,d.jsx)("button",{onClick:()=>r(!1),className:"text-sm text-gray-400 hover:text-white transition-colors",children:"Clear All"})]})]}),(0,d.jsx)("div",{className:"max-h-60 overflow-y-auto border border-[#2a2a2a] rounded-lg",children:l.map((a,b)=>{let c=(a=>{let b=a.cost_per_unit||0,c=a.unit||"",d=b<1?b.toFixed(3):b.toFixed(2),e="";return a.pack_price&&a.pack_size&&a.pack_size_unit&&(e=`Pack: $${a.pack_price} for ${a.pack_size}${a.pack_size_unit}`),{cost:b,unit:c,formattedCost:d,packInfo:e}})(a),e=n.has(b.toString());return(0,d.jsx)("div",{className:`p-3 border-b border-[#2a2a2a] last:border-b-0 transition-colors ${e?"bg-[#29E7CD]/10":"hover:bg-[#2a2a2a]/20"}`,children:(0,d.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,d.jsx)("input",{type:"checkbox",checked:e,onChange:a=>((a,b)=>{let c=new Set(n);b?c.add(a):c.delete(a),o(c)})(b.toString(),a.target.checked),className:"w-4 h-4 text-[#29E7CD] bg-[#2a2a2a] border-[#2a2a2a] rounded focus:ring-[#29E7CD] focus:ring-2"}),(0,d.jsxs)("div",{className:"flex-1",children:[(0,d.jsx)("div",{className:"text-white font-medium",children:a.ingredient_name}),(0,d.jsxs)("div",{className:"text-sm text-gray-400",children:[a.brand&&`Brand: ${a.brand} • `,"Cost: $",c.formattedCost,"/",c.unit,c.packInfo&&` • ${c.packInfo}`]})]})]})},b)})}),(0,d.jsxs)("div",{className:"mt-4 flex justify-end space-x-3",children:[(0,d.jsx)("button",{onClick:t,className:"px-4 py-2 text-gray-400 hover:text-white transition-colors",children:"Cancel"}),(0,d.jsx)("button",{onClick:s,disabled:e||0===n.size,className:"bg-gradient-to-r from-[#29E7CD] to-[#D925C7] text-white px-4 py-2 rounded-lg hover:from-[#29E7CD]/80 hover:to-[#D925C7]/80 transition-all duration-200 shadow-lg hover:shadow-xl disabled:opacity-50 disabled:cursor-not-allowed",children:e?"Importing...":`Import Selected (${n.size})`})]})]}),(0,d.jsxs)("div",{className:"bg-[#2a2a2a]/30 p-4 rounded-lg border border-[#2a2a2a]/50",children:[(0,d.jsx)("h4",{className:"text-sm font-semibold text-white mb-2",children:"\uD83D\uDCCB CSV Format Instructions"}),(0,d.jsxs)("div",{className:"text-xs text-gray-400 space-y-1",children:[(0,d.jsx)("p",{children:"• First row should contain column headers"}),(0,d.jsx)("p",{children:"• Required columns: name (or ingredient), cost (or price), unit"}),(0,d.jsx)("p",{children:"• Optional columns: brand, supplier, code (or sku), location (or storage), pack_size"}),(0,d.jsx)("p",{children:"• Values will be automatically formatted and capitalized"}),(0,d.jsx)("p",{children:"• Empty rows will be skipped"})]})]})]})]})}):null}function p({formData:a,availableUnits:b,errors:c,onInputChange:e,formatCost:f}){return(0,d.jsxs)("div",{className:"space-y-6",children:[(0,d.jsxs)("div",{className:"text-center mb-6",children:[(0,d.jsx)("h3",{className:"text-xl font-semibold text-white mb-2",children:"\uD83D\uDCE6 Basic Information"}),(0,d.jsx)("p",{className:"text-gray-400",children:"Let's start with the essential details"})]}),(0,d.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 mb-6",children:[(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Ingredient Name *"}),(0,d.jsx)("input",{type:"text",required:!0,value:a.ingredient_name||"",onChange:a=>e("ingredient_name",a.target.value),className:"w-full px-4 py-3 border border-[#2a2a2a] bg-[#0a0a0a] text-white rounded-2xl focus:outline-none focus:ring-2 focus:ring-[#29E7CD] transition-all",placeholder:"e.g., Fresh Tomatoes"}),c.ingredient_name&&(0,d.jsx)("p",{className:"text-red-400 text-sm mt-1",children:c.ingredient_name})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Brand (Optional)"}),(0,d.jsx)("input",{type:"text",value:a.brand||"",onChange:a=>e("brand",a.target.value),className:"w-full px-4 py-3 border border-[#2a2a2a] bg-[#0a0a0a] text-white rounded-2xl focus:outline-none focus:ring-2 focus:ring-[#29E7CD] transition-all",placeholder:"e.g., Coles, Woolworths"})]})]}),(0,d.jsxs)("div",{className:"bg-[#2a2a2a]/30 p-6 rounded-2xl border border-[#2a2a2a]/50",children:[(0,d.jsx)("h3",{className:"text-lg font-semibold text-white mb-4 flex items-center",children:"\uD83D\uDCE6 Packaging Information"}),(0,d.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Pack Size *"}),(0,d.jsx)("input",{type:"text",required:!0,value:a.pack_size||"",onChange:a=>e("pack_size",a.target.value),className:"w-full px-4 py-3 border border-[#2a2a2a] bg-[#0a0a0a] text-white rounded-2xl focus:outline-none focus:ring-2 focus:ring-[#29E7CD] transition-all",placeholder:"e.g., 5"}),c.pack_size&&(0,d.jsx)("p",{className:"text-red-400 text-sm mt-1",children:c.pack_size})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Pack Unit *"}),(0,d.jsxs)("select",{required:!0,value:a.pack_size_unit||"",onChange:a=>e("pack_size_unit",a.target.value),className:"w-full px-4 py-3 border border-[#2a2a2a] bg-[#0a0a0a] text-white rounded-2xl focus:outline-none focus:ring-2 focus:ring-[#29E7CD] transition-all",children:[(0,d.jsx)("option",{value:"",children:"Select unit"}),b.map(a=>(0,d.jsx)("option",{value:a,children:a},a))]}),c.pack_size_unit&&(0,d.jsx)("p",{className:"text-red-400 text-sm mt-1",children:c.pack_size_unit})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Pack Price *"}),(0,d.jsx)("input",{type:"number",step:"0.01",required:!0,value:a.pack_price||"",onChange:a=>e("pack_price",parseFloat(a.target.value)||0),className:"w-full px-4 py-3 border border-[#2a2a2a] bg-[#0a0a0a] text-white rounded-2xl focus:outline-none focus:ring-2 focus:ring-[#29E7CD] transition-all",placeholder:"e.g., 12.99"}),c.pack_price&&(0,d.jsx)("p",{className:"text-red-400 text-sm mt-1",children:c.pack_price})]})]})]}),(0,d.jsxs)("div",{className:"bg-[#2a2a2a]/30 p-6 rounded-2xl border border-[#2a2a2a]/50",children:[(0,d.jsx)("h3",{className:"text-lg font-semibold text-white mb-4 flex items-center",children:"\uD83E\uDDEE Cost Calculation"}),(0,d.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Working Unit *"}),(0,d.jsxs)("select",{required:!0,value:a.unit||"",onChange:a=>e("unit",a.target.value),className:"w-full px-4 py-3 border border-[#2a2a2a] bg-[#0a0a0a] text-white rounded-2xl focus:outline-none focus:ring-2 focus:ring-[#29E7CD] transition-all",children:[(0,d.jsx)("option",{value:"",children:"Select unit"}),b.map(a=>(0,d.jsx)("option",{value:a,children:a},a))]}),c.unit&&(0,d.jsx)("p",{className:"text-red-400 text-sm mt-1",children:c.unit})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Cost per Unit"}),(0,d.jsxs)("div",{className:"w-full px-4 py-3 border border-[#2a2a2a] bg-[#0a0a0a] text-white rounded-2xl",children:["$",a.cost_per_unit?f(a.cost_per_unit):"0.000"]}),(0,d.jsx)("p",{className:"text-xs text-gray-400 mt-1",children:"Automatically calculated from pack price and size"})]})]})]})]})}function q({formData:a,suppliers:b,errors:c,onInputChange:e,onWastagePercentageChange:g,onYieldPercentageChange:h,onAddSupplier:i}){let[j,k]=(0,f.useState)(""),[l,m]=(0,f.useState)(!1),n=async a=>{if(a.trim())try{await i(a),k(""),m(!1)}catch(a){console.error("Failed to add supplier:",a)}};return(0,d.jsxs)("div",{className:"space-y-6",children:[(0,d.jsxs)("div",{className:"text-center mb-6",children:[(0,d.jsx)("h3",{className:"text-xl font-semibold text-white mb-2",children:"⚙️ Advanced Settings"}),(0,d.jsx)("p",{className:"text-gray-400",children:"Configure supplier, storage, and yield information"})]}),(0,d.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-6",children:[(0,d.jsxs)("div",{className:"bg-[#2a2a2a]/30 p-6 rounded-2xl border border-[#2a2a2a]/50",children:[(0,d.jsx)("h3",{className:"text-lg font-semibold text-white mb-4 flex items-center",children:"\uD83C\uDFE2 Supplier Information"}),(0,d.jsxs)("div",{className:"space-y-4",children:[(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Supplier"}),(0,d.jsxs)("div",{className:"flex space-x-2",children:[(0,d.jsxs)("select",{value:a.supplier||"",onChange:a=>e("supplier",a.target.value),className:"flex-1 px-4 py-3 border border-[#2a2a2a] bg-[#0a0a0a] text-white rounded-2xl focus:outline-none focus:ring-2 focus:ring-[#29E7CD] transition-all",children:[(0,d.jsx)("option",{value:"",children:"Select supplier"}),b.map(a=>(0,d.jsx)("option",{value:a.name,children:a.name},a.id))]}),(0,d.jsx)("button",{type:"button",onClick:()=>m(!0),className:"px-4 py-3 bg-[#29E7CD] text-black rounded-2xl hover:bg-[#29E7CD]/80 transition-all font-medium",children:"➕"})]})]}),l&&(0,d.jsx)("div",{className:"bg-[#1f1f1f] p-4 rounded-xl border border-[#29E7CD]/30",children:(0,d.jsxs)("div",{className:"flex space-x-2",children:[(0,d.jsx)("input",{type:"text",value:j,onChange:a=>k(a.target.value),placeholder:"New supplier name",className:"flex-1 px-3 py-2 border border-[#2a2a2a] bg-[#0a0a0a] text-white rounded-lg focus:outline-none focus:ring-2 focus:ring-[#29E7CD] transition-all"}),(0,d.jsx)("button",{type:"button",onClick:()=>n(j),className:"px-3 py-2 bg-[#29E7CD] text-black rounded-lg hover:bg-[#29E7CD]/80 transition-all font-medium",children:"Add"}),(0,d.jsx)("button",{type:"button",onClick:()=>{m(!1),k("")},className:"px-3 py-2 bg-[#2a2a2a] text-white rounded-lg hover:bg-[#3a3a3a] transition-all",children:"Cancel"})]})}),(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Product Code (Optional)"}),(0,d.jsx)("input",{type:"text",value:a.product_code||"",onChange:a=>e("product_code",a.target.value),className:"w-full px-4 py-3 border border-[#2a2a2a] bg-[#0a0a0a] text-white rounded-2xl focus:outline-none focus:ring-2 focus:ring-[#29E7CD] transition-all",placeholder:"e.g., SKU123456"})]})]})]}),(0,d.jsxs)("div",{className:"bg-[#2a2a2a]/30 p-6 rounded-2xl border border-[#2a2a2a]/50",children:[(0,d.jsx)("h3",{className:"text-lg font-semibold text-white mb-4 flex items-center",children:"\uD83D\uDCE6 Storage & Stock"}),(0,d.jsxs)("div",{className:"space-y-4",children:[(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Storage Location"}),(0,d.jsx)("input",{type:"text",value:a.storage_location||"",onChange:a=>e("storage_location",a.target.value),className:"w-full px-4 py-3 border border-[#2a2a2a] bg-[#0a0a0a] text-white rounded-2xl focus:outline-none focus:ring-2 focus:ring-[#29E7CD] transition-all",placeholder:"e.g., Walk-in Cooler, Pantry"})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Min Stock Level"}),(0,d.jsx)("input",{type:"number",value:a.min_stock_level||"",onChange:a=>e("min_stock_level",parseFloat(a.target.value)||0),className:"w-full px-4 py-3 border border-[#2a2a2a] bg-[#0a0a0a] text-white rounded-2xl focus:outline-none focus:ring-2 focus:ring-[#29E7CD] transition-all",placeholder:"e.g., 10"})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Current Stock"}),(0,d.jsx)("input",{type:"number",value:a.current_stock||"",onChange:a=>e("current_stock",parseFloat(a.target.value)||0),className:"w-full px-4 py-3 border border-[#2a2a2a] bg-[#0a0a0a] text-white rounded-2xl focus:outline-none focus:ring-2 focus:ring-[#29E7CD] transition-all",placeholder:"e.g., 25"})]})]})]})]}),(0,d.jsxs)("div",{className:"bg-[#2a2a2a]/30 p-6 rounded-2xl border border-[#2a2a2a]/50",children:[(0,d.jsx)("h3",{className:"text-lg font-semibold text-white mb-4 flex items-center",children:"\uD83C\uDFAF Yield & Wastage"}),(0,d.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-6",children:[(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Wastage Percentage"}),(0,d.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,d.jsx)("input",{type:"range",min:"0",max:"100",value:a.trim_peel_waste_percentage||0,onChange:a=>g(parseInt(a.target.value)),className:"flex-1 h-2 bg-[#2a2a2a] rounded-lg appearance-none cursor-pointer slider"}),(0,d.jsxs)("div",{className:"w-20 text-center",children:[(0,d.jsxs)("div",{className:"text-2xl font-bold text-[#29E7CD]",children:[a.trim_peel_waste_percentage||0,"%"]}),(0,d.jsx)("div",{className:"text-xs text-gray-400",children:"Waste"})]})]}),(0,d.jsx)("p",{className:"text-xs text-gray-400 mt-2",children:"How much gets thrown away during prep (peels, trimmings, etc.)"})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Yield Percentage"}),(0,d.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,d.jsx)("input",{type:"range",min:"0",max:"100",value:a.yield_percentage||100,onChange:a=>h(parseInt(a.target.value)),className:"flex-1 h-2 bg-[#2a2a2a] rounded-lg appearance-none cursor-pointer slider"}),(0,d.jsxs)("div",{className:"w-20 text-center",children:[(0,d.jsxs)("div",{className:"text-2xl font-bold text-[#29E7CD]",children:[a.yield_percentage||100,"%"]}),(0,d.jsx)("div",{className:"text-xs text-gray-400",children:"Yield"})]})]}),(0,d.jsx)("p",{className:"text-xs text-gray-400 mt-2",children:"How much you get after prep (usable portion)"})]})]}),(0,d.jsx)("div",{className:"mt-4 p-4 bg-[#1f1f1f] rounded-xl border border-[#29E7CD]/20",children:(0,d.jsxs)("div",{className:"flex items-center space-x-2 text-sm",children:[(0,d.jsx)("span",{className:"text-[#29E7CD]",children:"\uD83D\uDCA1"}),(0,d.jsxs)("span",{className:"text-gray-300",children:[(0,d.jsx)("strong",{children:"Tip:"})," These percentages are linked - adjusting one automatically adjusts the other. For example, if you waste 20%, you get 80% yield."]})]})})]})]})}function r({formData:a,formatCost:b}){return(0,d.jsxs)("div",{className:"space-y-6",children:[(0,d.jsxs)("div",{className:"text-center mb-6",children:[(0,d.jsx)("h3",{className:"text-xl font-semibold text-white mb-2",children:"✅ Review & Save"}),(0,d.jsx)("p",{className:"text-gray-400",children:"Review your ingredient details before saving"})]}),(0,d.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,d.jsxs)("div",{className:"bg-[#2a2a2a]/30 p-6 rounded-2xl border border-[#2a2a2a]/50",children:[(0,d.jsx)("h3",{className:"text-lg font-semibold text-white mb-4 flex items-center",children:"\uD83D\uDCE6 Basic Information"}),(0,d.jsxs)("div",{className:"space-y-3",children:[(0,d.jsxs)("div",{className:"flex justify-between",children:[(0,d.jsx)("span",{className:"text-gray-400",children:"Name:"}),(0,d.jsx)("span",{className:"text-white font-medium",children:a.ingredient_name||"Not set"})]}),(0,d.jsxs)("div",{className:"flex justify-between",children:[(0,d.jsx)("span",{className:"text-gray-400",children:"Brand:"}),(0,d.jsx)("span",{className:"text-white",children:a.brand||"Not specified"})]}),(0,d.jsxs)("div",{className:"flex justify-between",children:[(0,d.jsx)("span",{className:"text-gray-400",children:"Pack Size:"}),(0,d.jsxs)("span",{className:"text-white",children:[a.pack_size||"Not set"," ",a.pack_size_unit||""]})]}),(0,d.jsxs)("div",{className:"flex justify-between",children:[(0,d.jsx)("span",{className:"text-gray-400",children:"Pack Price:"}),(0,d.jsxs)("span",{className:"text-white",children:["$",a.pack_price||"0.00"]})]}),(0,d.jsxs)("div",{className:"flex justify-between",children:[(0,d.jsx)("span",{className:"text-gray-400",children:"Working Unit:"}),(0,d.jsx)("span",{className:"text-white",children:a.unit||"Not set"})]}),(0,d.jsxs)("div",{className:"flex justify-between border-t border-[#2a2a2a] pt-3",children:[(0,d.jsx)("span",{className:"text-[#29E7CD] font-medium",children:"Cost per Unit:"}),(0,d.jsxs)("span",{className:"text-[#29E7CD] font-bold",children:["$",a.cost_per_unit?b(a.cost_per_unit):"0.000"]})]})]})]}),(0,d.jsxs)("div",{className:"bg-[#2a2a2a]/30 p-6 rounded-2xl border border-[#2a2a2a]/50",children:[(0,d.jsx)("h3",{className:"text-lg font-semibold text-white mb-4 flex items-center",children:"\uD83C\uDFE2 Supplier & Storage"}),(0,d.jsxs)("div",{className:"space-y-3",children:[(0,d.jsxs)("div",{className:"flex justify-between",children:[(0,d.jsx)("span",{className:"text-gray-400",children:"Supplier:"}),(0,d.jsx)("span",{className:"text-white",children:a.supplier||"Not specified"})]}),(0,d.jsxs)("div",{className:"flex justify-between",children:[(0,d.jsx)("span",{className:"text-gray-400",children:"Product Code:"}),(0,d.jsx)("span",{className:"text-white",children:a.product_code||"Not set"})]}),(0,d.jsxs)("div",{className:"flex justify-between",children:[(0,d.jsx)("span",{className:"text-gray-400",children:"Storage Location:"}),(0,d.jsx)("span",{className:"text-white",children:a.storage_location||"Not specified"})]}),(0,d.jsxs)("div",{className:"flex justify-between",children:[(0,d.jsx)("span",{className:"text-gray-400",children:"Min Stock:"}),(0,d.jsxs)("span",{className:"text-white",children:[a.min_stock_level||"0"," ",a.unit||""]})]}),(0,d.jsxs)("div",{className:"flex justify-between",children:[(0,d.jsx)("span",{className:"text-gray-400",children:"Current Stock:"}),(0,d.jsxs)("span",{className:"text-white",children:[a.current_stock||"0"," ",a.unit||""]})]})]})]})]}),(0,d.jsxs)("div",{className:"bg-[#2a2a2a]/30 p-6 rounded-2xl border border-[#2a2a2a]/50",children:[(0,d.jsx)("h3",{className:"text-lg font-semibold text-white mb-4 flex items-center",children:"\uD83C\uDFAF Yield & Cost Analysis"}),(0,d.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-6",children:[(0,d.jsxs)("div",{className:"text-center",children:[(0,d.jsxs)("div",{className:"text-3xl font-bold text-[#D925C7] mb-2",children:[a.trim_peel_waste_percentage||0,"%"]}),(0,d.jsx)("div",{className:"text-gray-400 text-sm",children:"Wastage"}),(0,d.jsx)("div",{className:"text-xs text-gray-500 mt-1",children:"Lost during prep"})]}),(0,d.jsxs)("div",{className:"text-center",children:[(0,d.jsxs)("div",{className:"text-3xl font-bold text-[#29E7CD] mb-2",children:[a.yield_percentage||100,"%"]}),(0,d.jsx)("div",{className:"text-gray-400 text-sm",children:"Yield"}),(0,d.jsx)("div",{className:"text-xs text-gray-500 mt-1",children:"Usable portion"})]}),(0,d.jsxs)("div",{className:"text-center",children:[(0,d.jsxs)("div",{className:"text-3xl font-bold text-[#3B82F6] mb-2",children:["$",a.cost_per_unit_incl_trim?b(a.cost_per_unit_incl_trim):"0.000"]}),(0,d.jsx)("div",{className:"text-gray-400 text-sm",children:"Adjusted Cost"}),(0,d.jsx)("div",{className:"text-xs text-gray-500 mt-1",children:"Including waste"})]})]}),(0,d.jsx)("div",{className:"mt-4 p-4 bg-[#1f1f1f] rounded-xl border border-[#29E7CD]/20",children:(0,d.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,d.jsx)("span",{className:"text-[#29E7CD] text-lg",children:"\uD83D\uDCA1"}),(0,d.jsxs)("div",{children:[(0,d.jsx)("h4",{className:"text-white font-medium mb-1",children:"Cost Impact"}),(0,d.jsxs)("p",{className:"text-gray-300 text-sm",children:["Your actual cost per unit is ",(0,d.jsxs)("strong",{children:["$",a.cost_per_unit_incl_trim?b(a.cost_per_unit_incl_trim):"0.000"]}),"after accounting for ",a.trim_peel_waste_percentage||0,"% wastage. This is the cost you should use for COGS calculations."]})]})]})})]}),(0,d.jsxs)("div",{className:"bg-gradient-to-r from-[#29E7CD]/10 to-[#D925C7]/10 border border-[#29E7CD]/30 rounded-2xl p-6",children:[(0,d.jsxs)("div",{className:"flex items-center space-x-3 mb-4",children:[(0,d.jsx)("span",{className:"text-2xl",children:"\uD83C\uDF89"}),(0,d.jsx)("h3",{className:"text-lg font-semibold text-white",children:"Ready to Add Ingredient!"})]}),(0,d.jsxs)("p",{className:"text-gray-300 text-sm",children:["Your ingredient ",(0,d.jsx)("strong",{children:a.ingredient_name})," is ready to be added to your inventory. All calculations are complete and the ingredient will be available for use in recipes and COGS calculations."]})]})]})}function s({currentStep:a,totalSteps:b,onNext:c,onPrevious:e,onSave:f,onCancel:g,canProceed:h,loading:i=!1}){let j=a===b;return(0,d.jsxs)("div",{className:"flex justify-between items-center pt-6 border-t border-[#2a2a2a]",children:[(0,d.jsxs)("div",{className:"flex items-center space-x-4",children:[1!==a&&(0,d.jsx)("button",{type:"button",onClick:e,disabled:i,className:"px-6 py-3 bg-[#2a2a2a] text-white rounded-2xl hover:bg-[#3a3a3a] transition-all duration-200 font-medium disabled:opacity-50 disabled:cursor-not-allowed",children:"← Previous"}),(0,d.jsx)("button",{type:"button",onClick:g,disabled:i,className:"px-6 py-3 bg-red-600/20 text-red-400 rounded-2xl hover:bg-red-600/30 transition-all duration-200 font-medium disabled:opacity-50 disabled:cursor-not-allowed",children:"Cancel"})]}),(0,d.jsxs)("div",{className:"flex items-center space-x-4",children:[!j&&(0,d.jsx)("button",{type:"button",onClick:c,disabled:!h||i,className:`px-8 py-3 rounded-2xl font-medium transition-all duration-200 ${h&&!i?"bg-gradient-to-r from-[#29E7CD] to-[#D925C7] text-white hover:from-[#29E7CD]/80 hover:to-[#D925C7]/80 shadow-lg hover:shadow-xl":"bg-[#2a2a2a] text-gray-400 cursor-not-allowed"}`,children:i?(0,d.jsxs)("span",{className:"flex items-center space-x-2",children:[(0,d.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-gray-400"}),(0,d.jsx)("span",{children:"Loading..."})]}):(0,d.jsx)(d.Fragment,{children:"Next →"})}),j&&(0,d.jsx)("button",{type:"button",onClick:f,disabled:!h||i,className:`px-8 py-3 rounded-2xl font-medium transition-all duration-200 ${h&&!i?"bg-gradient-to-r from-[#29E7CD] to-[#3B82F6] text-white hover:from-[#29E7CD]/80 hover:to-[#3B82F6]/80 shadow-lg hover:shadow-xl":"bg-[#2a2a2a] text-gray-400 cursor-not-allowed"}`,children:i?(0,d.jsxs)("span",{className:"flex items-center space-x-2",children:[(0,d.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),(0,d.jsx)("span",{children:"Saving..."})]}):(0,d.jsx)(d.Fragment,{children:"✅ Save Ingredient"})})]})]})}function t({suppliers:a,availableUnits:b,onSave:c,onCancel:e,onAddSupplier:i,loading:k=!1}){let{t:l}=(0,h.Bd)(),[m,n]=(0,f.useState)(1),[o,t]=(0,f.useState)({ingredient_name:"",brand:"",pack_size:"",pack_size_unit:"",pack_price:0,unit:"",cost_per_unit:0,cost_per_unit_as_purchased:0,cost_per_unit_incl_trim:0,trim_peel_waste_percentage:0,yield_percentage:100,supplier:"",product_code:"",storage_location:"",min_stock_level:0,current_stock:0}),[u,v]=(0,f.useState)({}),w=()=>{if(o.pack_price&&o.pack_size&&o.pack_size_unit&&o.unit){var a,b,c,d;let e=(a=o.pack_price,b=parseFloat(o.pack_size),c=o.pack_size_unit,d=o.unit,0===a||0===b?0:a/(b*(0,j.oU)(1,c,d).conversionFactor));t(a=>({...a,cost_per_unit:e,cost_per_unit_as_purchased:e,cost_per_unit_incl_trim:e/((a.yield_percentage||100)/100)}))}},x=a=>{let b={};return 1===a&&(o.ingredient_name?.trim()||(b.ingredient_name="Ingredient name is required"),o.pack_size?.trim()||(b.pack_size="Pack size is required"),o.pack_size_unit||(b.pack_size_unit="Pack unit is required"),(!o.pack_price||o.pack_price<=0)&&(b.pack_price="Pack price must be greater than 0"),o.unit||(b.unit="Working unit is required")),v(b),0===Object.keys(b).length},y=async()=>{if(x(3))try{let a={...o,ingredient_name:(0,g._J)(o.ingredient_name||""),brand:o.brand?(0,g._J)(o.brand):void 0,supplier:o.supplier?(0,g._J)(o.supplier):void 0,storage_location:o.storage_location?(0,g._J)(o.storage_location):void 0};await c(a),n(1),t({ingredient_name:"",brand:"",pack_size:"",pack_size_unit:"",pack_price:0,unit:"",cost_per_unit:0,cost_per_unit_as_purchased:0,cost_per_unit_incl_trim:0,trim_peel_waste_percentage:0,yield_percentage:100,supplier:"",product_code:"",storage_location:"",min_stock_level:0,current_stock:0}),v({})}catch(a){console.error("Error saving ingredient:",a)}},z=3===m?x(3):x(m),A={formData:o,suppliers:a,availableUnits:b,errors:u,onInputChange:(a,b)=>{if(t(c=>({...c,[a]:b})),u[a]&&v(b=>({...b,[a]:""})),["pack_price","pack_size","pack_size_unit","unit"].includes(a)&&setTimeout(w,100),"ingredient_name"===a&&"string"==typeof b&&b.length>3){let a=(a=>{let b=a.toLowerCase();return b.includes("onion")||b.includes("garlic")||b.includes("celery")||b.includes("carrot")||b.includes("leek")||b.includes("fennel")?35:b.includes("tomato")||b.includes("cucumber")||b.includes("bell pepper")||b.includes("capsicum")||b.includes("eggplant")||b.includes("zucchini")?20:b.includes("potato")||b.includes("apple")||b.includes("banana")||b.includes("orange")||b.includes("lemon")||b.includes("lime")?10:b.includes("rice")||b.includes("pasta")||b.includes("flour")||b.includes("sugar")||b.includes("salt")||b.includes("oil")?2:15})(b);t(b=>({...b,trim_peel_waste_percentage:a,yield_percentage:100-a,cost_per_unit_incl_trim:(b.cost_per_unit||0)/((100-a)/100)}))}},onWastagePercentageChange:a=>{let b=Math.max(0,Math.min(100,Math.round(a))),c=100-b;t(a=>({...a,trim_peel_waste_percentage:b,yield_percentage:c,cost_per_unit_incl_trim:(a.cost_per_unit||0)/(c/100)}))},onYieldPercentageChange:a=>{let b=Math.max(0,Math.min(100,Math.round(a))),c=100-b;t(a=>({...a,yield_percentage:b,trim_peel_waste_percentage:c,cost_per_unit_incl_trim:(a.cost_per_unit||0)/(b/100)}))},onAddSupplier:i,formatCost:a=>a<1?a.toFixed(3):a.toFixed(2)};return(0,d.jsxs)("div",{className:"bg-[#1f1f1f] p-6 rounded-3xl shadow-lg border border-[#2a2a2a] mb-8",children:[(0,d.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,d.jsx)("h2",{className:"text-2xl font-semibold text-white",children:"\uD83E\uDD58 Add New Ingredient"}),(0,d.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,d.jsx)("div",{className:"w-2 h-2 bg-[#29E7CD] rounded-full"}),(0,d.jsx)("span",{className:"text-xs text-gray-400",children:"Guided Setup"})]})]}),(0,d.jsxs)("div",{className:"mb-8",children:[(0,d.jsx)("div",{className:"flex items-center justify-center space-x-4",children:[1,2,3].map(a=>(0,d.jsxs)("div",{className:"flex items-center",children:[(0,d.jsx)("div",{className:`w-8 h-8 rounded-full flex items-center justify-center text-sm font-semibold transition-all duration-200 ${a<=m?"bg-gradient-to-r from-[#29E7CD] to-[#D925C7] text-white":"bg-[#2a2a2a] text-gray-400"}`,children:a}),a<3&&(0,d.jsx)("div",{className:`w-12 h-1 mx-2 transition-all duration-200 ${a<m?"bg-gradient-to-r from-[#29E7CD] to-[#D925C7]":"bg-[#2a2a2a]"}`})]},a))}),(0,d.jsx)("div",{className:"flex justify-center mt-4",children:(0,d.jsxs)("div",{className:"text-sm text-gray-400",children:[1===m&&"\uD83D\uDCE6 Basic Information",2===m&&"⚙️ Advanced Settings",3===m&&"✅ Review & Save"]})})]}),1===m&&(0,d.jsx)(p,{...A}),2===m&&(0,d.jsx)(q,{...A}),3===m&&(0,d.jsx)(r,{...A}),(0,d.jsx)(s,{currentStep:m,totalSteps:3,onNext:()=>{x(m)&&n(a=>Math.min(a+1,3))},onPrevious:()=>{n(a=>Math.max(a-1,1))},onSave:y,onCancel:e,canProceed:z,loading:k})]})}function u(){let{t:a}=(0,h.Bd)(),[b,c]=(0,f.useState)([]),[j,p]=(0,f.useState)([]),[q,r]=(0,f.useState)([]),[s,u]=function(a=!1,b=100){let[c,d]=(0,f.useState)(a),[e,g]=(0,f.useState)(!0),h=(0,f.useRef)(null),i=(0,f.useRef)(Date.now());return[c,a=>{if(e)if(a){let a=Date.now()-i.current;a>=b?d(!0):h.current=setTimeout(()=>{e&&d(!0)},b-a)}else h.current&&(clearTimeout(h.current),h.current=null),d(!1)}]}(!1,200),[v,w]=(0,f.useState)(null),[x,y]=(0,f.useState)(!1),[z,A]=(0,f.useState)(null),[B,C]=(0,f.useState)(!1),[D,E]=(0,f.useState)(""),[F,G]=(0,f.useState)([]),[H,I]=(0,f.useState)(!1),[J,K]=(0,f.useState)(new Set),[L,M]=(0,f.useState)("g"),[N,O]=(0,f.useState)(""),[P,Q]=(0,f.useState)(""),[R,S]=(0,f.useState)(""),[T,U]=(0,f.useState)("name"),[V,W]=(0,f.useState)(1),[X,Y]=(0,f.useState)({ingredient_name:"",brand:"",pack_size:"",pack_size_unit:"g",pack_price:0,unit:"g",cost_per_unit:0,supplier:"",product_code:"",storage_location:"",min_stock_level:0,current_stock:0});(0,f.useMemo)(()=>{let a=b.filter(a=>{let b=!N||a.ingredient_name.toLowerCase().includes(N.toLowerCase())||a.brand&&a.brand.toLowerCase().includes(N.toLowerCase())||a.supplier&&a.supplier.toLowerCase().includes(N.toLowerCase()),c=!P||a.supplier===P,d=!R||a.storage_location===R;return b&&c&&d});a.sort((a,b)=>{switch(T){case"name":return a.ingredient_name.localeCompare(b.ingredient_name);case"cost_asc":return(a.cost_per_unit||0)-(b.cost_per_unit||0);case"cost_desc":return(b.cost_per_unit||0)-(a.cost_per_unit||0);case"supplier":return(a.supplier||"").localeCompare(b.supplier||"");default:return 0}}),p(a)},[b,N,P,R,T]);let Z=async a=>{try{let{data:b,error:d}=await e.ND.from("ingredients").insert([{...a,ingredient_name:(0,g._J)(a.ingredient_name||""),brand:a.brand?(0,g.SC)(a.brand):null,supplier:a.supplier?(0,g.zl)(a.supplier):null,storage_location:a.storage_location?(0,g.M$)(a.storage_location):null,product_code:a.product_code?(0,g.$m)(a.product_code):null}]).select();if(d)throw d;c(a=>[...a,...b||[]]),y(!1),W(1),Y({ingredient_name:"",brand:"",pack_size:"",pack_size_unit:"g",pack_price:0,unit:"g",cost_per_unit:0,supplier:"",product_code:"",storage_location:"",min_stock_level:0,current_stock:0})}catch(a){w("Failed to add ingredient")}},$=async a=>{try{let{error:b}=await e.ND.from("ingredients").delete().eq("id",a);if(b)throw b;c(b=>b.filter(b=>b.id!==a))}catch(a){w("Failed to delete ingredient")}},_=async()=>{try{let{error:a}=await e.ND.from("ingredients").delete().in("id",Array.from(J));if(a)throw a;c(a=>a.filter(a=>!J.has(a.id))),K(new Set)}catch(a){w("Failed to delete selected ingredients")}},aa=async()=>{try{I(!0);let{data:a,error:b}=await e.ND.from("ingredients").insert(F.map(a=>({...a,ingredient_name:(0,g._J)(a.ingredient_name||""),brand:a.brand?(0,g.SC)(a.brand):null,supplier:a.supplier?(0,g.zl)(a.supplier):null,storage_location:a.storage_location?(0,g.M$)(a.storage_location):null,product_code:a.product_code?(0,g.$m)(a.product_code):null}))).select();if(b)throw b;c(b=>[...b,...a||[]]),C(!1),E(""),G([])}catch(a){w("Failed to import ingredients")}finally{I(!1)}};return s?(0,d.jsx)(i.JQ,{}):(0,d.jsx)("div",{className:"min-h-screen bg-[#0a0a0a] p-4 sm:p-6",children:(0,d.jsxs)("div",{className:"max-w-7xl mx-auto",children:[(0,d.jsx)("div",{className:"mb-6",children:(0,d.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[(0,d.jsxs)("div",{children:[(0,d.jsxs)("h1",{className:"text-3xl font-bold text-white mb-2",children:["\uD83E\uDD58 ",a("ingredients.title","Ingredients Management")]}),(0,d.jsx)("p",{className:"text-gray-400",children:a("ingredients.subtitle","Manage your kitchen ingredients and inventory")})]}),(0,d.jsxs)("div",{className:"flex items-center gap-3",children:[(0,d.jsx)("label",{className:"text-sm font-medium text-gray-300",children:"Display costs in:"}),(0,d.jsxs)("select",{value:L,onChange:a=>M(a.target.value),className:"px-4 py-3 bg-[#0a0a0a] border border-[#2a2a2a] rounded-lg text-white focus:ring-2 focus:ring-[#29E7CD] focus:border-transparent min-h-[44px] flex items-center justify-center",children:[(0,d.jsxs)("optgroup",{label:"Weight",children:[(0,d.jsx)("option",{value:"g",children:"Grams (g)"}),(0,d.jsx)("option",{value:"kg",children:"Kilograms (kg)"}),(0,d.jsx)("option",{value:"oz",children:"Ounces (oz)"}),(0,d.jsx)("option",{value:"lb",children:"Pounds (lb)"})]}),(0,d.jsxs)("optgroup",{label:"Volume",children:[(0,d.jsx)("option",{value:"ml",children:"Milliliters (ml)"}),(0,d.jsx)("option",{value:"l",children:"Liters (L)"}),(0,d.jsx)("option",{value:"tsp",children:"Teaspoons (tsp)"}),(0,d.jsx)("option",{value:"tbsp",children:"Tablespoons (tbsp)"}),(0,d.jsx)("option",{value:"cup",children:"Cups"})]})]})]})]})}),v&&(0,d.jsx)("div",{className:"bg-red-900/20 border border-red-500 text-red-400 px-4 py-3 rounded-lg mb-6",children:v}),(0,d.jsx)(m,{selectedIngredients:J,filteredIngredients:j,onAddIngredient:()=>y(!0),onImportCSV:()=>C(!0),onExportCSV:()=>{let a=new Blob([["Ingredient Name,Brand,Pack Size,Pack Size Unit,Pack Price,Unit,Cost Per Unit,Supplier,Product Code,Storage Location,Min Stock Level,Current Stock",...j.map(a=>[a.ingredient_name,a.brand||"",a.pack_size||"",a.pack_size_unit||"",a.pack_price||0,a.unit||"",a.cost_per_unit||0,a.supplier||"",a.product_code||"",a.storage_location||"",a.min_stock_level||0,a.current_stock||0].join(","))].join("\n")],{type:"text/csv"}),b=window.URL.createObjectURL(a),c=document.createElement("a");c.href=b,c.download="ingredients.csv",c.click(),window.URL.revokeObjectURL(b)},onBulkDelete:_,onBulkUpdate:async()=>{},loading:s}),x&&(0,d.jsx)(t,{suppliers:q,availableUnits:["g","kg","oz","lb","ml","l","tsp","tbsp","cup","pc","box","pack","bag","bottle","can"],onSave:Z,onCancel:()=>{y(!1),W(1),Y({ingredient_name:"",brand:"",pack_size:"",pack_size_unit:"g",pack_price:0,unit:"g",cost_per_unit:0,supplier:"",product_code:"",storage_location:"",min_stock_level:0,current_stock:0})},onAddSupplier:async a=>{console.log("Adding supplier:",a)},loading:s}),(0,d.jsx)(l,{ingredients:b,searchTerm:N,supplierFilter:P,storageFilter:R,sortBy:T,displayUnit:L,onSearchChange:O,onSupplierFilterChange:Q,onStorageFilterChange:S,onSortChange:U,onDisplayUnitChange:M}),(0,d.jsx)(k,{ingredients:j,displayUnit:L,onEdit:A,onDelete:$,selectedIngredients:J,onSelectIngredient:(a,b)=>{let c=new Set(J);b?c.add(a):c.delete(a),K(c)},onSelectAll:a=>{a?K(new Set(j.map(a=>a.id))):K(new Set)},loading:s}),z&&(0,d.jsx)(n,{ingredient:z,suppliers:q,availableUnits:["g","kg","oz","lb","ml","l","tsp","tbsp","cup","pc","box","pack","bag","bottle","can"],onSave:async a=>{if(z?.id)try{let{data:b,error:d}=await e.ND.from("ingredients").update({...a,updated_at:new Date().toISOString()}).eq("id",z.id).select().single();if(d)throw d;c(a=>a.map(a=>a.id===z.id?b:a)),A(null)}catch(a){console.error("Error updating ingredient:",a),w("Failed to update ingredient")}},onCancel:()=>A(null),loading:s}),B&&(0,d.jsx)(o,{isOpen:B,onClose:()=>{C(!1),E(""),G([])},onImport:aa,loading:H})]})})}},10846:a=>{"use strict";a.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},11997:a=>{"use strict";a.exports=require("punycode")},19121:a=>{"use strict";a.exports=require("next/dist/server/app-render/action-async-storage.external.js")},26606:(a,b,c)=>{"use strict";c.d(b,{mT:()=>f,oU:()=>e});let d={g:{g:1,kg:.001,oz:.035274,lb:.002205},kg:{g:1e3,kg:1,oz:35.274,lb:2.205},oz:{g:28.3495,kg:.0283495,oz:1,lb:.0625},lb:{g:453.592,kg:.453592,oz:16,lb:1},ml:{ml:1,l:.001,tsp:.202884,tbsp:.067628,cup:.004227},l:{ml:1e3,l:1,tsp:202.884,tbsp:67.628,cup:4.227},tsp:{ml:4.92892,l:.00492892,tsp:1,tbsp:.333333,cup:.0208333},tbsp:{ml:14.7868,l:.0147868,tsp:3,tbsp:1,cup:.0625},cup:{ml:236.588,l:.236588,tsp:48,tbsp:16,cup:1},pc:{pc:1,box:.01,pack:.1,bag:.05,bottle:.1,can:.1},box:{pc:100,box:1,pack:10,bag:5,bottle:10,can:10},pack:{pc:10,box:.1,pack:1,bag:.5,bottle:1,can:1},bag:{pc:20,box:.2,pack:2,bag:1,bottle:2,can:2},bottle:{pc:10,box:.1,pack:1,bag:.5,bottle:1,can:1},can:{pc:10,box:.1,pack:1,bag:.5,bottle:1,can:1}};function e(a,b,c){if(!b||!c)return{conversionFactor:1,isValid:!1,error:"Unit not specified"};let e=a=>{let b=a.toLowerCase().trim();return"gm"===b?"g":"ml"===b?"ml":"pc"===b?"pc":b},f=e(b),g=e(c);if(f===g)return{conversionFactor:1,isValid:!0};let h=d[f];if(!h)return{conversionFactor:1,isValid:!1,error:`Unknown unit: ${b}`};let i=h[g];return void 0===i?{conversionFactor:1,isValid:!1,error:`Cannot convert from ${b} to ${c}`}:{conversionFactor:i,isValid:!0}}function f(a,b,c,d){let f=e(1,b,c);if(!f.isValid){let e=`${b}-${c}`;return g.has(e)||(console.warn(`Conversion failed for ${d}: ${f.error}`),g.add(e)),a}return a*f.conversionFactor}let g=new Set},26713:a=>{"use strict";a.exports=require("next/dist/shared/lib/router/utils/is-bot")},27910:a=>{"use strict";a.exports=require("stream")},28354:a=>{"use strict";a.exports=require("util")},29294:a=>{"use strict";a.exports=require("next/dist/server/app-render/work-async-storage.external.js")},29376:(a,b,c)=>{"use strict";function d(a){return a?a.toLowerCase().split(" ").map(a=>a.charAt(0).toUpperCase()+a.slice(1)).join(" "):""}function e(a){return a?a.toLowerCase().split(" ").map(a=>a.charAt(0).toUpperCase()+a.slice(1)).join(" "):""}function f(a){return a?a.toLowerCase().split(" ").map(a=>a.charAt(0).toUpperCase()+a.slice(1)).join(" "):""}function g(a){return a?a.toLowerCase().split(" ").map(a=>a.charAt(0).toUpperCase()+a.slice(1)).join(" "):""}function h(a){return a?a.toLowerCase().split(" ").map(a=>a.charAt(0).toUpperCase()+a.slice(1)).join(" "):""}function i(a){return a?a.toLowerCase().split(" ").map(a=>a.charAt(0).toUpperCase()+a.slice(1)).join(" "):""}function j(a){return a?a.toLowerCase().split(" ").map(a=>a.charAt(0).toUpperCase()+a.slice(1)).join(" "):""}c.d(b,{$m:()=>h,M$:()=>g,SC:()=>e,Ts:()=>i,_J:()=>d,xQ:()=>j,zl:()=>f})},33873:a=>{"use strict";a.exports=require("path")},39534:(a,b,c)=>{Promise.resolve().then(c.bind(c,76119))},41025:a=>{"use strict";a.exports=require("next/dist/server/app-render/dynamic-access-async-storage.external.js")},50597:(a,b,c)=>{"use strict";c.r(b),c.d(b,{GlobalError:()=>D.a,__next_app__:()=>J,handler:()=>L,pages:()=>I,routeModule:()=>K,tree:()=>H});var d=c(49754),e=c(9117),f=c(46595),g=c(32324),h=c(39326),i=c(38928),j=c(20175),k=c(12),l=c(54290),m=c(12696),n=c(82802),o=c(77533),p=c(45229),q=c(32822),r=c(261),s=c(26453),t=c(52474),u=c(26713),v=c(51356),w=c(62685),x=c(36225),y=c(63446),z=c(2762),A=c(45742),B=c(86439),C=c(81170),D=c.n(C),E=c(62506),F=c(91203),G={};for(let a in E)0>["default","tree","pages","GlobalError","__next_app__","routeModule","handler"].indexOf(a)&&(G[a]=()=>E[a]);c.d(b,G);let H={children:["",{children:["webapp",{children:["ingredients",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(c.bind(c,76119)),"/Users/danielkuschmierz/prepflow-landing/app/webapp/ingredients/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(c.bind(c,63611)),"/Users/danielkuschmierz/prepflow-landing/app/webapp/layout.tsx"],metadata:{icon:[async a=>(await Promise.resolve().then(c.bind(c,46055))).default(a)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(c.bind(c,16953)),"/Users/danielkuschmierz/prepflow-landing/app/layout.tsx"],"global-error":[()=>Promise.resolve().then(c.t.bind(c,81170,23)),"next/dist/client/components/builtin/global-error.js"],"not-found":[()=>Promise.resolve().then(c.t.bind(c,87028,23)),"next/dist/client/components/builtin/not-found.js"],forbidden:[()=>Promise.resolve().then(c.t.bind(c,90461,23)),"next/dist/client/components/builtin/forbidden.js"],unauthorized:[()=>Promise.resolve().then(c.t.bind(c,32768,23)),"next/dist/client/components/builtin/unauthorized.js"],metadata:{icon:[async a=>(await Promise.resolve().then(c.bind(c,46055))).default(a)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]}.children,I=["/Users/danielkuschmierz/prepflow-landing/app/webapp/ingredients/page.tsx"],J={require:c,loadChunk:()=>Promise.resolve()},K=new d.AppPageRouteModule({definition:{kind:e.RouteKind.APP_PAGE,page:"/webapp/ingredients/page",pathname:"/webapp/ingredients",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:H},distDir:".next",relativeProjectDir:""});async function L(a,b,d){var C;let G="/webapp/ingredients/page";"/index"===G&&(G="/");let M=(0,h.getRequestMeta)(a,"postponed"),N=(0,h.getRequestMeta)(a,"minimalMode"),O=await K.prepare(a,b,{srcPage:G,multiZoneDraftMode:!1});if(!O)return b.statusCode=400,b.end("Bad Request"),null==d.waitUntil||d.waitUntil.call(d,Promise.resolve()),null;let{buildId:P,query:Q,params:R,parsedUrl:S,pageIsDynamic:T,buildManifest:U,nextFontManifest:V,reactLoadableManifest:W,serverActionsManifest:X,clientReferenceManifest:Y,subresourceIntegrityManifest:Z,prerenderManifest:$,isDraftMode:_,resolvedPathname:aa,revalidateOnlyGenerated:ab,routerServerContext:ac,nextConfig:ad,interceptionRoutePatterns:ae}=O,af=S.pathname||"/",ag=(0,r.normalizeAppPath)(G),{isOnDemandRevalidate:ah}=O,ai=K.match(af,$),aj=!!$.routes[aa],ak=!!(ai||aj||$.routes[ag]),al=a.headers["user-agent"]||"",am=(0,u.getBotType)(al),an=(0,p.isHtmlBotRequest)(a),ao=(0,h.getRequestMeta)(a,"isPrefetchRSCRequest")??"1"===a.headers[t.NEXT_ROUTER_PREFETCH_HEADER],ap=(0,h.getRequestMeta)(a,"isRSCRequest")??!!a.headers[t.RSC_HEADER],aq=(0,s.getIsPossibleServerAction)(a),ar=(0,m.checkIsAppPPREnabled)(ad.experimental.ppr)&&(null==(C=$.routes[ag]??$.dynamicRoutes[ag])?void 0:C.renderingMode)==="PARTIALLY_STATIC",as=!1,at=!1,au=ar?M:void 0,av=ar&&ap&&!ao,aw=(0,h.getRequestMeta)(a,"segmentPrefetchRSCRequest"),ax=!al||(0,p.shouldServeStreamingMetadata)(al,ad.htmlLimitedBots);an&&ar&&(ak=!1,ax=!1);let ay=!0===K.isDev||!ak||"string"==typeof M||av,az=an&&ar,aA=null;_||!ak||ay||aq||au||av||(aA=aa);let aB=aA;!aB&&K.isDev&&(aB=aa),K.isDev||_||!ak||!ap||av||(0,k.d)(a.headers);let aC={...E,tree:H,pages:I,GlobalError:D(),handler:L,routeModule:K,__next_app__:J};X&&Y&&(0,o.setReferenceManifestsSingleton)({page:G,clientReferenceManifest:Y,serverActionsManifest:X,serverModuleMap:(0,q.createServerModuleMap)({serverActionsManifest:X})});let aD=a.method||"GET",aE=(0,g.getTracer)(),aF=aE.getActiveScopeSpan();try{let f=K.getVaryHeader(aa,ae);b.setHeader("Vary",f);let k=async(c,d)=>{let e=new l.NodeNextRequest(a),f=new l.NodeNextResponse(b);return K.render(e,f,d).finally(()=>{if(!c)return;c.setAttributes({"http.status_code":b.statusCode,"next.rsc":!1});let d=aE.getRootSpanAttributes();if(!d)return;if(d.get("next.span_type")!==i.BaseServerSpan.handleRequest)return void console.warn(`Unexpected root span type '${d.get("next.span_type")}'. Please report this Next.js issue https://github.com/vercel/next.js`);let e=d.get("next.route");if(e){let a=`${aD} ${e}`;c.setAttributes({"next.route":e,"http.route":e,"next.span_name":a}),c.updateName(a)}else c.updateName(`${aD} ${a.url}`)})},m=async({span:e,postponed:f,fallbackRouteParams:g})=>{let i={query:Q,params:R,page:ag,sharedContext:{buildId:P},serverComponentsHmrCache:(0,h.getRequestMeta)(a,"serverComponentsHmrCache"),fallbackRouteParams:g,renderOpts:{App:()=>null,Document:()=>null,pageConfig:{},ComponentMod:aC,Component:(0,j.T)(aC),params:R,routeModule:K,page:G,postponed:f,shouldWaitOnAllReady:az,serveStreamingMetadata:ax,supportsDynamicResponse:"string"==typeof f||ay,buildManifest:U,nextFontManifest:V,reactLoadableManifest:W,subresourceIntegrityManifest:Z,serverActionsManifest:X,clientReferenceManifest:Y,setIsrStatus:null==ac?void 0:ac.setIsrStatus,dir:c(33873).join(process.cwd(),K.relativeProjectDir),isDraftMode:_,isRevalidate:ak&&!f&&!av,botType:am,isOnDemandRevalidate:ah,isPossibleServerAction:aq,assetPrefix:ad.assetPrefix,nextConfigOutput:ad.output,crossOrigin:ad.crossOrigin,trailingSlash:ad.trailingSlash,previewProps:$.preview,deploymentId:ad.deploymentId,enableTainting:ad.experimental.taint,htmlLimitedBots:ad.htmlLimitedBots,devtoolSegmentExplorer:ad.experimental.devtoolSegmentExplorer,reactMaxHeadersLength:ad.reactMaxHeadersLength,multiZoneDraftMode:!1,incrementalCache:(0,h.getRequestMeta)(a,"incrementalCache"),cacheLifeProfiles:ad.experimental.cacheLife,basePath:ad.basePath,serverActions:ad.experimental.serverActions,...as?{nextExport:!0,supportsDynamicResponse:!1,isStaticGeneration:!0,isRevalidate:!0,isDebugDynamicAccesses:as}:{},experimental:{isRoutePPREnabled:ar,expireTime:ad.expireTime,staleTimes:ad.experimental.staleTimes,cacheComponents:!!ad.experimental.cacheComponents,clientSegmentCache:!!ad.experimental.clientSegmentCache,clientParamParsing:!!ad.experimental.clientParamParsing,dynamicOnHover:!!ad.experimental.dynamicOnHover,inlineCss:!!ad.experimental.inlineCss,authInterrupts:!!ad.experimental.authInterrupts,clientTraceMetadata:ad.experimental.clientTraceMetadata||[]},waitUntil:d.waitUntil,onClose:a=>{b.on("close",a)},onAfterTaskError:()=>{},onInstrumentationRequestError:(b,c,d)=>K.onRequestError(a,b,d,ac),err:(0,h.getRequestMeta)(a,"invokeError"),dev:K.isDev}},l=await k(e,i),{metadata:m}=l,{cacheControl:n,headers:o={},fetchTags:p}=m;if(p&&(o[y.NEXT_CACHE_TAGS_HEADER]=p),a.fetchMetrics=m.fetchMetrics,ak&&(null==n?void 0:n.revalidate)===0&&!K.isDev&&!ar){let a=m.staticBailoutInfo,b=Object.defineProperty(Error(`Page changed from static to dynamic at runtime ${aa}${(null==a?void 0:a.description)?`, reason: ${a.description}`:""}
see more here https://nextjs.org/docs/messages/app-static-to-dynamic-error`),"__NEXT_ERROR_CODE",{value:"E132",enumerable:!1,configurable:!0});if(null==a?void 0:a.stack){let c=a.stack;b.stack=b.message+c.substring(c.indexOf("\n"))}throw b}return{value:{kind:v.CachedRouteKind.APP_PAGE,html:l,headers:o,rscData:m.flightData,postponed:m.postponed,status:m.statusCode,segmentData:m.segmentData},cacheControl:n}},o=async({hasResolved:c,previousCacheEntry:f,isRevalidating:g,span:i})=>{let j,k=!1===K.isDev,l=c||b.writableEnded;if(ah&&ab&&!f&&!N)return(null==ac?void 0:ac.render404)?await ac.render404(a,b):(b.statusCode=404,b.end("This page could not be found")),null;if(ai&&(j=(0,w.parseFallbackField)(ai.fallback)),j===w.FallbackMode.PRERENDER&&(0,u.isBot)(al)&&(!ar||an)&&(j=w.FallbackMode.BLOCKING_STATIC_RENDER),(null==f?void 0:f.isStale)===-1&&(ah=!0),ah&&(j!==w.FallbackMode.NOT_FOUND||f)&&(j=w.FallbackMode.BLOCKING_STATIC_RENDER),!N&&j!==w.FallbackMode.BLOCKING_STATIC_RENDER&&aB&&!l&&!_&&T&&(k||!aj)){let b;if((k||ai)&&j===w.FallbackMode.NOT_FOUND)throw new B.NoFallbackError;if(ar&&!ap){let c="string"==typeof(null==ai?void 0:ai.fallback)?ai.fallback:k?ag:null;if(b=await K.handleResponse({cacheKey:c,req:a,nextConfig:ad,routeKind:e.RouteKind.APP_PAGE,isFallback:!0,prerenderManifest:$,isRoutePPREnabled:ar,responseGenerator:async()=>m({span:i,postponed:void 0,fallbackRouteParams:k||at?(0,n.u)(ag):null}),waitUntil:d.waitUntil}),null===b)return null;if(b)return delete b.cacheControl,b}}let o=ah||g||!au?void 0:au;if(as&&void 0!==o)return{cacheControl:{revalidate:1,expire:void 0},value:{kind:v.CachedRouteKind.PAGES,html:x.default.EMPTY,pageData:{},headers:void 0,status:void 0}};let p=T&&ar&&((0,h.getRequestMeta)(a,"renderFallbackShell")||at)?(0,n.u)(af):null;return m({span:i,postponed:o,fallbackRouteParams:p})},p=async c=>{var f,g,i,j,k;let l,n=await K.handleResponse({cacheKey:aA,responseGenerator:a=>o({span:c,...a}),routeKind:e.RouteKind.APP_PAGE,isOnDemandRevalidate:ah,isRoutePPREnabled:ar,req:a,nextConfig:ad,prerenderManifest:$,waitUntil:d.waitUntil});if(_&&b.setHeader("Cache-Control","private, no-cache, no-store, max-age=0, must-revalidate"),K.isDev&&b.setHeader("Cache-Control","no-store, must-revalidate"),!n){if(aA)throw Object.defineProperty(Error("invariant: cache entry required but not generated"),"__NEXT_ERROR_CODE",{value:"E62",enumerable:!1,configurable:!0});return null}if((null==(f=n.value)?void 0:f.kind)!==v.CachedRouteKind.APP_PAGE)throw Object.defineProperty(Error(`Invariant app-page handler received invalid cache entry ${null==(i=n.value)?void 0:i.kind}`),"__NEXT_ERROR_CODE",{value:"E707",enumerable:!1,configurable:!0});let p="string"==typeof n.value.postponed;ak&&!av&&(!p||ao)&&(N||b.setHeader("x-nextjs-cache",ah?"REVALIDATED":n.isMiss?"MISS":n.isStale?"STALE":"HIT"),b.setHeader(t.NEXT_IS_PRERENDER_HEADER,"1"));let{value:q}=n;if(au)l={revalidate:0,expire:void 0};else if(N&&ap&&!ao&&ar)l={revalidate:0,expire:void 0};else if(!K.isDev)if(_)l={revalidate:0,expire:void 0};else if(ak){if(n.cacheControl)if("number"==typeof n.cacheControl.revalidate){if(n.cacheControl.revalidate<1)throw Object.defineProperty(Error(`Invalid revalidate configuration provided: ${n.cacheControl.revalidate} < 1`),"__NEXT_ERROR_CODE",{value:"E22",enumerable:!1,configurable:!0});l={revalidate:n.cacheControl.revalidate,expire:(null==(j=n.cacheControl)?void 0:j.expire)??ad.expireTime}}else l={revalidate:y.CACHE_ONE_YEAR,expire:void 0}}else b.getHeader("Cache-Control")||(l={revalidate:0,expire:void 0});if(n.cacheControl=l,"string"==typeof aw&&(null==q?void 0:q.kind)===v.CachedRouteKind.APP_PAGE&&q.segmentData){b.setHeader(t.NEXT_DID_POSTPONE_HEADER,"2");let c=null==(k=q.headers)?void 0:k[y.NEXT_CACHE_TAGS_HEADER];N&&ak&&c&&"string"==typeof c&&b.setHeader(y.NEXT_CACHE_TAGS_HEADER,c);let d=q.segmentData.get(aw);return void 0!==d?(0,A.sendRenderResult)({req:a,res:b,generateEtags:ad.generateEtags,poweredByHeader:ad.poweredByHeader,result:x.default.fromStatic(d,t.RSC_CONTENT_TYPE_HEADER),cacheControl:n.cacheControl}):(b.statusCode=204,(0,A.sendRenderResult)({req:a,res:b,generateEtags:ad.generateEtags,poweredByHeader:ad.poweredByHeader,result:x.default.EMPTY,cacheControl:n.cacheControl}))}let r=(0,h.getRequestMeta)(a,"onCacheEntry");if(r&&await r({...n,value:{...n.value,kind:"PAGE"}},{url:(0,h.getRequestMeta)(a,"initURL")}))return null;if(p&&au)throw Object.defineProperty(Error("Invariant: postponed state should not be present on a resume request"),"__NEXT_ERROR_CODE",{value:"E396",enumerable:!1,configurable:!0});if(q.headers){let a={...q.headers};for(let[c,d]of(N&&ak||delete a[y.NEXT_CACHE_TAGS_HEADER],Object.entries(a)))if(void 0!==d)if(Array.isArray(d))for(let a of d)b.appendHeader(c,a);else"number"==typeof d&&(d=d.toString()),b.appendHeader(c,d)}let s=null==(g=q.headers)?void 0:g[y.NEXT_CACHE_TAGS_HEADER];if(N&&ak&&s&&"string"==typeof s&&b.setHeader(y.NEXT_CACHE_TAGS_HEADER,s),!q.status||ap&&ar||(b.statusCode=q.status),!N&&q.status&&F.RedirectStatusCode[q.status]&&ap&&(b.statusCode=200),p&&b.setHeader(t.NEXT_DID_POSTPONE_HEADER,"1"),ap&&!_){if(void 0===q.rscData){if(q.postponed)throw Object.defineProperty(Error("Invariant: Expected postponed to be undefined"),"__NEXT_ERROR_CODE",{value:"E372",enumerable:!1,configurable:!0});return(0,A.sendRenderResult)({req:a,res:b,generateEtags:ad.generateEtags,poweredByHeader:ad.poweredByHeader,result:q.html,cacheControl:av?{revalidate:0,expire:void 0}:n.cacheControl})}return(0,A.sendRenderResult)({req:a,res:b,generateEtags:ad.generateEtags,poweredByHeader:ad.poweredByHeader,result:x.default.fromStatic(q.rscData,t.RSC_CONTENT_TYPE_HEADER),cacheControl:n.cacheControl})}let u=q.html;if(!p||N||ap)return(0,A.sendRenderResult)({req:a,res:b,generateEtags:ad.generateEtags,poweredByHeader:ad.poweredByHeader,result:u,cacheControl:n.cacheControl});if(as)return u.push(new ReadableStream({start(a){a.enqueue(z.ENCODED_TAGS.CLOSED.BODY_AND_HTML),a.close()}})),(0,A.sendRenderResult)({req:a,res:b,generateEtags:ad.generateEtags,poweredByHeader:ad.poweredByHeader,result:u,cacheControl:{revalidate:0,expire:void 0}});let w=new TransformStream;return u.push(w.readable),m({span:c,postponed:q.postponed,fallbackRouteParams:null}).then(async a=>{var b,c;if(!a)throw Object.defineProperty(Error("Invariant: expected a result to be returned"),"__NEXT_ERROR_CODE",{value:"E463",enumerable:!1,configurable:!0});if((null==(b=a.value)?void 0:b.kind)!==v.CachedRouteKind.APP_PAGE)throw Object.defineProperty(Error(`Invariant: expected a page response, got ${null==(c=a.value)?void 0:c.kind}`),"__NEXT_ERROR_CODE",{value:"E305",enumerable:!1,configurable:!0});await a.value.html.pipeTo(w.writable)}).catch(a=>{w.writable.abort(a).catch(a=>{console.error("couldn't abort transformer",a)})}),(0,A.sendRenderResult)({req:a,res:b,generateEtags:ad.generateEtags,poweredByHeader:ad.poweredByHeader,result:u,cacheControl:{revalidate:0,expire:void 0}})};if(!aF)return await aE.withPropagatedContext(a.headers,()=>aE.trace(i.BaseServerSpan.handleRequest,{spanName:`${aD} ${a.url}`,kind:g.SpanKind.SERVER,attributes:{"http.method":aD,"http.target":a.url}},p));await p(aF)}catch(b){throw aF||b instanceof B.NoFallbackError||await K.onRequestError(a,b,{routerKind:"App Router",routePath:G,routeType:"render",revalidateReason:(0,f.c)({isRevalidate:ak,isOnDemandRevalidate:ah})},ac),b}}},55591:a=>{"use strict";a.exports=require("https")},59009:(a,b,c)=>{"use strict";c.d(b,{ND:()=>g});var d=c(28913);let e="https://dulkrqgjfohsuxhsmofo.supabase.co",f="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImR1bGtycWdqZm9oc3V4aHNtb2ZvIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTY5NzYwMDMsImV4cCI6MjA3MjU1MjAwM30.b_P98mAantymNfWy1Qz18SaR-LwrPjuaebO2Uj_5JK8";if(!e||!f)throw Error("Missing Supabase environment variables. Please check your .env.local file.");let g=(0,d.UU)(e,f);!function(){let a=process.env.SUPABASE_SERVICE_ROLE_KEY;if(!a)throw Error("Missing SUPABASE_SERVICE_ROLE_KEY environment variable.");if(!e)throw Error("Missing NEXT_PUBLIC_SUPABASE_URL environment variable.");(0,d.UU)(e,a)}()},63033:a=>{"use strict";a.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},74075:a=>{"use strict";a.exports=require("zlib")},76119:(a,b,c)=>{"use strict";c.r(b),c.d(b,{default:()=>d});let d=(0,c(97954).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/Users/danielkuschmierz/prepflow-landing/app/webapp/ingredients/page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/danielkuschmierz/prepflow-landing/app/webapp/ingredients/page.tsx","default")},79286:(a,b,c)=>{Promise.resolve().then(c.bind(c,9448))},79551:a=>{"use strict";a.exports=require("url")},81630:a=>{"use strict";a.exports=require("http")},86439:a=>{"use strict";a.exports=require("next/dist/shared/lib/no-fallback-error.external")},88572:(a,b,c)=>{"use strict";c.d(b,{JQ:()=>f,O0:()=>e});var d=c(21124);function e({variant:a="card",className:b="",count:c=1,height:e,width:f}){let g=`animate-pulse bg-[#2a2a2a] rounded-xl ${{card:"h-32",table:"h-64",chart:"h-80",list:"h-16",form:"h-96",stats:"h-24",text:"h-4",button:"h-10 w-24"}[a]} ${b}`,h={...e&&{height:e},...f&&{width:f}};return 1===c?(0,d.jsx)("div",{className:g,style:h}):(0,d.jsx)("div",{className:"space-y-4",children:Array.from({length:c}).map((a,b)=>(0,d.jsx)("div",{className:g,style:h},b))})}function f(){return(0,d.jsx)("div",{className:"min-h-screen bg-[#0a0a0a] p-4 sm:p-6",children:(0,d.jsxs)("div",{className:"max-w-7xl mx-auto",children:[(0,d.jsxs)("div",{className:"animate-pulse mb-8",children:[(0,d.jsx)("div",{className:"h-8 bg-[#2a2a2a] rounded-3xl w-1/3 mb-4"}),(0,d.jsx)("div",{className:"h-4 bg-[#2a2a2a] rounded-xl w-1/2"})]}),(0,d.jsxs)("div",{className:"flex gap-3 mb-8",children:[(0,d.jsx)("div",{className:"h-12 bg-[#2a2a2a] rounded-2xl w-32 animate-pulse"}),(0,d.jsx)("div",{className:"h-12 bg-[#2a2a2a] rounded-2xl w-40 animate-pulse"}),(0,d.jsx)("div",{className:"h-12 bg-[#2a2a2a] rounded-2xl w-28 animate-pulse"})]}),(0,d.jsx)("div",{className:"bg-[#1f1f1f] rounded-3xl shadow-lg border border-[#2a2a2a] p-6",children:(0,d.jsxs)("div",{className:"animate-pulse",children:[(0,d.jsx)("div",{className:"h-6 bg-[#2a2a2a] rounded-xl w-1/4 mb-6"}),(0,d.jsx)("div",{className:"space-y-4",children:[void 0,void 0,void 0,void 0,void 0].map((a,b)=>(0,d.jsx)("div",{className:"h-16 bg-[#2a2a2a] rounded-xl"},b))})]})})]})})}c(38301)}};var b=require("../../../webpack-runtime.js");b.C(a);var c=b.X(0,[4586,9707,3991,4515,8254,8913,9803,617,7767],()=>b(b.s=50597));module.exports=c})();