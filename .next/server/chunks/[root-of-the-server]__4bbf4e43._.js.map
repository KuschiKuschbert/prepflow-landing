{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 6, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"","debugId":null}},
    {"offset": {"line": 66, "column": 0}, "map": {"version":3,"sources":["file:///Users/danielkuschmierz/prepflow-landing/app/api/disable-rls/route.ts"],"sourcesContent":["import { NextRequest, NextResponse } from 'next/server';\n\nexport async function POST(request: NextRequest) {\n  try {\n    const supabaseUrl = process.env.NEXT_PUBLIC_SUPABASE_URL;\n    const serviceRoleKey = process.env.SUPABASE_SERVICE_ROLE_KEY;\n\n    if (!supabaseUrl || !serviceRoleKey) {\n      return NextResponse.json({\n        error: 'Missing Supabase configuration',\n        message: 'Please check your environment variables'\n      }, { status: 400 });\n    }\n\n    // Try to disable RLS using direct SQL execution\n    try {\n      const response = await fetch(`${supabaseUrl}/rest/v1/rpc/exec`, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n          'Authorization': `Bearer ${serviceRoleKey}`,\n          'apikey': serviceRoleKey\n        },\n        body: JSON.stringify({\n          sql: 'ALTER TABLE ingredients DISABLE ROW LEVEL SECURITY;'\n        })\n      });\n\n      const result = await response.json();\n\n      if (response.ok) {\n        return NextResponse.json({\n          success: true,\n          message: 'RLS disabled successfully on ingredients table!',\n          data: result\n        });\n      } else {\n        return NextResponse.json({\n          error: 'Failed to disable RLS',\n          message: 'Please disable RLS manually in Supabase dashboard',\n          instructions: `\n            1. Go to: https://supabase.com/dashboard/project/dulkrqgjfohsuxhsmofo\n            2. Navigate to: Database → Tables → ingredients\n            3. Click the 'Settings' tab\n            4. Toggle OFF 'Enable Row Level Security'\n            5. Click 'Save'\n          `,\n          errorDetails: result\n        }, { status: 400 });\n      }\n    } catch (fetchError) {\n      return NextResponse.json({\n        error: 'Could not disable RLS automatically',\n        message: 'Please disable RLS manually in Supabase dashboard',\n        instructions: `\n          1. Go to: https://supabase.com/dashboard/project/dulkrqgjfohsuxhsmofo\n          2. Navigate to: Database → Tables → ingredients\n          3. Click the 'Settings' tab\n          4. Toggle OFF 'Enable Row Level Security'\n          5. Click 'Save'\n        `,\n        errorDetails: fetchError instanceof Error ? fetchError.message : 'Unknown error'\n      }, { status: 400 });\n    }\n\n  } catch (err) {\n    console.error('Unexpected error:', err);\n    return NextResponse.json({\n      error: 'Internal server error',\n      details: err instanceof Error ? err.message : 'Unknown error'\n    }, { status: 500 });\n  }\n}\n"],"names":[],"mappings":";;;AAAA;;AAEO,eAAe,KAAK,OAAoB;IAC7C,IAAI;QACF,MAAM;QACN,MAAM,iBAAiB,QAAQ,GAAG,CAAC,yBAAyB;QAE5D,IAAI,CAAC,eAAe,CAAC,gBAAgB;YACnC,OAAO,gIAAA,CAAA,eAAY,CAAC,IAAI,CAAC;gBACvB,OAAO;gBACP,SAAS;YACX,GAAG;gBAAE,QAAQ;YAAI;QACnB;QAEA,gDAAgD;QAChD,IAAI;YACF,MAAM,WAAW,MAAM,MAAM,GAAG,YAAY,iBAAiB,CAAC,EAAE;gBAC9D,QAAQ;gBACR,SAAS;oBACP,gBAAgB;oBAChB,iBAAiB,CAAC,OAAO,EAAE,gBAAgB;oBAC3C,UAAU;gBACZ;gBACA,MAAM,KAAK,SAAS,CAAC;oBACnB,KAAK;gBACP;YACF;YAEA,MAAM,SAAS,MAAM,SAAS,IAAI;YAElC,IAAI,SAAS,EAAE,EAAE;gBACf,OAAO,gIAAA,CAAA,eAAY,CAAC,IAAI,CAAC;oBACvB,SAAS;oBACT,SAAS;oBACT,MAAM;gBACR;YACF,OAAO;gBACL,OAAO,gIAAA,CAAA,eAAY,CAAC,IAAI,CAAC;oBACvB,OAAO;oBACP,SAAS;oBACT,cAAc,CAAC;;;;;;UAMf,CAAC;oBACD,cAAc;gBAChB,GAAG;oBAAE,QAAQ;gBAAI;YACnB;QACF,EAAE,OAAO,YAAY;YACnB,OAAO,gIAAA,CAAA,eAAY,CAAC,IAAI,CAAC;gBACvB,OAAO;gBACP,SAAS;gBACT,cAAc,CAAC;;;;;;QAMf,CAAC;gBACD,cAAc,sBAAsB,QAAQ,WAAW,OAAO,GAAG;YACnE,GAAG;gBAAE,QAAQ;YAAI;QACnB;IAEF,EAAE,OAAO,KAAK;QACZ,QAAQ,KAAK,CAAC,qBAAqB;QACnC,OAAO,gIAAA,CAAA,eAAY,CAAC,IAAI,CAAC;YACvB,OAAO;YACP,SAAS,eAAe,QAAQ,IAAI,OAAO,GAAG;QAChD,GAAG;YAAE,QAAQ;QAAI;IACnB;AACF","debugId":null}}]
}