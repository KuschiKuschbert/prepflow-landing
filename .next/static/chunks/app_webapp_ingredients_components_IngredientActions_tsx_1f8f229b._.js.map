{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/danielkuschmierz/prepflow-landing/app/webapp/ingredients/components/IngredientActions.tsx"],"sourcesContent":["'use client';\n\nimport { useState } from 'react';\nimport { useTranslation } from '@/lib/useTranslation';\n\ninterface Ingredient {\n  id: string;\n  ingredient_name: string;\n  brand?: string;\n  pack_size?: string;\n  pack_size_unit?: string;\n  pack_price?: number;\n  unit?: string;\n  cost_per_unit: number;\n  cost_per_unit_as_purchased?: number;\n  cost_per_unit_incl_trim?: number;\n  trim_peel_waste_percentage?: number;\n  yield_percentage?: number;\n  supplier?: string;\n  product_code?: string;\n  storage_location?: string;\n  min_stock_level?: number;\n  current_stock?: number;\n  created_at?: string;\n  updated_at?: string;\n}\n\ninterface IngredientActionsProps {\n  selectedIngredients: Set<string>;\n  filteredIngredients: Ingredient[];\n  onAddIngredient: () => void;\n  onImportCSV: () => void;\n  onExportCSV: () => void;\n  onBulkDelete: (ids: string[]) => Promise<void>;\n  onBulkUpdate: (ids: string[], updates: Partial<Ingredient>) => Promise<void>;\n  loading?: boolean;\n}\n\nexport default function IngredientActions({\n  selectedIngredients,\n  filteredIngredients,\n  onAddIngredient,\n  onImportCSV,\n  onExportCSV,\n  onBulkDelete,\n  onBulkUpdate,\n  loading = false\n}: IngredientActionsProps) {\n  const { t } = useTranslation();\n  const [bulkActionLoading, setBulkActionLoading] = useState(false);\n  const [showBulkMenu, setShowBulkMenu] = useState(false);\n\n  const selectedCount = selectedIngredients.size;\n  const selectedIngredientsData = filteredIngredients.filter(ingredient => \n    selectedIngredients.has(ingredient.id)\n  );\n\n  const handleBulkDelete = async () => {\n    if (selectedCount === 0) return;\n    \n    const confirmMessage = `Are you sure you want to delete ${selectedCount} ingredient${selectedCount > 1 ? 's' : ''}?`;\n    if (!window.confirm(confirmMessage)) return;\n\n    setBulkActionLoading(true);\n    try {\n      await onBulkDelete(Array.from(selectedIngredients));\n    } finally {\n      setBulkActionLoading(false);\n      setShowBulkMenu(false);\n    }\n  };\n\n  const handleBulkUpdateSupplier = async () => {\n    if (selectedCount === 0) return;\n    \n    const newSupplier = window.prompt(`Enter new supplier for ${selectedCount} ingredient${selectedCount > 1 ? 's' : ''}:`);\n    if (!newSupplier?.trim()) return;\n\n    setBulkActionLoading(true);\n    try {\n      await onBulkUpdate(Array.from(selectedIngredients), { supplier: newSupplier.trim() });\n    } finally {\n      setBulkActionLoading(false);\n      setShowBulkMenu(false);\n    }\n  };\n\n  const handleBulkUpdateStorage = async () => {\n    if (selectedCount === 0) return;\n    \n    const newStorage = window.prompt(`Enter new storage location for ${selectedCount} ingredient${selectedCount > 1 ? 's' : ''}:`);\n    if (!newStorage?.trim()) return;\n\n    setBulkActionLoading(true);\n    try {\n      await onBulkUpdate(Array.from(selectedIngredients), { storage_location: newStorage.trim() });\n    } finally {\n      setBulkActionLoading(false);\n      setShowBulkMenu(false);\n    }\n  };\n\n  const handleBulkUpdateWastage = async () => {\n    if (selectedCount === 0) return;\n    \n    const wastageInput = window.prompt(`Enter wastage percentage (0-100) for ${selectedCount} ingredient${selectedCount > 1 ? 's' : ''}:`);\n    if (!wastageInput) return;\n    \n    const wastage = parseFloat(wastageInput);\n    if (isNaN(wastage) || wastage < 0 || wastage > 100) {\n      alert('Please enter a valid percentage between 0 and 100');\n      return;\n    }\n\n    setBulkActionLoading(true);\n    try {\n      await onBulkUpdate(Array.from(selectedIngredients), { \n        trim_peel_waste_percentage: wastage,\n        yield_percentage: 100 - wastage\n      });\n    } finally {\n      setBulkActionLoading(false);\n      setShowBulkMenu(false);\n    }\n  };\n\n  return (\n    <div className=\"flex flex-wrap gap-3 mb-6\">\n      {/* Primary Actions */}\n      <button\n        onClick={onAddIngredient}\n        className=\"bg-gradient-to-r from-[#29E7CD] to-[#D925C7] text-white px-4 py-2 rounded-lg hover:from-[#29E7CD]/80 hover:to-[#D925C7]/80 transition-all duration-200 shadow-lg hover:shadow-xl font-medium\"\n      >\n        + Add Ingredient\n      </button>\n      \n      <button\n        onClick={onImportCSV}\n        className=\"bg-gradient-to-r from-[#3B82F6] to-[#29E7CD] text-white px-4 py-2 rounded-lg hover:from-[#3B82F6]/80 hover:to-[#29E7CD]/80 transition-all duration-200 shadow-lg hover:shadow-xl font-medium\"\n      >\n        üìÅ Import CSV\n      </button>\n      \n      <button\n        onClick={onExportCSV}\n        className=\"bg-gradient-to-r from-[#D925C7] to-[#3B82F6] text-white px-4 py-2 rounded-lg hover:from-[#D925C7]/80 hover:to-[#3B82F6]/80 transition-all duration-200 shadow-lg hover:shadow-xl font-medium\"\n      >\n        üì§ Export CSV\n      </button>\n\n      {/* Bulk Actions */}\n      {selectedCount > 0 && (\n        <div className=\"relative\">\n          <button\n            onClick={() => setShowBulkMenu(!showBulkMenu)}\n            className=\"bg-gradient-to-r from-orange-500 to-red-500 text-white px-4 py-2 rounded-lg hover:from-orange-500/80 hover:to-red-500/80 transition-all duration-200 shadow-lg hover:shadow-xl font-medium\"\n          >\n            ‚ö° Bulk Actions ({selectedCount})\n          </button>\n\n          {showBulkMenu && (\n            <div className=\"absolute top-full left-0 mt-2 w-64 bg-[#1f1f1f] border border-[#2a2a2a] rounded-lg shadow-xl z-10\">\n              <div className=\"p-2\">\n                <div className=\"text-xs text-gray-400 px-3 py-2 border-b border-[#2a2a2a]\">\n                  {selectedCount} ingredient{selectedCount > 1 ? 's' : ''} selected\n                </div>\n                \n                <div className=\"space-y-1 mt-2\">\n                  <button\n                    onClick={handleBulkDelete}\n                    disabled={bulkActionLoading}\n                    className=\"w-full text-left px-3 py-2 text-red-400 hover:bg-red-500/10 rounded transition-colors disabled:opacity-50\"\n                  >\n                    üóëÔ∏è Delete Selected\n                  </button>\n                  \n                  <button\n                    onClick={handleBulkUpdateSupplier}\n                    disabled={bulkActionLoading}\n                    className=\"w-full text-left px-3 py-2 text-gray-300 hover:bg-[#2a2a2a] rounded transition-colors disabled:opacity-50\"\n                  >\n                    üè™ Update Supplier\n                  </button>\n                  \n                  <button\n                    onClick={handleBulkUpdateStorage}\n                    disabled={bulkActionLoading}\n                    className=\"w-full text-left px-3 py-2 text-gray-300 hover:bg-[#2a2a2a] rounded transition-colors disabled:opacity-50\"\n                  >\n                    üìç Update Storage Location\n                  </button>\n                  \n                  <button\n                    onClick={handleBulkUpdateWastage}\n                    disabled={bulkActionLoading}\n                    className=\"w-full text-left px-3 py-2 text-gray-300 hover:bg-[#2a2a2a] rounded transition-colors disabled:opacity-50\"\n                  >\n                    üéØ Update Wastage %\n                  </button>\n                </div>\n              </div>\n            </div>\n          )}\n        </div>\n      )}\n\n      {/* Loading Indicator */}\n      {(loading || bulkActionLoading) && (\n        <div className=\"flex items-center gap-2 text-gray-400\">\n          <div className=\"w-4 h-4 border-2 border-[#29E7CD] border-t-transparent rounded-full animate-spin\"></div>\n          <span className=\"text-sm\">\n            {bulkActionLoading ? 'Processing...' : 'Loading...'}\n          </span>\n        </div>\n      )}\n\n      {/* Selected Items Summary */}\n      {selectedCount > 0 && (\n        <div className=\"flex items-center gap-2 text-sm text-gray-400\">\n          <span>Selected:</span>\n          <span className=\"text-[#29E7CD] font-medium\">{selectedCount}</span>\n          <span>of</span>\n          <span className=\"text-white font-medium\">{filteredIngredients.length}</span>\n        </div>\n      )}\n    </div>\n  );\n}\n"],"names":[],"mappings":"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","debugId":null}}]
}