(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9247],{3272:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>o});var i=s(5155),r=s(9269),n=s(2115),a=s(147),l=s(8081);function o(){let[e,t]=(0,n.useState)([]),[s,o]=(0,n.useState)([]),[d,c]=(0,n.useState)(""),[m,x]=(0,n.useState)([]),[u,g]=(0,n.useState)([]),[h,p]=(0,n.useState)(!0),[f,v]=(0,n.useState)(null),[b,j]=(0,n.useState)(null),[N,y]=(0,n.useState)(!1),[w,C]=(0,n.useState)(null),[k,D]=(0,n.useState)(!1),[_,E]=(0,n.useState)(!1),[L,S]=(0,n.useState)(null),[q,F]=(0,n.useState)(0),[I,A]=(0,n.useState)(""),[B,M]=(0,n.useState)(1),[G,P]=(0,n.useState)(""),[R,T]=(0,n.useState)(!1),[W,z]=(0,n.useState)(null),[$,U]=(0,n.useState)({ingredient_id:"",quantity:0,unit:"kg"}),[O,H]=(0,n.useState)(70),[V,Q]=(0,n.useState)(0),[K,J]=(0,n.useState)(0),[Y,X]=(0,n.useState)("charm");(0,n.useEffect)(()=>{Z()},[]),(0,n.useEffect)(()=>{let e=sessionStorage.getItem("editingRecipe");if(e)try{let{recipe:t,recipeId:s,calculations:i,dishName:r,dishPortions:n,dishNameLocked:a}=JSON.parse(e);console.log("\uD83D\uDD0D DEBUG: Loading from sessionStorage with recipeId:",{dishName:r,recipeId:s,calculationsCount:i.length}),A(r),M(n),E(a),g(i);let l=i.map(e=>({recipe_id:e.recipeId,ingredient_id:e.ingredientId,quantity:e.quantity,unit:e.unit}));x(l),C(!0),sessionStorage.removeItem("editingRecipe"),j('Recipe "'.concat(r,'" loaded for editing!')),setTimeout(()=>j(null),3e3)}catch(e){console.log("Failed to parse editing data:",e)}},[]),(0,n.useEffect)(()=>{d&&ee()},[d]),(0,n.useEffect)(()=>{let e=e=>{let t=e.target;t.closest(".ingredient-search-container")||t.closest(".suggestions-dropdown")||T(!1)};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[]);let Z=async()=>{try{let{data:e,error:s}=await r.ND.from("ingredients").select("*").order("ingredient_name"),{data:i,error:n}=await r.ND.from("recipes").select("*").order("name");s?(console.log("Ingredients table not found or empty:",s.message),t([])):(console.log("Ingredients fetched:",(null==e?void 0:e.length)||0,"items"),t(e||[])),n?(console.log("Recipes table not found or empty:",n.message),o([])):o(i||[])}catch(e){v("Failed to fetch data")}finally{p(!1)}},ee=async()=>{if(d)try{let{data:e,error:t}=await r.ND.from("recipe_ingredients").select("*").eq("recipe_id",d);t?v(t.message):(x(e||[]),et(e||[]))}catch(e){v("Failed to fetch recipe ingredients")}},et=t=>{g(t.map(t=>{let s=e.find(e=>e.id===t.ingredient_id);if(!s)return null;let i=s.cost_per_unit_incl_trim||s.cost_per_unit||0,r=(0,a.mT)(i,s.unit||"g",t.unit||"g",s.ingredient_name),n=t.quantity*r,l=s.trim_peel_waste_percentage||0,o=s.yield_percentage||100,d=n;!s.cost_per_unit_incl_trim&&l>0&&(d=n/(1-l/100));let c=o/100*d;return console.log("COGS Calculation for ".concat(s.ingredient_name,":"),{quantity:t.quantity,unit:t.unit||s.unit,costPerUnit:r,totalCost:n,wastePercent:l,yieldPercent:o,wasteAdjustedCost:d,yieldAdjustedCost:c,hasInclTrim:!!s.cost_per_unit_incl_trim}),{recipeId:t.recipe_id||"temp",ingredientId:t.ingredient_id,ingredientName:s.ingredient_name,quantity:t.quantity,unit:t.unit||s.unit||"kg",costPerUnit:r,totalCost:n,wasteAdjustedCost:d,yieldAdjustedCost:c}}).filter(Boolean))},es=async e=>{try{console.log("Loading ingredients for recipe:",e);let{data:t,error:s}=await r.ND.from("recipe_ingredients").select("\n          id,\n          quantity,\n          unit,\n          ingredients (\n            id,\n            ingredient_name,\n            cost_per_unit,\n            unit,\n            trim_peel_waste_percentage,\n            yield_percentage\n          )\n        ").eq("recipe_id",e);if(s)return void console.log("Error loading recipe ingredients:",s);console.log("Loaded recipe ingredients:",t);let i=t.map(t=>{let s=t.ingredients,i=t.quantity,r=s.cost_per_unit,n=(0,a.mT)(r,s.unit||"g",t.unit||"g",s.ingredient_name),l=i*n,o=s.trim_peel_waste_percentage||0,d=s.yield_percentage||100,c=l*(1+o/100);return{recipeId:e,ingredientId:s.id,ingredientName:s.ingredient_name,quantity:i,unit:t.unit,costPerUnit:n,totalCost:l,wasteAdjustedCost:c,yieldAdjustedCost:c/(d/100)}});console.log("Converted to calculations:",i),g(i);let n=t.map(t=>({recipe_id:e,ingredient_id:t.ingredients.id,quantity:t.quantity,unit:t.unit}));x(n);let{data:l}=await r.ND.from("recipes").select("yield").eq("id",e).single();l&&M(l.yield||1)}catch(e){console.log("Error in loadExistingRecipeIngredients:",e)}},ei=async e=>{if(!e.trim())return void C(null);D(!0);try{console.log("Checking for recipe:",e.trim());let{data:t,error:s}=await r.ND.from("recipes").select("id, name").ilike("name",e.trim()),i=t&&t.length>0?t[0]:null;console.log("Recipe check result:",{existingRecipe:i,error:s}),s&&"PGRST116"===s.code?(console.log("Recipe not found - PGRST116 error"),C(!1)):i?(console.log("Recipe found:",i),C(!0),await es(i.id)):(console.log("Recipe not found - no data returned"),C(!1))}catch(e){console.log("Error checking recipe:",e),C(null)}finally{D(!1)}};(0,n.useEffect)(()=>{let e=setTimeout(()=>{I.trim()&&!_?(console.log("\uD83D\uDD0D DEBUG: Running recipe check for:",I),ei(I)):I.trim()?console.log("\uD83D\uDD0D DEBUG: Skipping recipe check - dish name locked (editing from recipe book)"):C(null)},500);return()=>clearTimeout(e)},[I,_]);let er=(e,t)=>{S(e),F(t)},en=()=>{L&&q>0&&g(t=>t.map(t=>{if(t.ingredientId===L){let s=e.find(e=>e.id===L);if(s){let e=q*t.costPerUnit,i=s.trim_peel_waste_percentage||0,r=s.yield_percentage||100,n=e*(1+i/100);return{...t,quantity:q,totalCost:e,wasteAdjustedCost:n,yieldAdjustedCost:n/(r/100)}}}return t})),S(null),F(0)},ea=()=>{S(null),F(0)},el=e=>{g(t=>t.filter(t=>t.ingredientId!==e))},eo=l.xQ,ed=async()=>{if(0===u.length)return void v("No calculations to save. Please calculate COGS first.");let e=I||prompt("Enter a name for this recipe:");if(!e)return;let t=eo(e);try{let e,{data:s,error:i}=await r.ND.from("recipes").select("id, name").ilike("name",t);console.log("Recipe check results:",{existingRecipes:s,checkError:i,recipeName:t});let n=s&&s.length>0?s[0]:null;if(console.log("Existing recipe found:",n),n&&!i){let{data:t,error:s}=await r.ND.from("recipes").update({yield:B||1,yield_unit:"servings",updated_at:new Date().toISOString()}).eq("id",n.id).select().single();if(s)return void v(s.message);e=t}else{let{data:s,error:i}=await r.ND.from("recipes").insert({name:t,yield:B||1,yield_unit:"servings"}).select().single();if(i)return void v(i.message);e=s}let a=u.map(t=>({recipe_id:e.id,ingredient_id:t.ingredientId,quantity:t.quantity,unit:t.unit}));if(n&&!i){let{error:e}=await r.ND.from("recipe_ingredients").delete().eq("recipe_id",n.id);if(e)return void v(e.message);let{error:t}=await r.ND.from("recipe_ingredients").insert(a);if(t)return void v(t.message)}else{let{error:e}=await r.ND.from("recipe_ingredients").insert(a);if(e)return void v(e.message)}v(null);let l=n&&!i?"updated":"saved";j('Recipe "'.concat(t,'" ').concat(l," successfully to Recipe Book!")),E(!1),setTimeout(()=>j(null),5e3);try{await Z()}catch(e){console.log("Failed to refresh recipes list:",e)}}catch(e){console.log("Recipe save error:",e),v("Failed to save recipe"),j(null),E(!1)}},ec=e=>{P(e),T(e.length>0),z(null),U({...$,ingredient_id:""})},em=async t=>{if(t.preventDefault(),!$.ingredient_id||!$.quantity)return void v("Please select an ingredient and enter a quantity");try{if(m.find(e=>e.ingredient_id===$.ingredient_id)){let t=e.find(e=>e.id===$.ingredient_id);if(t){let e=$.quantity,s=($.unit,""),i=($.unit||"kg").toLowerCase().trim(),r=(t.unit||"kg").toLowerCase().trim(),n=["tsp","teaspoon","tbsp","tablespoon","cup","cups","ml","milliliter","l","liter","litre","fl oz","fluid ounce"],l=["g","gm","gram","grams","kg","kilogram","oz","ounce","lb","pound","mg","milligram"],o=n.includes(i),d=l.includes(i),c=n.includes(r),m=l.includes(r);if(o&&m||d&&c){let i=(0,a.oU)($.quantity,$.unit||"kg",t.unit||"kg",t.ingredient_name);e=i.convertedValue,i.convertedUnit,s=" (converted from ".concat($.quantity," ").concat($.unit||"kg",")")}x(t=>t.map(t=>t.ingredient_id===$.ingredient_id?{...t,quantity:t.quantity+e}:t)),g(t=>t.map(t=>{if(t.ingredientId===$.ingredient_id){let i=t.quantity+e,r=i*t.costPerUnit,n=r*(1+(t.wasteAdjustedCost/t.totalCost-1)),a=n/(t.yieldAdjustedCost/t.wasteAdjustedCost);return{...t,ingredientName:t.ingredientName.includes("(converted from")?t.ingredientName:t.ingredientName+s,quantity:i,totalCost:r,wasteAdjustedCost:n,yieldAdjustedCost:a}}return t}))}}else{let t=e.find(e=>e.id===$.ingredient_id);if(t){let e=$.quantity,s=$.unit||"kg",i="",r=($.unit||"kg").toLowerCase().trim(),n=(t.unit||"kg").toLowerCase().trim(),l=["tsp","teaspoon","tbsp","tablespoon","cup","cups","ml","milliliter","l","liter","litre","fl oz","fluid ounce"],o=["g","gm","gram","grams","kg","kilogram","oz","ounce","lb","pound","mg","milligram"],c=l.includes(r),m=o.includes(r),u=l.includes(n),h=o.includes(n);if(c&&h||m&&u){let r=(0,a.oU)($.quantity,$.unit||"kg",t.unit||"kg",t.ingredient_name);e=r.convertedValue,s=r.convertedUnit,i=" (converted from ".concat($.quantity," ").concat($.unit||"kg",")")}let p={recipe_id:d||"temp",ingredient_id:$.ingredient_id,quantity:e,unit:s};x(e=>[...e,p]);let f=e,v=t.cost_per_unit,b=(0,a.mT)(v,t.unit||"g",s,t.ingredient_name),j=f*b,N=t.trim_peel_waste_percentage||0,y=t.yield_percentage||100,w=j*(1+N/100),C={recipeId:d||"temp",ingredientId:$.ingredient_id,ingredientName:t.ingredient_name+i,quantity:f,unit:s,costPerUnit:b,totalCost:j,wasteAdjustedCost:w,yieldAdjustedCost:w/(y/100)};g(e=>[...e,C])}}U({ingredient_id:"",quantity:0,unit:"kg"}),P(""),z(null),T(!1)}catch(e){v("Failed to add ingredient")}},ex=u.reduce((e,t)=>e+t.yieldAdjustedCost,0),eu=B>0?ex/B:0;(0,n.useEffect)(()=>{if(eu>0){let e=((e,t)=>{let s=e/(1-t/100),i=s+.1*s,r=i;switch(Y){case"charm":r=Math.ceil(i)-.01;break;case"whole":r=Math.ceil(i);break;case"real":r=i}let n=r/1.1,a=r-n,l=n-e;return{sellPriceExclGST:n,sellPriceInclGST:r,gstAmount:a,actualGrossProfit:(n-e)/n*100,grossProfitDollar:n-e,contributingMargin:l,contributingMarginPercent:l/n*100}})(eu,O);Q(e.sellPriceExclGST),J(e.sellPriceInclGST)}},[eu,O,Y]);let eg=(0,n.useMemo)(()=>{if(console.log("Filtering ingredients:",e.length,"total, search:",G),!G.trim()){let t=e.slice(0,50);return console.log("No search term, returning first 50:",t.length),t}let t=G.toLowerCase().trim(),s=e.filter(e=>e.ingredient_name.toLowerCase().includes(t)||e.unit&&e.unit.toLowerCase().includes(t)).sort((e,s)=>{let i=e.ingredient_name.toLowerCase(),r=s.ingredient_name.toLowerCase();return i.startsWith(t)&&!r.startsWith(t)?-1:!i.startsWith(t)&&r.startsWith(t)?1:i===t&&r!==t?-1:i!==t&&r===t?1:i.localeCompare(r)}).slice(0,20);return console.log("Search results:",s.length,"matches for",t),s},[e,G]);return((0,n.useEffect)(()=>{console.log("Suggestions state:",{showSuggestions:R,ingredientSearch:G,filteredIngredientsCount:eg.length,ingredientsCount:e.length})},[R,G,eg.length,e.length]),h)?(0,i.jsx)("div",{className:"min-h-screen bg-[#0a0a0a] p-4 sm:p-6",children:(0,i.jsx)("div",{className:"max-w-7xl mx-auto",children:(0,i.jsxs)("div",{className:"animate-pulse",children:[(0,i.jsx)("div",{className:"h-8 bg-[#2a2a2a] rounded-3xl w-1/2 mb-8"}),(0,i.jsx)("div",{className:"space-y-4",children:[void 0,void 0,void 0].map((e,t)=>(0,i.jsxs)("div",{className:"bg-[#1f1f1f] p-6 rounded-3xl shadow-lg border border-[#2a2a2a]",children:[(0,i.jsx)("div",{className:"h-4 bg-[#2a2a2a] rounded-xl w-3/4 mb-3"}),(0,i.jsx)("div",{className:"h-3 bg-[#2a2a2a] rounded-xl w-1/2"})]},t))})]})})}):(0,i.jsx)("div",{className:"min-h-screen bg-[#0a0a0a] p-4 sm:p-6",children:(0,i.jsxs)("div",{className:"max-w-7xl mx-auto",children:[(0,i.jsxs)("div",{className:"mb-8",children:[(0,i.jsx)("h1",{className:"text-4xl font-bold text-white mb-2",children:"\uD83D\uDCB0 COGS Calculator"}),(0,i.jsx)("p",{className:"text-gray-400",children:"Calculate Cost of Goods Sold and optimize your profit margins"})]}),f&&(0,i.jsx)("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded mb-6",children:f}),b&&(0,i.jsx)("div",{className:"bg-gradient-to-r from-green-500 to-emerald-500 border-2 border-green-400 text-white px-6 py-5 rounded-2xl mb-6 shadow-2xl animate-in slide-in-from-top-2 duration-500 transform scale-105 hover:scale-110 transition-all duration-300",children:(0,i.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,i.jsx)("div",{className:"flex-shrink-0",children:(0,i.jsx)("div",{className:"w-10 h-10 bg-white/20 backdrop-blur-sm rounded-full flex items-center justify-center animate-pulse",children:(0,i.jsx)("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,i.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:3,d:"M5 13l4 4L19 7"})})})}),(0,i.jsxs)("div",{className:"flex-1",children:[(0,i.jsx)("p",{className:"font-bold text-lg text-white",children:b}),(0,i.jsx)("p",{className:"text-sm text-green-100 mt-1 font-medium",children:"\uD83C\uDF89 Your recipe has been added to the Recipe Book and is ready to use!"})]}),(0,i.jsx)("button",{onClick:()=>j(null),className:"flex-shrink-0 text-white/80 hover:text-white hover:bg-white/20 rounded-full p-2 transition-all duration-200",children:(0,i.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,i.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})}),(0,i.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4 sm:gap-8",children:[(0,i.jsxs)("div",{className:"bg-[#1f1f1f] p-4 sm:p-6 rounded-lg shadow",children:[(0,i.jsx)("h2",{className:"text-lg sm:text-xl font-semibold mb-6",children:"Create Dish"}),(0,i.jsxs)("div",{className:"mb-6",children:[(0,i.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"\uD83C\uDF7D️ Dish Name"}),(0,i.jsxs)("div",{className:"relative",children:[(0,i.jsx)("input",{type:"text",placeholder:"Enter dish name (e.g., Chicken Curry)",value:I,onChange:e=>A(eo(e.target.value)),disabled:_,className:"w-full px-4 py-3 border rounded-xl focus:outline-none focus:ring-2 transition-all duration-200 shadow-sm hover:shadow-md ".concat(_?"border-blue-400 bg-[#1a1a1a] text-gray-300 cursor-not-allowed":!0===w?"border-orange-400 bg-[#0a0a0a] text-white focus:ring-orange-400 focus:border-orange-400":!1===w?"border-green-400 bg-[#0a0a0a] text-white focus:ring-green-400 focus:border-green-400":"border-[#2a2a2a] bg-[#0a0a0a] text-white focus:ring-[#29E7CD] focus:border-[#29E7CD]")}),_&&(0,i.jsx)("div",{className:"absolute right-3 top-1/2 transform -translate-y-1/2",children:(0,i.jsx)("svg",{className:"w-5 h-5 text-blue-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,i.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})})})]}),I.trim()&&(0,i.jsx)("div",{className:"mt-2 flex items-center space-x-2",children:k?(0,i.jsxs)("div",{className:"flex items-center space-x-2 text-gray-400",children:[(0,i.jsx)("div",{className:"w-4 h-4 border-2 border-gray-400 border-t-transparent rounded-full animate-spin"}),(0,i.jsx)("span",{className:"text-sm",children:"Checking..."})]}):!0===w?(0,i.jsxs)("div",{className:"flex items-center space-x-2 text-orange-400",children:[(0,i.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,i.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})}),(0,i.jsx)("span",{className:"text-sm font-medium",children:"⚠️ Recipe exists - ingredients loaded, will update existing recipe"})]}):!1===w?(0,i.jsxs)("div",{className:"flex items-center space-x-2 text-green-400",children:[(0,i.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,i.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),(0,i.jsx)("span",{className:"text-sm font-medium",children:"✅ New recipe - will create new recipe"})]}):null}),_&&(0,i.jsxs)("div",{className:"mt-2 flex items-center space-x-2 text-blue-400",children:[(0,i.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,i.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})}),(0,i.jsx)("span",{className:"text-sm font-medium",children:"\uD83D\uDD12 Dish name locked - editing ingredients"})]})]}),(0,i.jsxs)("div",{className:"mb-6",children:[(0,i.jsxs)("div",{className:"bg-gradient-to-r from-[#29E7CD]/10 to-[#D925C7]/10 border border-[#29E7CD]/30 p-4 rounded-2xl",children:[(0,i.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("h3",{className:"text-xl font-semibold text-white mb-1",children:"\uD83E\uDD58 Add Ingredients"}),(0,i.jsx)("p",{className:"text-sm text-gray-400",children:"Add ingredients manually to build your dish"}),(0,i.jsx)("p",{className:"text-xs text-[#29E7CD] mt-1",children:"✨ Automatic unit conversion: Use any unit (tsp, tbsp, cups, ml, g, kg) - we'll convert to the ingredient's base unit!"})]}),(0,i.jsxs)("button",{onClick:()=>{y(!N),!N&&I.trim()&&E(!0),N&&E(!1)},className:"bg-gradient-to-r from-[#29E7CD] to-[#D925C7] text-white px-6 py-3 rounded-xl text-sm font-medium hover:from-[#29E7CD]/80 hover:to-[#D925C7]/80 transition-all duration-200 shadow-lg hover:shadow-xl flex items-center space-x-2",children:[(0,i.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,i.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),(0,i.jsx)("span",{children:N?"Cancel":"Add Ingredient"})]})]}),N&&(0,i.jsxs)("form",{onSubmit:em,className:"space-y-3 p-4 bg-[#0a0a0a] border border-[#2a2a2a] rounded-lg",children:[(0,i.jsxs)("div",{className:"relative ingredient-search-container",children:[(0,i.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"\uD83D\uDD0D Search & Select Ingredient"}),(0,i.jsxs)("div",{className:"relative",children:[(0,i.jsx)("input",{type:"text",placeholder:"Type to search ingredients...",value:G,onChange:e=>ec(e.target.value),onFocus:()=>T(G.length>0),className:"w-full max-w-md pl-10 pr-4 py-3 border border-[#2a2a2a] bg-[#0a0a0a] text-white rounded-xl focus:outline-none focus:ring-2 focus:ring-[#29E7CD] focus:border-[#29E7CD] transition-all duration-200 shadow-sm hover:shadow-md"}),(0,i.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:(0,i.jsx)("svg",{className:"h-5 w-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,i.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})}),G&&(0,i.jsx)("button",{onClick:()=>ec(""),className:"absolute inset-y-0 right-0 pr-3 flex items-center text-gray-400 hover:text-white transition-colors",children:(0,i.jsx)("svg",{className:"h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,i.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),G&&(0,i.jsxs)("div",{className:"mt-2 text-xs text-gray-400",children:[eg.length," ingredient",1!==eg.length?"s":""," found"]})]}),R&&eg.length>0&&(0,i.jsx)("div",{className:"absolute z-10 w-full max-w-md mt-1 bg-[#1f1f1f] border border-[#2a2a2a] rounded-xl shadow-lg max-h-60 overflow-y-auto suggestions-dropdown",children:eg.slice(0,10).map(e=>{let t=e.cost_per_unit_incl_trim||e.cost_per_unit||0;return(0,i.jsx)("button",{type:"button",onClick:t=>{t.preventDefault(),t.stopPropagation(),console.log("Button clicked for:",e.ingredient_name),console.log("Ingredient selected:",e.ingredient_name),z(e),U({...$,ingredient_id:e.id,unit:e.unit||"kg"}),P(e.ingredient_name),T(!1)},className:"w-full px-4 py-3 text-left hover:bg-[#2a2a2a] transition-colors border-b border-[#2a2a2a] last:border-b-0",children:(0,i.jsxs)("div",{className:"flex justify-between items-center",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("div",{className:"text-white font-medium",children:e.ingredient_name}),(0,i.jsxs)("div",{className:"text-xs text-gray-400",children:[e.unit&&"".concat(e.unit," • "),"$",t.toFixed(2),"/",e.unit||"unit"]})]}),(0,i.jsx)("div",{className:"text-[#29E7CD] text-sm",children:e.trim_peel_waste_percentage?"".concat(e.trim_peel_waste_percentage,"% waste"):"No waste"})]})},e.id)})}),R&&0===eg.length&&G&&(0,i.jsxs)("div",{className:"absolute z-10 w-full mt-1 p-3 bg-[#1f1f1f] border border-[#2a2a2a] rounded-xl shadow-lg",children:[(0,i.jsxs)("p",{className:"text-sm text-gray-400 text-center",children:['\uD83D\uDD0D No ingredients found matching "',G,'"']}),(0,i.jsx)("p",{className:"text-xs text-gray-500 text-center mt-1",children:"Try a different search term or add the ingredient to your list first"})]}),W&&(0,i.jsx)("div",{className:"mt-2 p-3 bg-[#29E7CD]/10 border border-[#29E7CD]/20 rounded-lg",children:(0,i.jsxs)("div",{className:"flex justify-between items-center",children:[(0,i.jsxs)("div",{children:[(0,i.jsxs)("div",{className:"text-[#29E7CD] font-medium",children:["✓ ",W.ingredient_name]}),(0,i.jsxs)("div",{className:"text-xs text-gray-400",children:["$",(W.cost_per_unit_incl_trim||W.cost_per_unit||0).toFixed(2),"/",W.unit||"unit"]})]}),(0,i.jsx)("button",{type:"button",onClick:()=>ec(""),className:"text-gray-400 hover:text-white transition-colors",children:(0,i.jsx)("svg",{className:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,i.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})}),(0,i.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"⚖️ Quantity"}),(0,i.jsx)("input",{type:"number",step:"0.01",min:"0",required:!0,value:$.quantity,onChange:e=>U({...$,quantity:parseFloat(e.target.value)}),onFocus:e=>{0===$.quantity&&e.target.select()},className:"w-full px-4 py-3 border border-[#2a2a2a] bg-[#0a0a0a] text-white rounded-xl focus:outline-none focus:ring-2 focus:ring-[#29E7CD] focus:border-[#29E7CD] transition-all duration-200 shadow-sm hover:shadow-md",placeholder:"0.00"})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"\uD83D\uDCCF Unit"}),(0,i.jsxs)("div",{className:"relative",children:[(0,i.jsxs)("select",{value:$.unit,onChange:e=>U({...$,unit:e.target.value}),className:"w-full px-4 py-3 border border-[#2a2a2a] bg-[#0a0a0a] text-white rounded-xl focus:outline-none focus:ring-2 focus:ring-[#29E7CD] focus:border-[#29E7CD] transition-all duration-200 shadow-sm hover:shadow-md appearance-none cursor-pointer",children:[(0,i.jsx)("option",{value:"kg",children:"kg"}),(0,i.jsx)("option",{value:"g",children:"g"}),(0,i.jsx)("option",{value:"L",children:"L"}),(0,i.jsx)("option",{value:"mL",children:"mL"}),(0,i.jsx)("option",{value:"pcs",children:"pcs"}),(0,i.jsx)("option",{value:"box",children:"box"}),(0,i.jsx)("option",{value:"GM",children:"GM"}),(0,i.jsx)("option",{value:"PC",children:"PC"}),(0,i.jsx)("option",{value:"PACK",children:"PACK"}),(0,i.jsx)("option",{value:"BAG",children:"BAG"})]}),(0,i.jsx)("div",{className:"absolute inset-y-0 right-0 pr-3 flex items-center pointer-events-none",children:(0,i.jsx)("svg",{className:"h-5 w-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,i.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})})]})]})]}),(0,i.jsxs)("button",{type:"submit",className:"w-full bg-gradient-to-r from-[#29E7CD] to-[#3B82F6] text-white px-6 py-3 rounded-xl hover:from-[#29E7CD]/80 hover:to-[#3B82F6]/80 transition-all duration-200 shadow-lg hover:shadow-xl font-medium flex items-center justify-center space-x-2",children:[(0,i.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,i.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),(0,i.jsx)("span",{children:"Add Ingredient to Dish"})]})]})]}),(0,i.jsx)("div",{className:"mt-6 pt-4 border-t border-[#2a2a2a]/50",children:(0,i.jsxs)("div",{className:"bg-gradient-to-r from-[#D925C7]/10 to-[#29E7CD]/10 border border-[#D925C7]/30 p-4 rounded-2xl",children:[(0,i.jsxs)("div",{className:"mb-4",children:[(0,i.jsx)("h3",{className:"text-xl font-semibold text-white mb-1",children:"\uD83D\uDCDA Or Select Existing Recipe"}),(0,i.jsx)("p",{className:"text-sm text-gray-400",children:"Choose a recipe to load ingredients automatically"})]}),(0,i.jsxs)("select",{value:d,onChange:e=>c(e.target.value),className:"w-full px-4 py-3 border border-[#2a2a2a] bg-[#0a0a0a] text-white rounded-xl focus:outline-none focus:ring-2 focus:ring-[#D925C7] focus:border-[#D925C7] transition-all duration-200 shadow-sm hover:shadow-md",children:[(0,i.jsx)("option",{value:"",children:"Create new dish from scratch..."}),s.map(e=>(0,i.jsx)("option",{value:e.id,children:e.name},e.id))]})]})}),(0,i.jsxs)("div",{className:"mt-6 pt-4 border-t border-[#2a2a2a]/50",children:[(0,i.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"\uD83C\uDF7D️ Number of Portions"}),(0,i.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,i.jsx)("input",{type:"number",min:"1",placeholder:"1",value:B,onChange:e=>M(Number(e.target.value)),className:"w-24 px-4 py-3 border border-[#2a2a2a] bg-[#0a0a0a] text-white rounded-xl focus:outline-none focus:ring-2 focus:ring-[#29E7CD] focus:border-[#29E7CD] transition-all duration-200 shadow-sm hover:shadow-md text-center font-semibold"}),(0,i.jsx)("span",{className:"text-sm text-gray-400",children:"portions"})]}),(0,i.jsx)("p",{className:"text-xs text-gray-500 mt-2",children:"This determines the cost per portion for your pricing calculations"})]})]})]}),(0,i.jsxs)("div",{className:"bg-[#1f1f1f] p-4 sm:p-6 rounded-lg shadow",children:[(0,i.jsx)("h2",{className:"text-lg sm:text-xl font-semibold mb-4",children:"Cost Analysis"}),u.length>0?(0,i.jsxs)("div",{className:"space-y-4",children:[(0,i.jsx)("div",{className:"block md:hidden",children:(0,i.jsx)("div",{className:"space-y-3",children:u.map((e,t)=>(0,i.jsxs)("div",{className:"p-3 bg-[#2a2a2a] rounded-lg border border-[#3a3a3a]",children:[(0,i.jsxs)("div",{className:"flex justify-between items-start mb-2",children:[(0,i.jsx)("h4",{className:"text-sm font-medium text-white",children:e.ingredientName}),(0,i.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,i.jsxs)("span",{className:"text-sm font-bold text-[#29E7CD]",children:["$",e.yieldAdjustedCost.toFixed(2)]}),(0,i.jsx)("button",{onClick:()=>er(e.ingredientId,e.quantity),className:"p-1 text-gray-400 hover:text-[#29E7CD] transition-colors duration-200",title:"Edit quantity",children:(0,i.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,i.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})})}),(0,i.jsx)("button",{onClick:()=>el(e.ingredientId),className:"p-1 text-gray-400 hover:text-red-400 transition-colors duration-200",title:"Remove ingredient",children:(0,i.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,i.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})]}),L===e.ingredientId?(0,i.jsxs)("div",{className:"space-y-2",children:[(0,i.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,i.jsx)("input",{type:"number",value:q,onChange:e=>F(parseFloat(e.target.value)||0),className:"w-20 px-2 py-1 text-sm border border-[#3a3a3a] bg-[#0a0a0a] text-white rounded focus:outline-none focus:ring-1 focus:ring-[#29E7CD]",step:"0.1",min:"0"}),(0,i.jsx)("span",{className:"text-xs text-gray-400",children:e.unit})]}),(0,i.jsxs)("div",{className:"flex space-x-2",children:[(0,i.jsx)("button",{onClick:en,className:"px-3 py-1 text-xs bg-[#29E7CD] text-white rounded hover:bg-[#29E7CD]/80 transition-colors duration-200",children:"Save"}),(0,i.jsx)("button",{onClick:ea,className:"px-3 py-1 text-xs bg-gray-600 text-white rounded hover:bg-gray-500 transition-colors duration-200",children:"Cancel"})]})]}):(0,i.jsxs)("p",{className:"text-xs text-gray-400",children:[e.quantity," ",e.unit]})]},t))})}),(0,i.jsx)("div",{className:"hidden md:block overflow-x-auto",children:(0,i.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,i.jsx)("thead",{className:"bg-gray-50",children:(0,i.jsxs)("tr",{children:[(0,i.jsx)("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Ingredient"}),(0,i.jsx)("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Qty"}),(0,i.jsx)("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Cost"}),(0,i.jsx)("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Actions"})]})}),(0,i.jsx)("tbody",{className:"bg-[#1f1f1f] divide-y divide-gray-200",children:u.map((e,t)=>(0,i.jsxs)("tr",{className:"hover:bg-[#2a2a2a]/50 transition-colors duration-200",children:[(0,i.jsx)("td",{className:"px-3 py-2 text-sm text-white",children:e.ingredientName}),(0,i.jsx)("td",{className:"px-3 py-2 text-sm text-gray-500",children:L===e.ingredientId?(0,i.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,i.jsx)("input",{type:"number",value:q,onChange:e=>F(parseFloat(e.target.value)||0),className:"w-20 px-2 py-1 text-sm border border-[#3a3a3a] bg-[#0a0a0a] text-white rounded focus:outline-none focus:ring-1 focus:ring-[#29E7CD]",step:"0.1",min:"0"}),(0,i.jsx)("span",{className:"text-xs text-gray-400",children:e.unit})]}):(0,i.jsxs)("span",{children:[e.quantity," ",e.unit]})}),(0,i.jsxs)("td",{className:"px-3 py-2 text-sm text-gray-500",children:["$",e.yieldAdjustedCost.toFixed(2)]}),(0,i.jsx)("td",{className:"px-3 py-2 text-sm",children:(0,i.jsx)("div",{className:"flex items-center space-x-2",children:L===e.ingredientId?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("button",{onClick:en,className:"px-2 py-1 text-xs bg-[#29E7CD] text-white rounded hover:bg-[#29E7CD]/80 transition-colors duration-200",children:"Save"}),(0,i.jsx)("button",{onClick:ea,className:"px-2 py-1 text-xs bg-gray-600 text-white rounded hover:bg-gray-500 transition-colors duration-200",children:"Cancel"})]}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("button",{onClick:()=>er(e.ingredientId,e.quantity),className:"p-1 text-gray-400 hover:text-[#29E7CD] transition-colors duration-200",title:"Edit quantity",children:(0,i.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,i.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})})}),(0,i.jsx)("button",{onClick:()=>el(e.ingredientId),className:"p-1 text-gray-400 hover:text-red-400 transition-colors duration-200",title:"Remove ingredient",children:(0,i.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,i.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})})})]},t))})]})}),(0,i.jsxs)("div",{className:"border-t pt-4",children:[(0,i.jsxs)("div",{className:"flex justify-between items-center mb-2",children:[(0,i.jsx)("span",{className:"text-lg font-medium text-white",children:"Total COGS:"}),(0,i.jsxs)("span",{className:"text-lg font-bold text-[#29E7CD]",children:["$",ex.toFixed(2)]})]}),B>0&&(0,i.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,i.jsx)("span",{className:"text-sm text-gray-400",children:"Cost per portion:"}),(0,i.jsxs)("span",{className:"text-sm font-medium text-white",children:["$",eu.toFixed(2)]})]}),eu>0&&(0,i.jsx)("div",{className:"mt-6 pt-4 border-t border-[#2a2a2a]",children:(0,i.jsxs)("div",{className:"mb-4",children:[(0,i.jsxs)("h3",{className:"text-lg font-semibold text-white mb-3 flex items-center",children:["\uD83D\uDCB0 Costing Tool",(0,i.jsx)("div",{className:"ml-2 w-2 h-2 bg-[#29E7CD] rounded-full animate-pulse"})]}),(0,i.jsxs)("div",{className:"mb-4",children:[(0,i.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"\uD83C\uDFAF Target Gross Profit %"}),(0,i.jsx)("div",{className:"flex space-x-2",children:[60,65,70,75,80].map(e=>(0,i.jsxs)("button",{onClick:()=>H(e),className:"px-3 py-2 rounded-lg text-sm font-medium transition-all duration-200 ".concat(O===e?"bg-gradient-to-r from-[#29E7CD] to-[#D925C7] text-white shadow-lg":"bg-[#2a2a2a] text-gray-300 hover:bg-[#2a2a2a]/80"),children:[e,"%"]},e))})]}),(0,i.jsxs)("div",{className:"mb-4",children:[(0,i.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"\uD83D\uDCCA Pricing Strategy"}),(0,i.jsxs)("div",{className:"grid grid-cols-3 gap-2",children:[(0,i.jsx)("button",{onClick:()=>X("charm"),className:"px-3 py-2 rounded-lg text-sm font-medium transition-all duration-200 ".concat("charm"===Y?"bg-gradient-to-r from-[#29E7CD] to-[#D925C7] text-white shadow-lg":"bg-[#2a2a2a] text-gray-300 hover:bg-[#2a2a2a]/80"),children:"Charm ($19.95)"}),(0,i.jsx)("button",{onClick:()=>X("whole"),className:"px-3 py-2 rounded-lg text-sm font-medium transition-all duration-200 ".concat("whole"===Y?"bg-gradient-to-r from-[#29E7CD] to-[#D925C7] text-white shadow-lg":"bg-[#2a2a2a] text-gray-300 hover:bg-[#2a2a2a]/80"),children:"Whole ($20)"}),(0,i.jsx)("button",{onClick:()=>X("real"),className:"px-3 py-2 rounded-lg text-sm font-medium transition-all duration-200 ".concat("real"===Y?"bg-gradient-to-r from-[#29E7CD] to-[#D925C7] text-white shadow-lg":"bg-[#2a2a2a] text-gray-300 hover:bg-[#2a2a2a]/80"),children:"Real ($19.47)"})]})]}),(0,i.jsxs)("div",{className:"bg-gradient-to-br from-[#29E7CD]/10 to-[#D925C7]/10 border border-[#29E7CD]/30 p-4 rounded-2xl",children:[(0,i.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,i.jsxs)("div",{className:"bg-[#2a2a2a]/30 p-3 rounded-xl border border-[#2a2a2a]/50",children:[(0,i.jsx)("div",{className:"text-xs text-gray-500 uppercase tracking-wide mb-1",children:"Food Cost"}),(0,i.jsxs)("div",{className:"text-xl font-bold text-white",children:["$",eu.toFixed(2)]}),(0,i.jsx)("div",{className:"text-xs text-gray-400",children:"per portion"})]}),(0,i.jsxs)("div",{className:"bg-[#2a2a2a]/30 p-3 rounded-xl border border-[#2a2a2a]/50",children:[(0,i.jsx)("div",{className:"text-xs text-gray-500 uppercase tracking-wide mb-1",children:"Sell Price (Excl GST)"}),(0,i.jsxs)("div",{className:"text-xl font-bold text-[#29E7CD]",children:["$",V.toFixed(2)]}),(0,i.jsx)("div",{className:"text-xs text-gray-400",children:"for your records"})]}),(0,i.jsxs)("div",{className:"bg-[#2a2a2a]/30 p-3 rounded-xl border border-[#2a2a2a]/50",children:[(0,i.jsx)("div",{className:"text-xs text-gray-500 uppercase tracking-wide mb-1",children:"Menu Price (Incl GST)"}),(0,i.jsxs)("div",{className:"text-xl font-bold text-[#D925C7]",children:["$",K.toFixed(2)]}),(0,i.jsx)("div",{className:"text-xs text-gray-400",children:"what customer pays"})]}),(0,i.jsxs)("div",{className:"bg-[#2a2a2a]/30 p-3 rounded-xl border border-[#2a2a2a]/50",children:[(0,i.jsx)("div",{className:"text-xs text-gray-500 uppercase tracking-wide mb-1",children:"Gross Profit"}),(0,i.jsxs)("div",{className:"text-xl font-bold text-green-400",children:["$",(V-eu).toFixed(2)]}),(0,i.jsxs)("div",{className:"text-xs text-gray-400",children:[((V-eu)/V*100).toFixed(1),"% margin"]})]})]}),(0,i.jsx)("div",{className:"mt-4 pt-4 border-t border-[#2a2a2a]/50",children:(0,i.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,i.jsxs)("div",{className:"bg-gradient-to-br from-[#D925C7]/20 to-[#29E7CD]/20 p-3 rounded-xl border border-[#D925C7]/30",children:[(0,i.jsx)("div",{className:"text-xs text-gray-500 uppercase tracking-wide mb-1",children:"Contributing Margin"}),(0,i.jsxs)("div",{className:"text-xl font-bold text-[#D925C7]",children:["$",(V-eu).toFixed(2)]}),(0,i.jsxs)("div",{className:"text-xs text-gray-400",children:[((V-eu)/V*100).toFixed(1),"% of revenue"]})]}),(0,i.jsxs)("div",{className:"bg-[#2a2a2a]/30 p-3 rounded-xl border border-[#2a2a2a]/50",children:[(0,i.jsx)("div",{className:"text-xs text-gray-500 uppercase tracking-wide mb-1",children:"Formula"}),(0,i.jsx)("div",{className:"text-sm text-gray-400",children:(0,i.jsx)("strong",{className:"text-[#D925C7]",children:"Revenue - Food Cost"})}),(0,i.jsx)("div",{className:"text-xs text-gray-500 mt-1",children:"Amount available to cover fixed costs and generate profit"})]})]})}),(0,i.jsx)("div",{className:"mt-4 pt-3 border-t border-[#2a2a2a]/50",children:(0,i.jsxs)("div",{className:"flex justify-between items-center text-sm",children:[(0,i.jsx)("span",{className:"text-gray-400",children:"GST Amount (10%):"}),(0,i.jsxs)("span",{className:"text-white font-medium",children:["$",(K-V).toFixed(2)]})]})})]})]})}),(0,i.jsxs)("div",{className:"mt-4 pt-4 border-t border-[#2a2a2a]",children:[(0,i.jsx)("button",{onClick:ed,className:"w-full bg-gradient-to-r from-[#D925C7] to-[#29E7CD] text-white px-4 py-3 rounded-lg hover:from-[#D925C7]/80 hover:to-[#29E7CD]/80 transition-all duration-200 shadow-lg hover:shadow-xl font-medium",children:"\uD83D\uDCBE Save as Recipe in Recipe Book"}),(0,i.jsx)("p",{className:"text-xs text-gray-400 mt-2 text-center",children:"This will save the current COGS calculation as a recipe in your Recipe Book"})]})]})]}):(0,i.jsx)("div",{className:"text-center py-8 text-gray-500",children:d?"No ingredients added to this recipe yet.":"Select a recipe to calculate COGS."})]})]}),0===s.length&&(0,i.jsxs)("div",{className:"text-center py-12",children:[(0,i.jsx)("div",{className:"text-gray-400 text-6xl mb-4",children:"\uD83D\uDCCA"}),(0,i.jsx)("h3",{className:"text-lg font-medium text-white mb-2",children:"No recipes available"}),(0,i.jsx)("p",{className:"text-gray-500 mb-4",children:"Create some recipes first to calculate their COGS."}),(0,i.jsx)("a",{href:"/webapp/recipes",className:"bg-gradient-to-r from-[#29E7CD] to-[#D925C7] text-white px-4 py-2 rounded-lg hover:from-[#29E7CD]/80 hover:to-[#D925C7]/80 transition-colors",children:"Go to Recipes"})]})]})})}},7666:(e,t,s)=>{Promise.resolve().then(s.bind(s,3272))}},e=>{e.O(0,[8888,1459,2432,7979,1899,9744,2033,4495,9592,433,2652,5030,465,2663,9173,2076,7358],()=>e(e.s=7666)),_N_E=e.O()}]);