(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[247],{147:(e,t,i)=>{"use strict";i.d(t,{mT:()=>c,oU:()=>d});let s={ml:1,milliliter:1,l:1e3,liter:1e3,litre:1e3,tsp:5,teaspoon:5,tbsp:15,tablespoon:15,cup:240,cups:240,"fl oz":30,"fluid ounce":30,pint:480,quart:960,gallon:3840},r={g:1,gm:1,gram:1,grams:1,kg:1e3,kilogram:1e3,oz:28.35,ounce:28.35,lb:453.6,pound:453.6,mg:.001,milligram:.001},n={water:1,milk:1.03,cream:1.01,oil:.92,"olive oil":.92,"vegetable oil":.92,vinegar:1.01,honey:1.42,syrup:1.33,flour:.59,"all-purpose flour":.59,"bread flour":.59,"cake flour":.59,sugar:.85,"white sugar":.85,"brown sugar":.8,"powdered sugar":.6,"cocoa powder":.4,"baking powder":.6,"baking soda":.87,salt:1.2,cornstarch:.6,almonds:.6,walnuts:.65,pecans:.7,peanuts:.6,"sesame seeds":.6,"sunflower seeds":.5,butter:.91,cheese:1.1,"cream cheese":1,yogurt:1.03,default:.8};function a(e){if(!e)return n.default;let t=e.toLowerCase();if(n[t])return n[t];for(let[e,i]of Object.entries(n))if(t.includes(e)||e.includes(t))return i;return n.default}function o(e){return e.toLowerCase().trim()in s}function l(e){return e.toLowerCase().trim()in r}function d(e,t,i,n){let d,c,u=t.toLowerCase().trim(),m=i.toLowerCase().trim();if(u===m)return{convertedValue:e,convertedUnit:i,originalValue:e,originalUnit:t,conversionFactor:1};let x=o(u),g=o(m),h=l(u),p=l(m);if(x&&g)d=e*s[u]/s[m],c=s[u]/s[m];else if(h&&p)d=e*r[u]/r[m],c=r[u]/r[m];else if(x&&p){let t=a(n||"");d=e*s[u]*t/r[m],c=s[u]*t/r[m]}else{if(!h||!g)return{convertedValue:e,convertedUnit:i,originalValue:e,originalUnit:t,conversionFactor:1};let o=a(n||"");d=e*r[u]/o/s[m],c=r[u]/(o*s[m])}return{convertedValue:d,convertedUnit:i,originalValue:e,originalUnit:t,conversionFactor:c}}function c(e,t,i,s){return e/d(1,t,i,s).conversionFactor}},3168:(e,t,i)=>{"use strict";i.d(t,{ND:()=>a});var s=i(2354);i(9509);let r="https://dulkrqgjfohsuxhsmofo.supabase.co",n="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImR1bGtycWdqZm9oc3V4aHNtb2ZvIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTY5NzYwMDMsImV4cCI6MjA3MjU1MjAwM30.b_P98mAantymNfWy1Qz18SaR-LwrPjuaebO2Uj_5JK8";if(!r||!n)throw Error("Missing Supabase environment variables. Please check your .env.local file.");let a=r&&n?(0,s.UU)(r,n):null},3272:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>l});var s=i(5155),r=i(3168),n=i(2115),a=i(147),o=i(8081);function l(){let[e,t]=(0,n.useState)([]),[i,l]=(0,n.useState)([]),[d,c]=(0,n.useState)(""),[u,m]=(0,n.useState)([]),[x,g]=(0,n.useState)([]),[h,p]=(0,n.useState)(!0),[f,b]=(0,n.useState)(null),[v,j]=(0,n.useState)(null),[N,y]=(0,n.useState)(!1),[w,C]=(0,n.useState)(null),[k,D]=(0,n.useState)(!1),[_,E]=(0,n.useState)(!1),[L,S]=(0,n.useState)(null),[I,q]=(0,n.useState)(0),[F,M]=(0,n.useState)(""),[A,B]=(0,n.useState)(1),[G,P]=(0,n.useState)(""),[R,T]=(0,n.useState)(!1),[U,z]=(0,n.useState)(null),[W,O]=(0,n.useState)({ingredient_id:"",quantity:0,unit:"kg"}),[$,V]=(0,n.useState)(70),[H,J]=(0,n.useState)(0),[Q,Y]=(0,n.useState)(0),[Z,K]=(0,n.useState)("charm");(0,n.useEffect)(()=>{X()},[]),(0,n.useEffect)(()=>{let e=sessionStorage.getItem("editingRecipe");if(e)try{let{recipe:t,recipeId:i,calculations:s,dishName:r,dishPortions:n,dishNameLocked:a}=JSON.parse(e);console.log("\uD83D\uDD0D DEBUG: Loading from sessionStorage with recipeId:",{dishName:r,recipeId:i,calculationsCount:s.length}),M(r),B(n),E(a),g(s);let o=s.map(e=>({recipe_id:e.recipeId,ingredient_id:e.ingredientId,quantity:e.quantity,unit:e.unit}));m(o),C(!0),sessionStorage.removeItem("editingRecipe"),j('Recipe "'.concat(r,'" loaded for editing!')),setTimeout(()=>j(null),3e3)}catch(e){console.log("Failed to parse editing data:",e)}},[]),(0,n.useEffect)(()=>{d&&ee()},[d]),(0,n.useEffect)(()=>{let e=e=>{let t=e.target;t.closest(".ingredient-search-container")||t.closest(".suggestions-dropdown")||T(!1)};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[]);let X=async()=>{try{if(!r.ND){console.log("Supabase client not available"),t([]),l([]),p(!1);return}let{data:e,error:i}=await r.ND.from("ingredients").select("*").order("ingredient_name"),{data:s,error:n}=await r.ND.from("recipes").select("*").order("name");i?(console.log("Ingredients table not found or empty:",i.message),t([])):(console.log("Ingredients fetched:",(null==e?void 0:e.length)||0,"items"),t(e||[])),n?(console.log("Recipes table not found or empty:",n.message),l([])):l(s||[])}catch(e){b("Failed to fetch data")}finally{p(!1)}},ee=async()=>{if(d)try{if(!r.ND)return void console.log("Supabase client not available");let{data:e,error:t}=await r.ND.from("recipe_ingredients").select("*").eq("recipe_id",d);t?b(t.message):(m(e||[]),et(e||[]))}catch(e){b("Failed to fetch recipe ingredients")}},et=t=>{g(t.map(t=>{let i=e.find(e=>e.id===t.ingredient_id);if(!i)return null;let s=i.cost_per_unit_incl_trim||i.cost_per_unit||0,r=(0,a.mT)(s,i.unit||"g",t.unit||"g",i.ingredient_name),n=t.quantity*r,o=i.trim_peel_waste_percentage||0,l=i.yield_percentage||100,d=n;!i.cost_per_unit_incl_trim&&o>0&&(d=n/(1-o/100));let c=l/100*d;return console.log("COGS Calculation for ".concat(i.ingredient_name,":"),{quantity:t.quantity,unit:t.unit||i.unit,costPerUnit:r,totalCost:n,wastePercent:o,yieldPercent:l,wasteAdjustedCost:d,yieldAdjustedCost:c,hasInclTrim:!!i.cost_per_unit_incl_trim}),{recipeId:t.recipe_id||"temp",ingredientId:t.ingredient_id,ingredientName:i.ingredient_name,quantity:t.quantity,unit:t.unit||i.unit||"kg",costPerUnit:r,totalCost:n,wasteAdjustedCost:d,yieldAdjustedCost:c}}).filter(Boolean))},ei=async e=>{try{if(console.log("Loading ingredients for recipe:",e),!r.ND)return void console.log("Supabase client not available");let{data:t,error:i}=await r.ND.from("recipe_ingredients").select("\n          id,\n          quantity,\n          unit,\n          ingredients (\n            id,\n            ingredient_name,\n            cost_per_unit,\n            unit,\n            trim_peel_waste_percentage,\n            yield_percentage\n          )\n        ").eq("recipe_id",e);if(i)return void console.log("Error loading recipe ingredients:",i);console.log("Loaded recipe ingredients:",t);let s=t.map(t=>{let i=t.ingredients,s=t.quantity,r=i.cost_per_unit,n=(0,a.mT)(r,i.unit||"g",t.unit||"g",i.ingredient_name),o=s*n,l=i.trim_peel_waste_percentage||0,d=i.yield_percentage||100,c=o*(1+l/100);return{recipeId:e,ingredientId:i.id,ingredientName:i.ingredient_name,quantity:s,unit:t.unit,costPerUnit:n,totalCost:o,wasteAdjustedCost:c,yieldAdjustedCost:c/(d/100)}});console.log("Converted to calculations:",s),g(s);let n=t.map(t=>({recipe_id:e,ingredient_id:t.ingredients.id,quantity:t.quantity,unit:t.unit}));if(m(n),r.ND){let{data:t}=await r.ND.from("recipes").select("yield").eq("id",e).single();t&&B(t.yield||1)}}catch(e){console.log("Error in loadExistingRecipeIngredients:",e)}},es=async e=>{if(!e.trim())return void C(null);D(!0);try{if(console.log("Checking for recipe:",e.trim()),!r.ND){console.log("Supabase client not available"),C(!1),D(!1);return}let{data:t,error:i}=await r.ND.from("recipes").select("id, name").ilike("name",e.trim()),s=t&&t.length>0?t[0]:null;console.log("Recipe check result:",{existingRecipe:s,error:i}),i&&"PGRST116"===i.code?(console.log("Recipe not found - PGRST116 error"),C(!1)):s?(console.log("Recipe found:",s),C(!0),await ei(s.id)):(console.log("Recipe not found - no data returned"),C(!1))}catch(e){console.log("Error checking recipe:",e),C(null)}finally{D(!1)}};(0,n.useEffect)(()=>{let e=setTimeout(()=>{F.trim()&&!_?(console.log("\uD83D\uDD0D DEBUG: Running recipe check for:",F),es(F)):F.trim()?console.log("\uD83D\uDD0D DEBUG: Skipping recipe check - dish name locked (editing from recipe book)"):C(null)},500);return()=>clearTimeout(e)},[F,_]);let er=(e,t)=>{S(e),q(t)},en=()=>{L&&I>0&&g(t=>t.map(t=>{if(t.ingredientId===L){let i=e.find(e=>e.id===L);if(i){let e=I*t.costPerUnit,s=i.trim_peel_waste_percentage||0,r=i.yield_percentage||100,n=e*(1+s/100);return{...t,quantity:I,totalCost:e,wasteAdjustedCost:n,yieldAdjustedCost:n/(r/100)}}}return t})),S(null),q(0)},ea=()=>{S(null),q(0)},eo=e=>{g(t=>t.filter(t=>t.ingredientId!==e))},el=o.xQ,ed=async()=>{if(0===x.length)return void b("No calculations to save. Please calculate COGS first.");let e=F||prompt("Enter a name for this recipe:");if(!e)return;let t=el(e);try{let e;if(!r.ND)return void b("Database connection not available");let{data:i,error:s}=await r.ND.from("recipes").select("id, name").ilike("name",t);console.log("Recipe check results:",{existingRecipes:i,checkError:s,recipeName:t});let n=i&&i.length>0?i[0]:null;if(console.log("Existing recipe found:",n),n&&!s){let{data:t,error:i}=await r.ND.from("recipes").update({yield:A||1,yield_unit:"servings",updated_at:new Date().toISOString()}).eq("id",n.id).select().single();if(i)return void b(i.message);e=t}else{let{data:i,error:s}=await r.ND.from("recipes").insert({name:t,yield:A||1,yield_unit:"servings"}).select().single();if(s)return void b(s.message);e=i}let a=x.map(t=>({recipe_id:e.id,ingredient_id:t.ingredientId,quantity:t.quantity,unit:t.unit}));if(n&&!s){let{error:e}=await r.ND.from("recipe_ingredients").delete().eq("recipe_id",n.id);if(e)return void b(e.message);let{error:t}=await r.ND.from("recipe_ingredients").insert(a);if(t)return void b(t.message)}else{let{error:e}=await r.ND.from("recipe_ingredients").insert(a);if(e)return void b(e.message)}b(null);let o=n&&!s?"updated":"saved";j('Recipe "'.concat(t,'" ').concat(o," successfully to Recipe Book!")),E(!1),setTimeout(()=>j(null),5e3);try{await X()}catch(e){console.log("Failed to refresh recipes list:",e)}}catch(e){console.log("Recipe save error:",e),b("Failed to save recipe"),j(null),E(!1)}},ec=e=>{P(e),T(e.length>0),z(null),O({...W,ingredient_id:""})},eu=async t=>{if(t.preventDefault(),!W.ingredient_id||!W.quantity)return void b("Please select an ingredient and enter a quantity");try{if(u.find(e=>e.ingredient_id===W.ingredient_id)){let t=e.find(e=>e.id===W.ingredient_id);if(t){let e=W.quantity,i=(W.unit,""),s=(W.unit||"kg").toLowerCase().trim(),r=(t.unit||"kg").toLowerCase().trim(),n=["tsp","teaspoon","tbsp","tablespoon","cup","cups","ml","milliliter","l","liter","litre","fl oz","fluid ounce"],o=["g","gm","gram","grams","kg","kilogram","oz","ounce","lb","pound","mg","milligram"],l=n.includes(s),d=o.includes(s),c=n.includes(r),u=o.includes(r);if(l&&u||d&&c){let s=(0,a.oU)(W.quantity,W.unit||"kg",t.unit||"kg",t.ingredient_name);e=s.convertedValue,s.convertedUnit,i=" (converted from ".concat(W.quantity," ").concat(W.unit||"kg",")")}m(t=>t.map(t=>t.ingredient_id===W.ingredient_id?{...t,quantity:t.quantity+e}:t)),g(t=>t.map(t=>{if(t.ingredientId===W.ingredient_id){let s=t.quantity+e,r=s*t.costPerUnit,n=r*(1+(t.wasteAdjustedCost/t.totalCost-1)),a=n/(t.yieldAdjustedCost/t.wasteAdjustedCost);return{...t,ingredientName:t.ingredientName.includes("(converted from")?t.ingredientName:t.ingredientName+i,quantity:s,totalCost:r,wasteAdjustedCost:n,yieldAdjustedCost:a}}return t}))}}else{let t=e.find(e=>e.id===W.ingredient_id);if(t){let e=W.quantity,i=W.unit||"kg",s="",r=(W.unit||"kg").toLowerCase().trim(),n=(t.unit||"kg").toLowerCase().trim(),o=["tsp","teaspoon","tbsp","tablespoon","cup","cups","ml","milliliter","l","liter","litre","fl oz","fluid ounce"],l=["g","gm","gram","grams","kg","kilogram","oz","ounce","lb","pound","mg","milligram"],c=o.includes(r),u=l.includes(r),x=o.includes(n),h=l.includes(n);if(c&&h||u&&x){let r=(0,a.oU)(W.quantity,W.unit||"kg",t.unit||"kg",t.ingredient_name);e=r.convertedValue,i=r.convertedUnit,s=" (converted from ".concat(W.quantity," ").concat(W.unit||"kg",")")}let p={recipe_id:d||"temp",ingredient_id:W.ingredient_id,quantity:e,unit:i};m(e=>[...e,p]);let f=e,b=t.cost_per_unit,v=(0,a.mT)(b,t.unit||"g",i,t.ingredient_name),j=f*v,N=t.trim_peel_waste_percentage||0,y=t.yield_percentage||100,w=j*(1+N/100),C={recipeId:d||"temp",ingredientId:W.ingredient_id,ingredientName:t.ingredient_name+s,quantity:f,unit:i,costPerUnit:v,totalCost:j,wasteAdjustedCost:w,yieldAdjustedCost:w/(y/100)};g(e=>[...e,C])}}O({ingredient_id:"",quantity:0,unit:"kg"}),P(""),z(null),T(!1)}catch(e){b("Failed to add ingredient")}},em=x.reduce((e,t)=>e+t.yieldAdjustedCost,0),ex=A>0?em/A:0;(0,n.useEffect)(()=>{if(ex>0){let e=((e,t)=>{let i=e/(1-t/100),s=i+.1*i,r=s;switch(Z){case"charm":r=Math.ceil(s)-.01;break;case"whole":r=Math.ceil(s);break;case"real":r=s}let n=r/1.1,a=r-n,o=n-e;return{sellPriceExclGST:n,sellPriceInclGST:r,gstAmount:a,actualGrossProfit:(n-e)/n*100,grossProfitDollar:n-e,contributingMargin:o,contributingMarginPercent:o/n*100}})(ex,$);J(e.sellPriceExclGST),Y(e.sellPriceInclGST)}},[ex,$,Z]);let eg=(0,n.useMemo)(()=>{if(console.log("Filtering ingredients:",e.length,"total, search:",G),!G.trim()){let t=e.slice(0,50);return console.log("No search term, returning first 50:",t.length),t}let t=G.toLowerCase().trim(),i=e.filter(e=>e.ingredient_name.toLowerCase().includes(t)||e.unit&&e.unit.toLowerCase().includes(t)).sort((e,i)=>{let s=e.ingredient_name.toLowerCase(),r=i.ingredient_name.toLowerCase();return s.startsWith(t)&&!r.startsWith(t)?-1:!s.startsWith(t)&&r.startsWith(t)?1:s===t&&r!==t?-1:s!==t&&r===t?1:s.localeCompare(r)}).slice(0,20);return console.log("Search results:",i.length,"matches for",t),i},[e,G]);return((0,n.useEffect)(()=>{console.log("Suggestions state:",{showSuggestions:R,ingredientSearch:G,filteredIngredientsCount:eg.length,ingredientsCount:e.length})},[R,G,eg.length,e.length]),h)?(0,s.jsx)("div",{className:"min-h-screen bg-[#0a0a0a] p-4 sm:p-6",children:(0,s.jsx)("div",{className:"max-w-7xl mx-auto",children:(0,s.jsxs)("div",{className:"animate-pulse",children:[(0,s.jsx)("div",{className:"h-8 bg-[#2a2a2a] rounded-3xl w-1/2 mb-8"}),(0,s.jsx)("div",{className:"space-y-4",children:[void 0,void 0,void 0].map((e,t)=>(0,s.jsxs)("div",{className:"bg-[#1f1f1f] p-6 rounded-3xl shadow-lg border border-[#2a2a2a]",children:[(0,s.jsx)("div",{className:"h-4 bg-[#2a2a2a] rounded-xl w-3/4 mb-3"}),(0,s.jsx)("div",{className:"h-3 bg-[#2a2a2a] rounded-xl w-1/2"})]},t))})]})})}):(0,s.jsx)("div",{className:"min-h-screen bg-[#0a0a0a] p-4 sm:p-6",children:(0,s.jsxs)("div",{className:"max-w-7xl mx-auto",children:[(0,s.jsxs)("div",{className:"mb-8",children:[(0,s.jsx)("h1",{className:"text-4xl font-bold text-white mb-2",children:"\uD83D\uDCB0 COGS Calculator"}),(0,s.jsx)("p",{className:"text-gray-400",children:"Calculate Cost of Goods Sold and optimize your profit margins"})]}),f&&(0,s.jsx)("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded mb-6",children:f}),v&&(0,s.jsx)("div",{className:"bg-gradient-to-r from-green-500 to-emerald-500 border-2 border-green-400 text-white px-6 py-5 rounded-2xl mb-6 shadow-2xl animate-in slide-in-from-top-2 duration-500 transform scale-105 hover:scale-110 transition-all duration-300",children:(0,s.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,s.jsx)("div",{className:"flex-shrink-0",children:(0,s.jsx)("div",{className:"w-10 h-10 bg-white/20 backdrop-blur-sm rounded-full flex items-center justify-center animate-pulse",children:(0,s.jsx)("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:3,d:"M5 13l4 4L19 7"})})})}),(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsx)("p",{className:"font-bold text-lg text-white",children:v}),(0,s.jsx)("p",{className:"text-sm text-green-100 mt-1 font-medium",children:"\uD83C\uDF89 Your recipe has been added to the Recipe Book and is ready to use!"})]}),(0,s.jsx)("button",{onClick:()=>j(null),className:"flex-shrink-0 text-white/80 hover:text-white hover:bg-white/20 rounded-full p-2 transition-all duration-200",children:(0,s.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})}),(0,s.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4 sm:gap-8",children:[(0,s.jsxs)("div",{className:"bg-[#1f1f1f] p-4 sm:p-6 rounded-lg shadow",children:[(0,s.jsx)("h2",{className:"text-lg sm:text-xl font-semibold mb-6",children:"Create Dish"}),(0,s.jsxs)("div",{className:"mb-6",children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"\uD83C\uDF7D️ Dish Name"}),(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)("input",{type:"text",placeholder:"Enter dish name (e.g., Chicken Curry)",value:F,onChange:e=>M(el(e.target.value)),disabled:_,className:"w-full px-4 py-3 border rounded-xl focus:outline-none focus:ring-2 transition-all duration-200 shadow-sm hover:shadow-md ".concat(_?"border-blue-400 bg-[#1a1a1a] text-gray-300 cursor-not-allowed":!0===w?"border-orange-400 bg-[#0a0a0a] text-white focus:ring-orange-400 focus:border-orange-400":!1===w?"border-green-400 bg-[#0a0a0a] text-white focus:ring-green-400 focus:border-green-400":"border-[#2a2a2a] bg-[#0a0a0a] text-white focus:ring-[#29E7CD] focus:border-[#29E7CD]")}),_&&(0,s.jsx)("div",{className:"absolute right-3 top-1/2 transform -translate-y-1/2",children:(0,s.jsx)("svg",{className:"w-5 h-5 text-blue-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})})})]}),F.trim()&&(0,s.jsx)("div",{className:"mt-2 flex items-center space-x-2",children:k?(0,s.jsxs)("div",{className:"flex items-center space-x-2 text-gray-400",children:[(0,s.jsx)("div",{className:"w-4 h-4 border-2 border-gray-400 border-t-transparent rounded-full animate-spin"}),(0,s.jsx)("span",{className:"text-sm",children:"Checking..."})]}):!0===w?(0,s.jsxs)("div",{className:"flex items-center space-x-2 text-orange-400",children:[(0,s.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})}),(0,s.jsx)("span",{className:"text-sm font-medium",children:"⚠️ Recipe exists - ingredients loaded, will update existing recipe"})]}):!1===w?(0,s.jsxs)("div",{className:"flex items-center space-x-2 text-green-400",children:[(0,s.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),(0,s.jsx)("span",{className:"text-sm font-medium",children:"✅ New recipe - will create new recipe"})]}):null}),_&&(0,s.jsxs)("div",{className:"mt-2 flex items-center space-x-2 text-blue-400",children:[(0,s.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})}),(0,s.jsx)("span",{className:"text-sm font-medium",children:"\uD83D\uDD12 Dish name locked - editing ingredients"})]})]}),(0,s.jsxs)("div",{className:"mb-6",children:[(0,s.jsxs)("div",{className:"bg-gradient-to-r from-[#29E7CD]/10 to-[#D925C7]/10 border border-[#29E7CD]/30 p-4 rounded-2xl",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"text-xl font-semibold text-white mb-1",children:"\uD83E\uDD58 Add Ingredients"}),(0,s.jsx)("p",{className:"text-sm text-gray-400",children:"Add ingredients manually to build your dish"}),(0,s.jsx)("p",{className:"text-xs text-[#29E7CD] mt-1",children:"✨ Automatic unit conversion: Use any unit (tsp, tbsp, cups, ml, g, kg) - we'll convert to the ingredient's base unit!"})]}),(0,s.jsxs)("button",{onClick:()=>{y(!N),!N&&F.trim()&&E(!0),N&&E(!1)},className:"bg-gradient-to-r from-[#29E7CD] to-[#D925C7] text-white px-6 py-3 rounded-xl text-sm font-medium hover:from-[#29E7CD]/80 hover:to-[#D925C7]/80 transition-all duration-200 shadow-lg hover:shadow-xl flex items-center space-x-2",children:[(0,s.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),(0,s.jsx)("span",{children:N?"Cancel":"Add Ingredient"})]})]}),N&&(0,s.jsxs)("form",{onSubmit:eu,className:"space-y-3 p-4 bg-[#0a0a0a] border border-[#2a2a2a] rounded-lg",children:[(0,s.jsxs)("div",{className:"relative ingredient-search-container",children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"\uD83D\uDD0D Search & Select Ingredient"}),(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)("input",{type:"text",placeholder:"Type to search ingredients...",value:G,onChange:e=>ec(e.target.value),onFocus:()=>T(G.length>0),className:"w-full max-w-md pl-10 pr-4 py-3 border border-[#2a2a2a] bg-[#0a0a0a] text-white rounded-xl focus:outline-none focus:ring-2 focus:ring-[#29E7CD] focus:border-[#29E7CD] transition-all duration-200 shadow-sm hover:shadow-md"}),(0,s.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:(0,s.jsx)("svg",{className:"h-5 w-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})}),G&&(0,s.jsx)("button",{onClick:()=>ec(""),className:"absolute inset-y-0 right-0 pr-3 flex items-center text-gray-400 hover:text-white transition-colors",children:(0,s.jsx)("svg",{className:"h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),G&&(0,s.jsxs)("div",{className:"mt-2 text-xs text-gray-400",children:[eg.length," ingredient",1!==eg.length?"s":""," found"]})]}),R&&eg.length>0&&(0,s.jsx)("div",{className:"absolute z-10 w-full max-w-md mt-1 bg-[#1f1f1f] border border-[#2a2a2a] rounded-xl shadow-lg max-h-60 overflow-y-auto suggestions-dropdown",children:eg.slice(0,10).map(e=>{let t=e.cost_per_unit_incl_trim||e.cost_per_unit||0;return(0,s.jsx)("button",{type:"button",onClick:t=>{t.preventDefault(),t.stopPropagation(),console.log("Button clicked for:",e.ingredient_name),console.log("Ingredient selected:",e.ingredient_name),z(e),O({...W,ingredient_id:e.id,unit:e.unit||"kg"}),P(e.ingredient_name),T(!1)},className:"w-full px-4 py-3 text-left hover:bg-[#2a2a2a] transition-colors border-b border-[#2a2a2a] last:border-b-0",children:(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"text-white font-medium",children:e.ingredient_name}),(0,s.jsxs)("div",{className:"text-xs text-gray-400",children:[e.unit&&"".concat(e.unit," • "),"$",t.toFixed(2),"/",e.unit||"unit"]})]}),(0,s.jsx)("div",{className:"text-[#29E7CD] text-sm",children:e.trim_peel_waste_percentage?"".concat(e.trim_peel_waste_percentage,"% waste"):"No waste"})]})},e.id)})}),R&&0===eg.length&&G&&(0,s.jsxs)("div",{className:"absolute z-10 w-full mt-1 p-3 bg-[#1f1f1f] border border-[#2a2a2a] rounded-xl shadow-lg",children:[(0,s.jsxs)("p",{className:"text-sm text-gray-400 text-center",children:['\uD83D\uDD0D No ingredients found matching "',G,'"']}),(0,s.jsx)("p",{className:"text-xs text-gray-500 text-center mt-1",children:"Try a different search term or add the ingredient to your list first"})]}),U&&(0,s.jsx)("div",{className:"mt-2 p-3 bg-[#29E7CD]/10 border border-[#29E7CD]/20 rounded-lg",children:(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{className:"text-[#29E7CD] font-medium",children:["✓ ",U.ingredient_name]}),(0,s.jsxs)("div",{className:"text-xs text-gray-400",children:["$",(U.cost_per_unit_incl_trim||U.cost_per_unit||0).toFixed(2),"/",U.unit||"unit"]})]}),(0,s.jsx)("button",{type:"button",onClick:()=>ec(""),className:"text-gray-400 hover:text-white transition-colors",children:(0,s.jsx)("svg",{className:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"⚖️ Quantity"}),(0,s.jsx)("input",{type:"number",step:"0.01",min:"0",required:!0,value:W.quantity,onChange:e=>O({...W,quantity:parseFloat(e.target.value)}),onFocus:e=>{0===W.quantity&&e.target.select()},className:"w-full px-4 py-3 border border-[#2a2a2a] bg-[#0a0a0a] text-white rounded-xl focus:outline-none focus:ring-2 focus:ring-[#29E7CD] focus:border-[#29E7CD] transition-all duration-200 shadow-sm hover:shadow-md",placeholder:"0.00"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"\uD83D\uDCCF Unit"}),(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsxs)("select",{value:W.unit,onChange:e=>O({...W,unit:e.target.value}),className:"w-full px-4 py-3 border border-[#2a2a2a] bg-[#0a0a0a] text-white rounded-xl focus:outline-none focus:ring-2 focus:ring-[#29E7CD] focus:border-[#29E7CD] transition-all duration-200 shadow-sm hover:shadow-md appearance-none cursor-pointer",children:[(0,s.jsx)("option",{value:"kg",children:"kg"}),(0,s.jsx)("option",{value:"g",children:"g"}),(0,s.jsx)("option",{value:"L",children:"L"}),(0,s.jsx)("option",{value:"mL",children:"mL"}),(0,s.jsx)("option",{value:"pcs",children:"pcs"}),(0,s.jsx)("option",{value:"box",children:"box"}),(0,s.jsx)("option",{value:"GM",children:"GM"}),(0,s.jsx)("option",{value:"PC",children:"PC"}),(0,s.jsx)("option",{value:"PACK",children:"PACK"}),(0,s.jsx)("option",{value:"BAG",children:"BAG"})]}),(0,s.jsx)("div",{className:"absolute inset-y-0 right-0 pr-3 flex items-center pointer-events-none",children:(0,s.jsx)("svg",{className:"h-5 w-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})})]})]})]}),(0,s.jsxs)("button",{type:"submit",className:"w-full bg-gradient-to-r from-[#29E7CD] to-[#3B82F6] text-white px-6 py-3 rounded-xl hover:from-[#29E7CD]/80 hover:to-[#3B82F6]/80 transition-all duration-200 shadow-lg hover:shadow-xl font-medium flex items-center justify-center space-x-2",children:[(0,s.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),(0,s.jsx)("span",{children:"Add Ingredient to Dish"})]})]})]}),(0,s.jsx)("div",{className:"mt-6 pt-4 border-t border-[#2a2a2a]/50",children:(0,s.jsxs)("div",{className:"bg-gradient-to-r from-[#D925C7]/10 to-[#29E7CD]/10 border border-[#D925C7]/30 p-4 rounded-2xl",children:[(0,s.jsxs)("div",{className:"mb-4",children:[(0,s.jsx)("h3",{className:"text-xl font-semibold text-white mb-1",children:"\uD83D\uDCDA Or Select Existing Recipe"}),(0,s.jsx)("p",{className:"text-sm text-gray-400",children:"Choose a recipe to load ingredients automatically"})]}),(0,s.jsxs)("select",{value:d,onChange:e=>c(e.target.value),className:"w-full px-4 py-3 border border-[#2a2a2a] bg-[#0a0a0a] text-white rounded-xl focus:outline-none focus:ring-2 focus:ring-[#D925C7] focus:border-[#D925C7] transition-all duration-200 shadow-sm hover:shadow-md",children:[(0,s.jsx)("option",{value:"",children:"Create new dish from scratch..."}),i.map(e=>(0,s.jsx)("option",{value:e.id,children:e.name},e.id))]})]})}),(0,s.jsxs)("div",{className:"mt-6 pt-4 border-t border-[#2a2a2a]/50",children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"\uD83C\uDF7D️ Number of Portions"}),(0,s.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,s.jsx)("input",{type:"number",min:"1",placeholder:"1",value:A,onChange:e=>B(Number(e.target.value)),className:"w-24 px-4 py-3 border border-[#2a2a2a] bg-[#0a0a0a] text-white rounded-xl focus:outline-none focus:ring-2 focus:ring-[#29E7CD] focus:border-[#29E7CD] transition-all duration-200 shadow-sm hover:shadow-md text-center font-semibold"}),(0,s.jsx)("span",{className:"text-sm text-gray-400",children:"portions"})]}),(0,s.jsx)("p",{className:"text-xs text-gray-500 mt-2",children:"This determines the cost per portion for your pricing calculations"})]})]})]}),(0,s.jsxs)("div",{className:"bg-[#1f1f1f] p-4 sm:p-6 rounded-lg shadow",children:[(0,s.jsx)("h2",{className:"text-lg sm:text-xl font-semibold mb-4",children:"Cost Analysis"}),x.length>0?(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsx)("div",{className:"block md:hidden",children:(0,s.jsx)("div",{className:"space-y-3",children:x.map((e,t)=>(0,s.jsxs)("div",{className:"p-3 bg-[#2a2a2a] rounded-lg border border-[#3a3a3a]",children:[(0,s.jsxs)("div",{className:"flex justify-between items-start mb-2",children:[(0,s.jsx)("h4",{className:"text-sm font-medium text-white",children:e.ingredientName}),(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsxs)("span",{className:"text-sm font-bold text-[#29E7CD]",children:["$",e.yieldAdjustedCost.toFixed(2)]}),(0,s.jsx)("button",{onClick:()=>er(e.ingredientId,e.quantity),className:"p-1 text-gray-400 hover:text-[#29E7CD] transition-colors duration-200",title:"Edit quantity",children:(0,s.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})})}),(0,s.jsx)("button",{onClick:()=>eo(e.ingredientId),className:"p-1 text-gray-400 hover:text-red-400 transition-colors duration-200",title:"Remove ingredient",children:(0,s.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})]}),L===e.ingredientId?(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)("input",{type:"number",value:I,onChange:e=>q(parseFloat(e.target.value)||0),className:"w-20 px-2 py-1 text-sm border border-[#3a3a3a] bg-[#0a0a0a] text-white rounded focus:outline-none focus:ring-1 focus:ring-[#29E7CD]",step:"0.1",min:"0"}),(0,s.jsx)("span",{className:"text-xs text-gray-400",children:e.unit})]}),(0,s.jsxs)("div",{className:"flex space-x-2",children:[(0,s.jsx)("button",{onClick:en,className:"px-3 py-1 text-xs bg-[#29E7CD] text-white rounded hover:bg-[#29E7CD]/80 transition-colors duration-200",children:"Save"}),(0,s.jsx)("button",{onClick:ea,className:"px-3 py-1 text-xs bg-gray-600 text-white rounded hover:bg-gray-500 transition-colors duration-200",children:"Cancel"})]})]}):(0,s.jsxs)("p",{className:"text-xs text-gray-400",children:[e.quantity," ",e.unit]})]},t))})}),(0,s.jsx)("div",{className:"hidden md:block overflow-x-auto",children:(0,s.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,s.jsx)("thead",{className:"bg-gray-50",children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Ingredient"}),(0,s.jsx)("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Qty"}),(0,s.jsx)("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Cost"}),(0,s.jsx)("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Actions"})]})}),(0,s.jsx)("tbody",{className:"bg-[#1f1f1f] divide-y divide-gray-200",children:x.map((e,t)=>(0,s.jsxs)("tr",{className:"hover:bg-[#2a2a2a]/50 transition-colors duration-200",children:[(0,s.jsx)("td",{className:"px-3 py-2 text-sm text-white",children:e.ingredientName}),(0,s.jsx)("td",{className:"px-3 py-2 text-sm text-gray-500",children:L===e.ingredientId?(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)("input",{type:"number",value:I,onChange:e=>q(parseFloat(e.target.value)||0),className:"w-20 px-2 py-1 text-sm border border-[#3a3a3a] bg-[#0a0a0a] text-white rounded focus:outline-none focus:ring-1 focus:ring-[#29E7CD]",step:"0.1",min:"0"}),(0,s.jsx)("span",{className:"text-xs text-gray-400",children:e.unit})]}):(0,s.jsxs)("span",{children:[e.quantity," ",e.unit]})}),(0,s.jsxs)("td",{className:"px-3 py-2 text-sm text-gray-500",children:["$",e.yieldAdjustedCost.toFixed(2)]}),(0,s.jsx)("td",{className:"px-3 py-2 text-sm",children:(0,s.jsx)("div",{className:"flex items-center space-x-2",children:L===e.ingredientId?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("button",{onClick:en,className:"px-2 py-1 text-xs bg-[#29E7CD] text-white rounded hover:bg-[#29E7CD]/80 transition-colors duration-200",children:"Save"}),(0,s.jsx)("button",{onClick:ea,className:"px-2 py-1 text-xs bg-gray-600 text-white rounded hover:bg-gray-500 transition-colors duration-200",children:"Cancel"})]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("button",{onClick:()=>er(e.ingredientId,e.quantity),className:"p-1 text-gray-400 hover:text-[#29E7CD] transition-colors duration-200",title:"Edit quantity",children:(0,s.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})})}),(0,s.jsx)("button",{onClick:()=>eo(e.ingredientId),className:"p-1 text-gray-400 hover:text-red-400 transition-colors duration-200",title:"Remove ingredient",children:(0,s.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})})})]},t))})]})}),(0,s.jsxs)("div",{className:"border-t pt-4",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center mb-2",children:[(0,s.jsx)("span",{className:"text-lg font-medium text-white",children:"Total COGS:"}),(0,s.jsxs)("span",{className:"text-lg font-bold text-[#29E7CD]",children:["$",em.toFixed(2)]})]}),A>0&&(0,s.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,s.jsx)("span",{className:"text-sm text-gray-400",children:"Cost per portion:"}),(0,s.jsxs)("span",{className:"text-sm font-medium text-white",children:["$",ex.toFixed(2)]})]}),ex>0&&(0,s.jsx)("div",{className:"mt-6 pt-4 border-t border-[#2a2a2a]",children:(0,s.jsxs)("div",{className:"mb-4",children:[(0,s.jsxs)("h3",{className:"text-lg font-semibold text-white mb-3 flex items-center",children:["\uD83D\uDCB0 Costing Tool",(0,s.jsx)("div",{className:"ml-2 w-2 h-2 bg-[#29E7CD] rounded-full animate-pulse"})]}),(0,s.jsxs)("div",{className:"mb-4",children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"\uD83C\uDFAF Target Gross Profit %"}),(0,s.jsx)("div",{className:"flex space-x-2",children:[60,65,70,75,80].map(e=>(0,s.jsxs)("button",{onClick:()=>V(e),className:"px-3 py-2 rounded-lg text-sm font-medium transition-all duration-200 ".concat($===e?"bg-gradient-to-r from-[#29E7CD] to-[#D925C7] text-white shadow-lg":"bg-[#2a2a2a] text-gray-300 hover:bg-[#2a2a2a]/80"),children:[e,"%"]},e))})]}),(0,s.jsxs)("div",{className:"mb-4",children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"\uD83D\uDCCA Pricing Strategy"}),(0,s.jsxs)("div",{className:"grid grid-cols-3 gap-2",children:[(0,s.jsx)("button",{onClick:()=>K("charm"),className:"px-3 py-2 rounded-lg text-sm font-medium transition-all duration-200 ".concat("charm"===Z?"bg-gradient-to-r from-[#29E7CD] to-[#D925C7] text-white shadow-lg":"bg-[#2a2a2a] text-gray-300 hover:bg-[#2a2a2a]/80"),children:"Charm ($19.95)"}),(0,s.jsx)("button",{onClick:()=>K("whole"),className:"px-3 py-2 rounded-lg text-sm font-medium transition-all duration-200 ".concat("whole"===Z?"bg-gradient-to-r from-[#29E7CD] to-[#D925C7] text-white shadow-lg":"bg-[#2a2a2a] text-gray-300 hover:bg-[#2a2a2a]/80"),children:"Whole ($20)"}),(0,s.jsx)("button",{onClick:()=>K("real"),className:"px-3 py-2 rounded-lg text-sm font-medium transition-all duration-200 ".concat("real"===Z?"bg-gradient-to-r from-[#29E7CD] to-[#D925C7] text-white shadow-lg":"bg-[#2a2a2a] text-gray-300 hover:bg-[#2a2a2a]/80"),children:"Real ($19.47)"})]})]}),(0,s.jsxs)("div",{className:"bg-gradient-to-br from-[#29E7CD]/10 to-[#D925C7]/10 border border-[#29E7CD]/30 p-4 rounded-2xl",children:[(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{className:"bg-[#2a2a2a]/30 p-3 rounded-xl border border-[#2a2a2a]/50",children:[(0,s.jsx)("div",{className:"text-xs text-gray-500 uppercase tracking-wide mb-1",children:"Food Cost"}),(0,s.jsxs)("div",{className:"text-xl font-bold text-white",children:["$",ex.toFixed(2)]}),(0,s.jsx)("div",{className:"text-xs text-gray-400",children:"per portion"})]}),(0,s.jsxs)("div",{className:"bg-[#2a2a2a]/30 p-3 rounded-xl border border-[#2a2a2a]/50",children:[(0,s.jsx)("div",{className:"text-xs text-gray-500 uppercase tracking-wide mb-1",children:"Sell Price (Excl GST)"}),(0,s.jsxs)("div",{className:"text-xl font-bold text-[#29E7CD]",children:["$",H.toFixed(2)]}),(0,s.jsx)("div",{className:"text-xs text-gray-400",children:"for your records"})]}),(0,s.jsxs)("div",{className:"bg-[#2a2a2a]/30 p-3 rounded-xl border border-[#2a2a2a]/50",children:[(0,s.jsx)("div",{className:"text-xs text-gray-500 uppercase tracking-wide mb-1",children:"Menu Price (Incl GST)"}),(0,s.jsxs)("div",{className:"text-xl font-bold text-[#D925C7]",children:["$",Q.toFixed(2)]}),(0,s.jsx)("div",{className:"text-xs text-gray-400",children:"what customer pays"})]}),(0,s.jsxs)("div",{className:"bg-[#2a2a2a]/30 p-3 rounded-xl border border-[#2a2a2a]/50",children:[(0,s.jsx)("div",{className:"text-xs text-gray-500 uppercase tracking-wide mb-1",children:"Gross Profit"}),(0,s.jsxs)("div",{className:"text-xl font-bold text-green-400",children:["$",(H-ex).toFixed(2)]}),(0,s.jsxs)("div",{className:"text-xs text-gray-400",children:[((H-ex)/H*100).toFixed(1),"% margin"]})]})]}),(0,s.jsx)("div",{className:"mt-4 pt-4 border-t border-[#2a2a2a]/50",children:(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{className:"bg-gradient-to-br from-[#D925C7]/20 to-[#29E7CD]/20 p-3 rounded-xl border border-[#D925C7]/30",children:[(0,s.jsx)("div",{className:"text-xs text-gray-500 uppercase tracking-wide mb-1",children:"Contributing Margin"}),(0,s.jsxs)("div",{className:"text-xl font-bold text-[#D925C7]",children:["$",(H-ex).toFixed(2)]}),(0,s.jsxs)("div",{className:"text-xs text-gray-400",children:[((H-ex)/H*100).toFixed(1),"% of revenue"]})]}),(0,s.jsxs)("div",{className:"bg-[#2a2a2a]/30 p-3 rounded-xl border border-[#2a2a2a]/50",children:[(0,s.jsx)("div",{className:"text-xs text-gray-500 uppercase tracking-wide mb-1",children:"Formula"}),(0,s.jsx)("div",{className:"text-sm text-gray-400",children:(0,s.jsx)("strong",{className:"text-[#D925C7]",children:"Revenue - Food Cost"})}),(0,s.jsx)("div",{className:"text-xs text-gray-500 mt-1",children:"Amount available to cover fixed costs and generate profit"})]})]})}),(0,s.jsx)("div",{className:"mt-4 pt-3 border-t border-[#2a2a2a]/50",children:(0,s.jsxs)("div",{className:"flex justify-between items-center text-sm",children:[(0,s.jsx)("span",{className:"text-gray-400",children:"GST Amount (10%):"}),(0,s.jsxs)("span",{className:"text-white font-medium",children:["$",(Q-H).toFixed(2)]})]})})]})]})}),(0,s.jsxs)("div",{className:"mt-4 pt-4 border-t border-[#2a2a2a]",children:[(0,s.jsx)("button",{onClick:ed,className:"w-full bg-gradient-to-r from-[#D925C7] to-[#29E7CD] text-white px-4 py-3 rounded-lg hover:from-[#D925C7]/80 hover:to-[#29E7CD]/80 transition-all duration-200 shadow-lg hover:shadow-xl font-medium",children:"\uD83D\uDCBE Save as Recipe in Recipe Book"}),(0,s.jsx)("p",{className:"text-xs text-gray-400 mt-2 text-center",children:"This will save the current COGS calculation as a recipe in your Recipe Book"})]})]})]}):(0,s.jsx)("div",{className:"text-center py-8 text-gray-500",children:d?"No ingredients added to this recipe yet.":"Select a recipe to calculate COGS."})]})]}),0===i.length&&(0,s.jsxs)("div",{className:"text-center py-12",children:[(0,s.jsx)("div",{className:"text-gray-400 text-6xl mb-4",children:"\uD83D\uDCCA"}),(0,s.jsx)("h3",{className:"text-lg font-medium text-white mb-2",children:"No recipes available"}),(0,s.jsx)("p",{className:"text-gray-500 mb-4",children:"Create some recipes first to calculate their COGS."}),(0,s.jsx)("a",{href:"/webapp/recipes",className:"bg-gradient-to-r from-[#29E7CD] to-[#D925C7] text-white px-4 py-2 rounded-lg hover:from-[#29E7CD]/80 hover:to-[#D925C7]/80 transition-colors",children:"Go to Recipes"})]})]})})}},3556:(e,t,i)=>{Promise.resolve().then(i.bind(i,3272))},8081:(e,t,i)=>{"use strict";function s(e){return e?e.split(" ").map(e=>{let t=e.toLowerCase();return"and"===t||"or"===t||"the"===t||"of"===t||"in"===t||"with"===t||"for"===t||"to"===t||"from"===t?t:e.charAt(0).toUpperCase()+e.slice(1).toLowerCase()}).join(" "):""}function r(e){return s(e)}function n(e){return s(e)}function a(e){return s(e)}function o(e){return s(e)}function l(e){return s(e)}function d(e){return s(e)}function c(e){return s(e)}i.d(t,{$m:()=>c,M$:()=>l,SC:()=>a,Ts:()=>n,_J:()=>r,xQ:()=>d,zl:()=>o})}},e=>{e.O(0,[354,441,964,358],()=>e(e.s=3556)),_N_E=e.O()}]);