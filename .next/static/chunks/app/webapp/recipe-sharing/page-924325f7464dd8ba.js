(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4748],{44800:(e,a,t)=>{"use strict";t.r(a),t.d(a,{default:()=>l});var s=t(95155),r=t(12115),i=t(34908),n=t(12104);function l(){let{t:e}=(0,i.Bd)(),[a,t]=(0,r.useState)([]),[l,c]=(0,r.useState)([]),[d,o]=(0,r.useState)(!1),[h,x]=(0,r.useState)(null),[p,m]=(0,r.useState)(!1),[u,b]=(0,r.useState)({recipeId:"",shareType:"pdf",recipientEmail:"",notes:""}),g="user-123";(0,r.useEffect)(()=>{f(),j()},[]);let f=async()=>{try{let e=await fetch("/api/recipes?userId=".concat(g)),a=await e.json();a.success&&t(a.data)}catch(e){console.error("Failed to fetch recipes:",e)}},j=async()=>{try{let e=await fetch("/api/recipe-share?userId=".concat(g)),a=await e.json();a.success?c(a.data):x(a.message||"Failed to fetch recipe shares")}catch(e){x("Failed to fetch recipe shares")}finally{o(!1)}},y=async e=>{e.preventDefault();try{let e=await fetch("/api/recipe-share",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(u)}),a=await e.json();a.success?(await j(),N(),x(null),"pdf"===u.shareType&&a.data.pdfContent&&v(a.data.recipe,a.data.pdfContent)):x(a.message||"Failed to share recipe")}catch(e){x("Failed to share recipe")}},v=(e,a)=>{let t=document.createElement("a"),s=new Blob([a],{type:"text/plain"});t.href=URL.createObjectURL(s),t.download="".concat(e.name.replace(/[^a-z0-9]/gi,"_").toLowerCase(),"_recipe.txt"),document.body.appendChild(t),t.click(),document.body.removeChild(t)},N=()=>{b({recipeId:"",shareType:"pdf",recipientEmail:"",notes:""}),m(!1)};return d?(0,s.jsx)("div",{className:"min-h-screen bg-[#0a0a0a] text-white",children:(0,s.jsxs)("div",{className:"container mx-auto px-4 py-8",children:[(0,s.jsx)(n.O0,{variant:"stats",height:"64px"}),(0,s.jsx)("div",{className:"space-y-4 mt-6",children:(0,s.jsx)(n.O0,{variant:"card",count:5,height:"80px"})})]})}):(0,s.jsx)("div",{className:"min-h-screen bg-[#0a0a0a] text-white",children:(0,s.jsxs)("div",{className:"container mx-auto px-4 py-8",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-8",children:[(0,s.jsxs)("div",{children:[(0,s.jsxs)("h1",{className:"text-3xl font-bold text-white mb-2",children:["\uD83D\uDCE4 ",e("recipeSharing.title","Recipe Sharing")]}),(0,s.jsx)("p",{className:"text-gray-400",children:e("recipeSharing.subtitle","Share your recipes as PDFs or links")})]}),(0,s.jsxs)("button",{onClick:()=>m(!0),className:"px-6 py-3 bg-gradient-to-r from-[#29E7CD] to-[#D925C7] text-white rounded-2xl hover:shadow-xl transition-all duration-200 font-semibold",children:["+ ",e("recipeSharing.shareRecipe","Share Recipe")]})]}),h&&(0,s.jsx)("div",{className:"mb-6 p-4 bg-red-400/10 border border-red-400/20 rounded-2xl",children:(0,s.jsx)("p",{className:"text-red-400",children:h})}),(0,s.jsx)("div",{className:"space-y-4",children:0===l.length?(0,s.jsxs)("div",{className:"text-center py-12",children:[(0,s.jsx)("div",{className:"w-20 h-20 bg-gradient-to-br from-[#29E7CD]/20 to-[#D925C7]/20 rounded-2xl flex items-center justify-center mx-auto mb-4",children:(0,s.jsx)("span",{className:"text-3xl",children:"\uD83D\uDCE4"})}),(0,s.jsx)("h3",{className:"text-xl font-semibold text-white mb-2",children:e("recipeSharing.noShares","No Recipe Shares")}),(0,s.jsx)("p",{className:"text-gray-400 mb-6",children:e("recipeSharing.noSharesDesc","Share your recipes with others as PDFs or links")}),(0,s.jsx)("button",{onClick:()=>m(!0),className:"px-6 py-3 bg-gradient-to-r from-[#29E7CD] to-[#D925C7] text-white rounded-2xl hover:shadow-xl transition-all duration-200 font-semibold",children:e("recipeSharing.shareFirstRecipe","Share Your First Recipe")})]}):l.map(a=>(0,s.jsx)("div",{className:"bg-[#1f1f1f] border border-[#2a2a2a] rounded-2xl p-6 hover:shadow-xl hover:border-[#29E7CD]/50 transition-all duration-200",children:(0,s.jsx)("div",{className:"flex items-center justify-between",children:(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-4 mb-3",children:[(0,s.jsx)("div",{className:"w-12 h-12 bg-gradient-to-br from-[#29E7CD]/20 to-[#D925C7]/20 rounded-xl flex items-center justify-center",children:(0,s.jsx)("span",{className:"text-lg",children:(e=>{switch(e){case"pdf":return"\uD83D\uDCC4";case"link":return"\uD83D\uDD17";case"email":return"\uD83D\uDCE7";default:return"\uD83D\uDCE4"}})(a.share_type)})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"font-semibold text-white text-lg",children:a.recipes.name}),(0,s.jsxs)("p",{className:"text-sm text-gray-400",children:[a.share_type.toUpperCase()," â€¢ ",a.recipient_email||"No recipient"]})]})]}),(0,s.jsxs)("div",{className:"flex items-center space-x-4 mb-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-xs text-gray-400 mb-1",children:e("recipeSharing.status","Status")}),(0,s.jsx)("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ".concat((e=>{switch(e){case"pending":return"text-yellow-400 bg-yellow-400/10";case"sent":return"text-blue-400 bg-blue-400/10";case"delivered":return"text-green-400 bg-green-400/10";case"failed":return"text-red-400 bg-red-400/10";default:return"text-gray-400 bg-gray-400/10"}})(a.status)),children:a.status.charAt(0).toUpperCase()+a.status.slice(1)})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-xs text-gray-400 mb-1",children:e("recipeSharing.shared","Shared")}),(0,s.jsx)("p",{className:"text-white font-semibold",children:new Date(a.created_at).toLocaleDateString()})]})]}),a.notes&&(0,s.jsx)("p",{className:"text-sm text-gray-300",children:a.notes})]})})},a.id))}),p&&(0,s.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50",children:(0,s.jsxs)("div",{className:"bg-[#1f1f1f] border border-[#2a2a2a] rounded-3xl p-6 w-full max-w-md",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,s.jsx)("h2",{className:"text-xl font-semibold text-white",children:e("recipeSharing.shareRecipe","Share Recipe")}),(0,s.jsx)("button",{onClick:N,className:"p-2 text-gray-400 hover:text-white transition-colors",children:(0,s.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,s.jsxs)("form",{onSubmit:y,className:"space-y-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:e("recipeSharing.selectRecipe","Select Recipe")}),(0,s.jsxs)("select",{value:u.recipeId,onChange:e=>b({...u,recipeId:e.target.value}),className:"w-full px-4 py-3 bg-[#2a2a2a] border border-[#2a2a2a] rounded-xl text-white focus:ring-2 focus:ring-[#29E7CD] focus:border-transparent",required:!0,children:[(0,s.jsx)("option",{value:"",children:e("recipeSharing.chooseRecipe","Choose a recipe to share")}),a.map(e=>(0,s.jsx)("option",{value:e.id,children:e.name},e.id))]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:e("recipeSharing.shareType","Share Type")}),(0,s.jsxs)("select",{value:u.shareType,onChange:e=>b({...u,shareType:e.target.value}),className:"w-full px-4 py-3 bg-[#2a2a2a] border border-[#2a2a2a] rounded-xl text-white focus:ring-2 focus:ring-[#29E7CD] focus:border-transparent",required:!0,children:[(0,s.jsx)("option",{value:"pdf",children:"\uD83D\uDCC4 PDF Download"}),(0,s.jsx)("option",{value:"link",children:"\uD83D\uDD17 Shareable Link"}),(0,s.jsx)("option",{value:"email",children:"\uD83D\uDCE7 Email Recipe"})]})]}),"email"===u.shareType&&(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:e("recipeSharing.recipientEmail","Recipient Email")}),(0,s.jsx)("input",{type:"email",value:u.recipientEmail,onChange:e=>b({...u,recipientEmail:e.target.value}),className:"w-full px-4 py-3 bg-[#2a2a2a] border border-[#2a2a2a] rounded-xl text-white focus:ring-2 focus:ring-[#29E7CD] focus:border-transparent",placeholder:"recipient@example.com",required:"email"===u.shareType})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:e("recipeSharing.notes","Notes")}),(0,s.jsx)("textarea",{value:u.notes,onChange:e=>b({...u,notes:e.target.value}),className:"w-full px-4 py-3 bg-[#2a2a2a] border border-[#2a2a2a] rounded-xl text-white focus:ring-2 focus:ring-[#29E7CD] focus:border-transparent",rows:3,placeholder:String(e("recipeSharing.notesPlaceholder","Optional message to include with the shared recipe"))})]}),(0,s.jsxs)("div",{className:"flex space-x-3 pt-4",children:[(0,s.jsx)("button",{type:"button",onClick:N,className:"flex-1 px-4 py-3 bg-[#2a2a2a] text-gray-300 rounded-xl hover:bg-[#2a2a2a]/80 transition-colors",children:e("recipeSharing.cancel","Cancel")}),(0,s.jsx)("button",{type:"submit",className:"flex-1 px-4 py-3 bg-gradient-to-r from-[#29E7CD] to-[#D925C7] text-white rounded-xl hover:shadow-xl transition-all duration-200 font-semibold",children:e("recipeSharing.share","Share")})]})]})]})})]})})}},46535:(e,a,t)=>{Promise.resolve().then(t.bind(t,44800))}},e=>{e.O(0,[2076,563,8650,8405,9420,622,7979,1899,4450,9324,8585,9592,433,2652,3494,2574,9173,3023,1356,309,4191,2834,957,6691,1151,9473,9219,6053,3376,7358],()=>e(e.s=46535)),_N_E=e.O()}]);