(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4710],{23847:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>v});var s=r(95155),a=r(67928),n=r(12115),i=r(34908),d=r(12104),l=r(4929),c=r(1590);let o=()=>{let{addWarning:e}=(0,c.h)();return(0,s.jsx)("button",{onClick:()=>{e({type:"warning",title:"Temperature Monitoring Alert",message:"No food items have been temperature checked today. Ensure all food items are properly monitored for safety compliance.",action:{label:"Go to Temperature Logs",onClick:()=>{window.location.href="/webapp/temperature"}},dismissible:!0,autoHide:!1})},className:"px-4 py-2 bg-yellow-500 text-black rounded-lg hover:bg-yellow-400 transition-colors",children:"Test Global Warning"})};var m=r(85040);function x(e){let{stats:t}=e,{t:r}=(0,i.Bd)();return(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[(0,s.jsxs)("div",{className:"bg-[#1f1f1f] p-6 rounded-3xl shadow-lg border border-[#2a2a2a] hover:shadow-xl transition-all duration-200",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-gray-400 text-sm font-medium mb-1",children:"Total Ingredients"}),(0,s.jsx)("p",{className:"text-3xl font-bold text-white",children:t.totalIngredients})]}),(0,s.jsx)("div",{className:"w-12 h-12 rounded-2xl bg-gradient-to-br from-[#29E7CD]/20 to-[#29E7CD]/10 flex items-center justify-center",children:(0,s.jsx)("span",{className:"text-2xl",children:"\uD83E\uDD58"})})]}),(0,s.jsx)("div",{className:"mt-4",children:(0,s.jsx)("p",{className:"text-xs text-gray-500",children:"Kitchen inventory items"})})]}),(0,s.jsxs)("div",{className:"bg-[#1f1f1f] p-6 rounded-3xl shadow-lg border border-[#2a2a2a] hover:shadow-xl transition-all duration-200",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-gray-400 text-sm font-medium mb-1",children:"Total Recipes"}),(0,s.jsx)("p",{className:"text-3xl font-bold text-white",children:t.totalRecipes})]}),(0,s.jsx)("div",{className:"w-12 h-12 rounded-2xl bg-gradient-to-br from-[#3B82F6]/20 to-[#3B82F6]/10 flex items-center justify-center",children:(0,s.jsx)("span",{className:"text-2xl",children:"\uD83D\uDCD6"})})]}),(0,s.jsx)("div",{className:"mt-4",children:(0,s.jsx)("p",{className:"text-xs text-gray-500",children:"Recipe cards created"})})]}),(0,s.jsxs)("div",{className:"bg-[#1f1f1f] p-6 rounded-3xl shadow-lg border border-[#2a2a2a] hover:shadow-xl transition-all duration-200",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-gray-400 text-sm font-medium mb-1",children:"Menu Dishes"}),(0,s.jsx)("p",{className:"text-3xl font-bold text-white",children:t.totalMenuDishes})]}),(0,s.jsx)("div",{className:"w-12 h-12 rounded-2xl bg-gradient-to-br from-[#D925C7]/20 to-[#D925C7]/10 flex items-center justify-center",children:(0,s.jsx)("span",{className:"text-2xl",children:"\uD83C\uDF7D️"})})]}),(0,s.jsx)("div",{className:"mt-4",children:(0,s.jsx)("p",{className:"text-xs text-gray-500",children:"Items on your menu"})})]}),(0,s.jsxs)("div",{className:"bg-[#1f1f1f] p-6 rounded-3xl shadow-lg border border-[#2a2a2a] hover:shadow-xl transition-all duration-200",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-gray-400 text-sm font-medium mb-1",children:"Avg. Dish Price"}),(0,s.jsxs)("p",{className:"text-3xl font-bold text-white",children:["$",t.averageDishPrice.toFixed(2)]})]}),(0,s.jsx)("div",{className:"w-12 h-12 rounded-2xl bg-gradient-to-br from-[#F59E0B]/20 to-[#F59E0B]/10 flex items-center justify-center",children:(0,s.jsx)("span",{className:"text-2xl",children:"\uD83D\uDCB0"})})]}),(0,s.jsx)("div",{className:"mt-4",children:(0,s.jsx)("p",{className:"text-xs text-gray-500",children:"Average selling price"})})]})]})}var h=r(52619),u=r.n(h);function p(){let{t:e}=(0,i.Bd)();return(0,s.jsxs)("div",{className:"bg-[#1f1f1f] p-6 rounded-3xl shadow-lg border border-[#2a2a2a] mb-8",children:[(0,s.jsxs)("div",{className:"mb-6",children:[(0,s.jsx)("h2",{className:"text-2xl font-semibold text-white mb-2",children:"\uD83D\uDE80 Quick Actions"}),(0,s.jsx)("p",{className:"text-gray-400",children:"Get started with your kitchen management"})]}),(0,s.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[{title:"Add Ingredient",description:"Add new ingredients to your inventory",icon:"\uD83E\uDD58",href:"/webapp/ingredients",color:"from-[#29E7CD] to-[#D925C7]"},{title:"Create Recipe",description:"Build new recipes with cost calculation",icon:"\uD83D\uDCD6",href:"/webapp/recipes",color:"from-[#3B82F6] to-[#29E7CD]"},{title:"Calculate COGS",description:"Optimize menu pricing and margins",icon:"\uD83D\uDCB0",href:"/webapp/cogs",color:"from-[#D925C7] to-[#3B82F6]"},{title:"Setup Database",description:"Initialize your kitchen management system",icon:"⚙️",href:"/webapp/setup",color:"from-[#F59E0B] to-[#D925C7]"}].map((e,t)=>(0,s.jsx)(u(),{href:e.href,className:"group bg-[#2a2a2a]/30 p-6 rounded-2xl border border-[#2a2a2a] hover:border-[#29E7CD]/50 transition-all duration-200 hover:shadow-lg hover:shadow-[#29E7CD]/10",children:(0,s.jsxs)("div",{className:"flex flex-col items-center text-center space-y-4",children:[(0,s.jsx)("div",{className:"w-16 h-16 rounded-2xl bg-gradient-to-br ".concat(e.color," flex items-center justify-center group-hover:scale-110 transition-transform duration-200"),children:(0,s.jsx)("span",{className:"text-3xl",children:e.icon})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"text-lg font-semibold text-white group-hover:text-[#29E7CD] transition-colors duration-200",children:e.title}),(0,s.jsx)("p",{className:"text-sm text-gray-400 mt-1",children:e.description})]})]})},e.title))})]})}let g=async(e,t)=>{try{let t=await e();return{success:!0,data:t}}catch(e){return{success:!1,error:(e=>{var t,r;if(console.error("API Error:",e),!e.response)return{message:"Network error - please check your connection",code:"NETWORK_ERROR",status:0};let s=(null==(t=e.response)?void 0:t.status)||500,a=null==(r=e.response)?void 0:r.data;switch(s){case 400:return{message:(null==a?void 0:a.message)||"Invalid request",code:"BAD_REQUEST",status:400,details:a};case 401:return{message:"Authentication required",code:"UNAUTHORIZED",status:401};case 403:return{message:"Access denied",code:"FORBIDDEN",status:403};case 404:return{message:"Resource not found",code:"NOT_FOUND",status:404};case 500:return{message:(null==a?void 0:a.message)||"Internal server error",code:"SERVER_ERROR",status:500,details:a};default:return{message:(null==a?void 0:a.message)||"An unexpected error occurred",code:"UNKNOWN_ERROR",status:s,details:a}}})(e),data:t}}},f=e=>{let{error:t,context:r,onRetry:a,className:n=""}=e;return(0,s.jsxs)("div",{className:"bg-[#1f1f1f] p-6 rounded-3xl shadow-lg border border-[#2a2a2a] max-w-md mx-auto ".concat(n),children:[(0,s.jsx)("div",{className:"flex items-center justify-center mb-4",children:(0,s.jsx)("div",{className:"w-12 h-12 rounded-full bg-gradient-to-r ".concat((e=>{switch(e){case"NETWORK_ERROR":return"from-orange-500 to-orange-600";case"SERVER_ERROR":return"from-red-500 to-red-600";case"NOT_FOUND":return"from-blue-500 to-blue-600";default:return"from-gray-500 to-gray-600"}})(t.code)," flex items-center justify-center"),children:(0,s.jsx)("div",{className:"text-white",children:(e=>{switch(e){case"NETWORK_ERROR":return(0,s.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8.111 16.404a5.5 5.5 0 017.778 0M12 20h.01m-7.08-7.071c3.904-3.905 10.236-3.905 14.141 0M1.394 9.393c5.857-5.857 15.355-5.857 21.213 0"})});case"SERVER_ERROR":return(0,s.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})});case"NOT_FOUND":return(0,s.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9.172 16.172a4 4 0 015.656 0M9 12h6m-6-4h6m2 5.291A7.962 7.962 0 0112 15c-2.34 0-4.467-.881-6.08-2.33"})});default:return(0,s.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}})(t.code)})})}),(0,s.jsx)("h2",{className:"text-xl font-semibold text-white mb-2 text-center",children:r?"".concat(r," Error"):"API Error"}),(0,s.jsx)("p",{className:"text-gray-400 text-center mb-4",children:t.message}),t.code&&(0,s.jsx)("div",{className:"text-center mb-4",children:(0,s.jsxs)("span",{className:"inline-block bg-[#2a2a2a] text-gray-400 px-3 py-1 rounded-full text-sm",children:["Error Code: ",t.code]})}),a&&(0,s.jsx)("div",{className:"flex justify-center",children:(0,s.jsx)("button",{onClick:a,className:"bg-gradient-to-r from-[#29E7CD] to-[#D925C7] text-white px-6 py-2 rounded-2xl font-medium hover:shadow-xl transition-all duration-200",children:"Try Again"})}),!1]})};function j(){let{t:e}=(0,i.Bd)(),{data:t,loading:r,error:l,execute:c}=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{immediate:r=!1,retryOnError:s=!1,maxRetries:a=3}=t,[i,d]=(0,n.useState)(null),[l,c]=(0,n.useState)(!1),[o,m]=(0,n.useState)(null),x=(0,n.useCallback)(async function(){for(var t=arguments.length,r=Array(t),s=0;s<t;s++)r[s]=arguments[s];c(!0),m(null);try{let t=await g(()=>e(...r));return t.success&&void 0!==t.data?(d(t.data),m(null)):(m(t.error||null),d(null)),t}catch(t){let e={message:"An unexpected error occurred",code:"UNEXPECTED_ERROR"};return m(e),d(null),{success:!1,error:e}}finally{c(!1)}},[e]),h=(0,n.useCallback)(()=>{d(null),m(null),c(!1)},[]);return(0,n.useEffect)(()=>{r&&x()},[r,x]),{data:i,loading:l,error:o,execute:x,reset:h}}(async()=>{let e=[];try{let{data:t,error:r}=await a.ND.from("ingredients").select("id, ingredient_name, created_at, updated_at").order("updated_at",{ascending:!1}).limit(3);!r&&t&&t.forEach(t=>{e.push({id:t.id,type:"ingredient",name:t.ingredient_name,action:t.created_at===t.updated_at?"created":"updated",created_at:t.updated_at})});let{data:s,error:n}=await a.ND.from("recipes").select("id, recipe_name, created_at, updated_at").order("updated_at",{ascending:!1}).limit(3);!n&&s&&s.forEach(t=>{e.push({id:t.id,type:"recipe",name:t.recipe_name,action:t.created_at===t.updated_at?"created":"updated",created_at:t.updated_at})});let{data:i,error:d}=await a.ND.from("menu_dishes").select("id, dish_name, created_at, updated_at").order("updated_at",{ascending:!1}).limit(3);return!d&&i&&i.forEach(t=>{e.push({id:t.id,type:"menu_dish",name:t.dish_name,action:t.created_at===t.updated_at?"created":"updated",created_at:t.updated_at})}),e.sort((e,t)=>new Date(t.created_at).getTime()-new Date(e.created_at).getTime())}catch(e){throw console.error("Error fetching recent activity:",e),e}},{immediate:!0});return r&&!t?(0,s.jsx)("div",{className:"bg-[#1f1f1f] p-6 rounded-3xl shadow-lg border border-[#2a2a2a]",children:(0,s.jsx)(d.O0,{variant:"list",count:5,height:"64px"})}):l?(0,s.jsx)(f,{error:l,context:"Recent Activity",onRetry:c,className:"bg-[#1f1f1f] p-6 rounded-3xl shadow-lg border border-[#2a2a2a]"}):t&&0!==t.length?(0,s.jsxs)("div",{className:"bg-[#1f1f1f] p-6 rounded-3xl shadow-lg border border-[#2a2a2a]",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,s.jsx)("h2",{className:"text-xl font-semibold text-white",children:"Recent Activity"}),(0,s.jsx)("button",{onClick:c,className:"text-[#29E7CD] hover:text-[#D925C7] transition-colors duration-200",title:"Refresh activity",children:(0,s.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})})})]}),(0,s.jsx)("div",{className:"space-y-4",children:t.slice(0,5).map(e=>(0,s.jsxs)("div",{className:"flex items-center space-x-4 p-3 rounded-2xl bg-[#2a2a2a]/30 hover:bg-[#2a2a2a]/50 transition-colors duration-200",children:[(0,s.jsx)("div",{className:"flex-shrink-0",children:(0,s.jsx)("div",{className:"w-10 h-10 rounded-full flex items-center justify-center ".concat("ingredient"===e.type?"bg-blue-500/20":"recipe"===e.type?"bg-green-500/20":"bg-purple-500/20"),children:(0,s.jsxs)("svg",{className:"w-5 h-5 ".concat("ingredient"===e.type?"text-blue-400":"recipe"===e.type?"text-green-400":"text-purple-400"),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:["ingredient"===e.type&&(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"}),"recipe"===e.type&&(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"}),"menu_dish"===e.type&&(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})]})})}),(0,s.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,s.jsx)("p",{className:"text-white font-medium truncate",children:e.name}),(0,s.jsxs)("p",{className:"text-gray-400 text-sm",children:["created"===e.action?"Created":"Updated"," • ",new Date(e.created_at).toLocaleDateString()]})]}),(0,s.jsx)("div",{className:"flex-shrink-0",children:(0,s.jsx)("span",{className:"px-2 py-1 rounded-full text-xs font-medium ".concat("ingredient"===e.type?"bg-blue-500/20 text-blue-400":"recipe"===e.type?"bg-green-500/20 text-green-400":"bg-purple-500/20 text-purple-400"),children:e.type.replace("_"," ")})})]},e.id))})]}):(0,s.jsxs)("div",{className:"bg-[#1f1f1f] p-6 rounded-3xl shadow-lg border border-[#2a2a2a]",children:[(0,s.jsx)("div",{className:"flex items-center justify-center mb-4",children:(0,s.jsx)("div",{className:"w-12 h-12 rounded-full bg-gradient-to-r from-[#29E7CD] to-[#D925C7] flex items-center justify-center",children:(0,s.jsx)("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})})})}),(0,s.jsx)("h2",{className:"text-xl font-semibold text-white mb-2 text-center",children:"No Recent Activity"}),(0,s.jsx)("p",{className:"text-gray-400 text-center",children:"Start by adding some ingredients or recipes to see recent activity here."})]})}function b(){let{t:e}=(0,i.Bd)(),[t,r]=(0,n.useState)({totalIngredients:0,totalRecipes:0,totalMenuDishes:0,averageDishPrice:0}),[l,c]=(0,n.useState)(!1),[h,u]=(0,n.useState)([]),[g,f]=(0,n.useState)([]);return((0,n.useEffect)(()=>{(async()=>{try{let{count:e}=await a.ND.from("ingredients").select("*",{count:"exact",head:!0}),{count:t}=await a.ND.from("recipes").select("*",{count:"exact",head:!0}),{data:s}=await a.ND.from("menu_dishes").select("selling_price"),n=(null==s?void 0:s.length)||0,i=n>0&&s?s.reduce((e,t)=>e+(t.selling_price||0),0)/n:0;r({totalIngredients:e||0,totalRecipes:t||0,totalMenuDishes:n,averageDishPrice:i})}catch(e){}finally{}})()},[]),(0,n.useEffect)(()=>{(async()=>{try{let{data:e}=await a.ND.from("temperature_logs").select("*").order("log_date",{ascending:!1}).order("log_time",{ascending:!1}),{data:t}=await a.ND.from("temperature_equipment").select("*").eq("is_active",!0);u(e||[]),f(t||[])}catch(e){console.error("Error fetching temperature data:",e)}})()},[]),(0,m.R)({allLogs:h,equipment:g}),l)?(0,s.jsx)(d.JQ,{}):(0,s.jsx)("div",{className:"min-h-screen bg-[#0a0a0a] p-4 sm:p-6",children:(0,s.jsxs)("div",{className:"max-w-7xl mx-auto",children:[(0,s.jsxs)("div",{className:"mb-8",children:[(0,s.jsxs)("h1",{className:"text-4xl font-bold text-white mb-2",children:["\uD83C\uDFE0 ",e("dashboard.title","Kitchen Management Dashboard")]}),(0,s.jsx)("p",{className:"text-gray-400",children:e("dashboard.subtitle","Welcome back! Here's your kitchen overview")}),(0,s.jsx)("div",{className:"mt-4",children:(0,s.jsx)(o,{})})]}),(0,s.jsx)(x,{stats:t}),(0,s.jsx)(p,{}),(0,s.jsx)(j,{})]})})}function v(){return(0,s.jsx)(l.tH,{children:(0,s.jsx)(b,{})})}},35669:(e,t,r)=>{Promise.resolve().then(r.bind(r,23847))}},e=>{e.O(0,[8888,1459,563,8650,8405,9420,622,7979,1899,4450,9324,8585,9592,433,2652,3494,2574,9173,3023,1356,309,4191,2834,957,6691,1151,9473,9219,6053,3376,2076,7358],()=>e(e.s=35669)),_N_E=e.O()}]);