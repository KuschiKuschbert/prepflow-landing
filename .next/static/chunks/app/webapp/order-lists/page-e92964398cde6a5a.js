(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7649],{1634:(e,t,s)=>{Promise.resolve().then(s.bind(s,14201))},14201:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>l});var r=s(95155),a=s(12115),i=s(34908),n=s(12104);function l(){let{t:e}=(0,i.Bd)(),[t,s]=(0,a.useState)([]),[l,d]=(0,a.useState)([]),[o,c]=(0,a.useState)([]),[x,m]=(0,a.useState)(!1),[u,h]=(0,a.useState)(null),[p,g]=(0,a.useState)(!1),[b,f]=(0,a.useState)(null),[j,v]=(0,a.useState)({supplierId:"",name:"",notes:"",items:[]}),y="user-123";(0,a.useEffect)(()=>{N(),w(),C()},[]);let N=async()=>{try{let e=await fetch("/api/order-lists?userId=".concat(y)),t=await e.json();t.success?s(t.data):h(t.message||"Failed to fetch order lists")}catch(e){h("Failed to fetch order lists")}finally{m(!1)}},w=async()=>{try{let e=await fetch("/api/suppliers?userId=".concat(y)),t=await e.json();t.success&&d(t.data)}catch(e){console.error("Failed to fetch suppliers:",e)}},C=async()=>{try{let e=await fetch("/api/ingredients?userId=".concat(y)),t=await e.json();t.success&&c(t.data)}catch(e){console.error("Failed to fetch ingredients:",e)}},L=async e=>{e.preventDefault();try{let e=b?"PUT":"POST",t=b?{id:b.id,supplierId:j.supplierId,name:j.name,notes:j.notes,status:"draft",items:j.items.filter(e=>e.ingredientId&&e.quantity)}:{userId:y,supplierId:j.supplierId,name:j.name,notes:j.notes,items:j.items.filter(e=>e.ingredientId&&e.quantity)},s=await fetch("/api/order-lists",{method:e,headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}),r=await s.json();r.success?(await N(),I(),h(null)):h(r.message||"Failed to save order list")}catch(e){h("Failed to save order list")}},D=async e=>{if(confirm("Are you sure you want to delete this order list?"))try{let t=await fetch("/api/order-lists?id=".concat(e),{method:"DELETE"}),s=await t.json();s.success?await N():h(s.message||"Failed to delete order list")}catch(e){h("Failed to delete order list")}},k=async(e,t)=>{try{let s=await fetch("/api/order-lists",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:e,status:t})}),r=await s.json();r.success?await N():h(r.message||"Failed to update status")}catch(e){h("Failed to update status")}},E=(e,t,s)=>{let r=[...j.items];r[e]={...r[e],[t]:s},v({...j,items:r})},I=()=>{v({supplierId:"",name:"",notes:"",items:[]}),g(!1),f(null)};return x?(0,r.jsx)("div",{className:"min-h-screen bg-[#0a0a0a] text-white",children:(0,r.jsxs)("div",{className:"container mx-auto px-4 py-8",children:[(0,r.jsx)(n.O0,{variant:"stats",height:"64px"}),(0,r.jsx)("div",{className:"space-y-4 mt-6",children:(0,r.jsx)(n.O0,{variant:"card",count:5,height:"80px"})})]})}):(0,r.jsx)("div",{className:"min-h-screen bg-[#0a0a0a] text-white",children:(0,r.jsxs)("div",{className:"container mx-auto px-4 py-8",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-8",children:[(0,r.jsxs)("div",{children:[(0,r.jsxs)("h1",{className:"text-3xl font-bold text-white mb-2",children:["\uD83D\uDCCB ",e("orderLists.title","Order Lists")]}),(0,r.jsx)("p",{className:"text-gray-400",children:e("orderLists.subtitle","Create and manage supplier order lists")})]}),(0,r.jsxs)("button",{onClick:()=>g(!0),className:"px-6 py-3 bg-gradient-to-r from-[#29E7CD] to-[#D925C7] text-white rounded-2xl hover:shadow-xl transition-all duration-200 font-semibold",children:["+ ",e("orderLists.createOrderList","Create Order List")]})]}),u&&(0,r.jsx)("div",{className:"mb-6 p-4 bg-red-400/10 border border-red-400/20 rounded-2xl",children:(0,r.jsx)("p",{className:"text-red-400",children:u})}),(0,r.jsx)("div",{className:"space-y-4",children:0===t.length?(0,r.jsxs)("div",{className:"text-center py-12",children:[(0,r.jsx)("div",{className:"w-20 h-20 bg-gradient-to-br from-[#29E7CD]/20 to-[#D925C7]/20 rounded-2xl flex items-center justify-center mx-auto mb-4",children:(0,r.jsx)("span",{className:"text-3xl",children:"\uD83D\uDCCB"})}),(0,r.jsx)("h3",{className:"text-xl font-semibold text-white mb-2",children:e("orderLists.noOrderLists","No Order Lists")}),(0,r.jsx)("p",{className:"text-gray-400 mb-6",children:e("orderLists.noOrderListsDesc","Create your first order list to streamline supplier ordering")}),(0,r.jsx)("button",{onClick:()=>g(!0),className:"px-6 py-3 bg-gradient-to-r from-[#29E7CD] to-[#D925C7] text-white rounded-2xl hover:shadow-xl transition-all duration-200 font-semibold",children:e("orderLists.createFirstOrderList","Create Your First Order List")})]}):t.map(t=>(0,r.jsx)("div",{className:"bg-[#1f1f1f] border border-[#2a2a2a] rounded-2xl p-6 hover:shadow-xl hover:border-[#29E7CD]/50 transition-all duration-200",children:(0,r.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-4 mb-3",children:[(0,r.jsx)("div",{className:"w-12 h-12 bg-gradient-to-br from-[#29E7CD]/20 to-[#D925C7]/20 rounded-xl flex items-center justify-center",children:(0,r.jsx)("span",{className:"text-lg",children:"\uD83D\uDCCB"})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"font-semibold text-white text-lg",children:t.name}),(0,r.jsx)("p",{className:"text-sm text-gray-400",children:t.suppliers.name})]})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-4 mb-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-xs text-gray-400 mb-1",children:e("orderLists.status","Status")}),(0,r.jsx)("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ".concat((e=>{switch(e){case"draft":default:return"text-gray-400 bg-gray-400/10";case"sent":return"text-blue-400 bg-blue-400/10";case"received":return"text-green-400 bg-green-400/10";case"cancelled":return"text-red-400 bg-red-400/10"}})(t.status)),children:t.status.charAt(0).toUpperCase()+t.status.slice(1)})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-xs text-gray-400 mb-1",children:e("orderLists.items","Items")}),(0,r.jsx)("p",{className:"text-white font-semibold",children:t.order_list_items.length})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-xs text-gray-400 mb-1",children:e("orderLists.created","Created")}),(0,r.jsx)("p",{className:"text-white font-semibold",children:new Date(t.created_at).toLocaleDateString()})]})]}),t.notes&&(0,r.jsx)("p",{className:"text-sm text-gray-300 mb-4",children:t.notes}),t.order_list_items.length>0&&(0,r.jsxs)("div",{className:"bg-[#2a2a2a]/30 rounded-xl p-4",children:[(0,r.jsx)("h4",{className:"text-sm font-semibold text-white mb-3",children:e("orderLists.items","Items")}),(0,r.jsxs)("div",{className:"space-y-2",children:[t.order_list_items.slice(0,3).map(e=>(0,r.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,r.jsx)("span",{className:"text-gray-300",children:e.ingredients.name}),(0,r.jsxs)("span",{className:"text-white font-semibold",children:[e.quantity," ",e.unit]})]},e.id)),t.order_list_items.length>3&&(0,r.jsxs)("p",{className:"text-xs text-gray-400",children:["+",t.order_list_items.length-3," more items"]})]})]})]}),(0,r.jsxs)("div",{className:"flex flex-col space-y-2",children:[(0,r.jsxs)("select",{value:t.status,onChange:e=>k(t.id,e.target.value),className:"px-3 py-2 bg-[#2a2a2a] border border-[#2a2a2a] rounded-xl text-white text-sm focus:ring-2 focus:ring-[#29E7CD] focus:border-transparent",children:[(0,r.jsx)("option",{value:"draft",children:"Draft"}),(0,r.jsx)("option",{value:"sent",children:"Sent"}),(0,r.jsx)("option",{value:"received",children:"Received"}),(0,r.jsx)("option",{value:"cancelled",children:"Cancelled"})]}),(0,r.jsxs)("div",{className:"flex space-x-2",children:[(0,r.jsx)("button",{onClick:()=>{f(t),v({supplierId:t.supplier_id,name:t.name,notes:t.notes||"",items:t.order_list_items.map(e=>({ingredientId:e.ingredient_id,quantity:e.quantity.toString(),unit:e.unit,notes:e.notes||""}))}),g(!0)},className:"p-2 text-[#29E7CD] hover:bg-[#29E7CD]/10 rounded-xl transition-colors",title:String(e("orderLists.edit","Edit")),children:(0,r.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})})}),(0,r.jsx)("button",{onClick:()=>D(t.id),className:"p-2 text-red-400 hover:bg-red-400/10 rounded-xl transition-colors",title:String(e("orderLists.delete","Delete")),children:(0,r.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})]})]})},t.id))}),p&&(0,r.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50",children:(0,r.jsxs)("div",{className:"bg-[#1f1f1f] border border-[#2a2a2a] rounded-3xl p-6 w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,r.jsx)("h2",{className:"text-xl font-semibold text-white",children:b?e("orderLists.editOrderList","Edit Order List"):e("orderLists.createOrderList","Create Order List")}),(0,r.jsx)("button",{onClick:I,className:"p-2 text-gray-400 hover:text-white transition-colors",children:(0,r.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,r.jsxs)("form",{onSubmit:L,className:"space-y-6",children:[(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:e("orderLists.supplier","Supplier")}),(0,r.jsxs)("select",{value:j.supplierId,onChange:e=>v({...j,supplierId:e.target.value}),className:"w-full px-4 py-3 bg-[#2a2a2a] border border-[#2a2a2a] rounded-xl text-white focus:ring-2 focus:ring-[#29E7CD] focus:border-transparent",required:!0,children:[(0,r.jsx)("option",{value:"",children:e("orderLists.selectSupplier","Select a supplier")}),l.map(e=>(0,r.jsx)("option",{value:e.id,children:e.name},e.id))]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:e("orderLists.name","Order List Name")}),(0,r.jsx)("input",{type:"text",value:j.name,onChange:e=>v({...j,name:e.target.value}),className:"w-full px-4 py-3 bg-[#2a2a2a] border border-[#2a2a2a] rounded-xl text-white focus:ring-2 focus:ring-[#29E7CD] focus:border-transparent",placeholder:"e.g., Weekly Produce Order",required:!0})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:e("orderLists.notes","Notes")}),(0,r.jsx)("textarea",{value:j.notes,onChange:e=>v({...j,notes:e.target.value}),className:"w-full px-4 py-3 bg-[#2a2a2a] border border-[#2a2a2a] rounded-xl text-white focus:ring-2 focus:ring-[#29E7CD] focus:border-transparent",rows:3,placeholder:String(e("orderLists.notesPlaceholder","Optional notes about this order"))})]}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,r.jsx)("h3",{className:"text-lg font-semibold text-white",children:e("orderLists.items","Items")}),(0,r.jsxs)("button",{type:"button",onClick:()=>{v({...j,items:[...j.items,{ingredientId:"",quantity:"",unit:"",notes:""}]})},className:"px-4 py-2 bg-[#29E7CD]/10 text-[#29E7CD] rounded-xl hover:bg-[#29E7CD]/20 transition-colors text-sm font-semibold",children:["+ ",e("orderLists.addItem","Add Item")]})]}),(0,r.jsx)("div",{className:"space-y-3",children:j.items.map((t,s)=>(0,r.jsxs)("div",{className:"bg-[#2a2a2a]/30 rounded-xl p-4",children:[(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-3 mb-3",children:[(0,r.jsxs)("div",{className:"md:col-span-2",children:[(0,r.jsx)("label",{className:"block text-xs text-gray-400 mb-1",children:e("orderLists.ingredient","Ingredient")}),(0,r.jsxs)("select",{value:t.ingredientId,onChange:e=>E(s,"ingredientId",e.target.value),className:"w-full px-3 py-2 bg-[#1f1f1f] border border-[#2a2a2a] rounded-lg text-white text-sm focus:ring-2 focus:ring-[#29E7CD] focus:border-transparent",required:!0,children:[(0,r.jsx)("option",{value:"",children:e("orderLists.selectIngredient","Select ingredient")}),o.map(e=>(0,r.jsxs)("option",{value:e.id,children:[e.name," (",e.unit,")"]},e.id))]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-xs text-gray-400 mb-1",children:e("orderLists.quantity","Quantity")}),(0,r.jsx)("input",{type:"number",step:"0.01",value:t.quantity,onChange:e=>E(s,"quantity",e.target.value),className:"w-full px-3 py-2 bg-[#1f1f1f] border border-[#2a2a2a] rounded-lg text-white text-sm focus:ring-2 focus:ring-[#29E7CD] focus:border-transparent",placeholder:"0",required:!0})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-xs text-gray-400 mb-1",children:e("orderLists.unit","Unit")}),(0,r.jsx)("input",{type:"text",value:t.unit,onChange:e=>E(s,"unit",e.target.value),className:"w-full px-3 py-2 bg-[#1f1f1f] border border-[#2a2a2a] rounded-lg text-white text-sm focus:ring-2 focus:ring-[#29E7CD] focus:border-transparent",placeholder:"kg",required:!0})]})]}),(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsx)("input",{type:"text",value:t.notes,onChange:e=>E(s,"notes",e.target.value),className:"flex-1 px-3 py-2 bg-[#1f1f1f] border border-[#2a2a2a] rounded-lg text-white text-sm focus:ring-2 focus:ring-[#29E7CD] focus:border-transparent mr-3",placeholder:String(e("orderLists.itemNotes","Item notes (optional)"))}),(0,r.jsx)("button",{type:"button",onClick:()=>{v({...j,items:j.items.filter((e,t)=>t!==s)})},className:"p-2 text-red-400 hover:bg-red-400/10 rounded-lg transition-colors",children:(0,r.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})]},s))})]}),(0,r.jsxs)("div",{className:"flex space-x-3 pt-4",children:[(0,r.jsx)("button",{type:"button",onClick:I,className:"flex-1 px-4 py-3 bg-[#2a2a2a] text-gray-300 rounded-xl hover:bg-[#2a2a2a]/80 transition-colors",children:e("orderLists.cancel","Cancel")}),(0,r.jsx)("button",{type:"submit",className:"flex-1 px-4 py-3 bg-gradient-to-r from-[#29E7CD] to-[#D925C7] text-white rounded-xl hover:shadow-xl transition-all duration-200 font-semibold",children:b?e("orderLists.update","Update"):e("orderLists.create","Create")})]})]})]})})]})})}}},e=>{e.O(0,[2076,563,8650,8405,9420,622,7979,1899,4450,9324,8585,9592,433,2652,3494,2574,9173,3023,1356,309,4191,2834,957,6691,1151,9473,9219,6053,3376,7358],()=>e(e.s=1634)),_N_E=e.O()}]);