(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[90],{147:(e,t,n)=>{"use strict";n.d(t,{mT:()=>c,oU:()=>d});let i={ml:1,milliliter:1,l:1e3,liter:1e3,litre:1e3,tsp:5,teaspoon:5,tbsp:15,tablespoon:15,cup:240,cups:240,"fl oz":30,"fluid ounce":30,pint:480,quart:960,gallon:3840},s={g:1,gm:1,gram:1,grams:1,kg:1e3,kilogram:1e3,oz:28.35,ounce:28.35,lb:453.6,pound:453.6,mg:.001,milligram:.001},r={water:1,milk:1.03,cream:1.01,oil:.92,"olive oil":.92,"vegetable oil":.92,vinegar:1.01,honey:1.42,syrup:1.33,flour:.59,"all-purpose flour":.59,"bread flour":.59,"cake flour":.59,sugar:.85,"white sugar":.85,"brown sugar":.8,"powdered sugar":.6,"cocoa powder":.4,"baking powder":.6,"baking soda":.87,salt:1.2,cornstarch:.6,almonds:.6,walnuts:.65,pecans:.7,peanuts:.6,"sesame seeds":.6,"sunflower seeds":.5,butter:.91,cheese:1.1,"cream cheese":1,yogurt:1.03,default:.8};function a(e){if(!e)return r.default;let t=e.toLowerCase();if(r[t])return r[t];for(let[e,n]of Object.entries(r))if(t.includes(e)||e.includes(t))return n;return r.default}function o(e){return e.toLowerCase().trim()in i}function l(e){return e.toLowerCase().trim()in s}function d(e,t,n,r){let d,c,m=t.toLowerCase().trim(),u=n.toLowerCase().trim();if(m===u)return{convertedValue:e,convertedUnit:n,originalValue:e,originalUnit:t,conversionFactor:1};let x=o(m),p=o(u),h=l(m),g=l(u);if(x&&p)d=e*i[m]/i[u],c=i[m]/i[u];else if(h&&g)d=e*s[m]/s[u],c=s[m]/s[u];else if(x&&g){let t=a(r||"");d=e*i[m]*t/s[u],c=i[m]*t/s[u]}else{if(!h||!p)return{convertedValue:e,convertedUnit:n,originalValue:e,originalUnit:t,conversionFactor:1};let o=a(r||"");d=e*s[m]/o/i[u],c=s[m]/(o*i[u])}return{convertedValue:d,convertedUnit:n,originalValue:e,originalUnit:t,conversionFactor:c}}function c(e,t,n,i){return e/d(1,t,n,i).conversionFactor}},873:(e,t,n)=>{Promise.resolve().then(n.bind(n,2863))},1469:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),!function(e,t){for(var n in t)Object.defineProperty(e,n,{enumerable:!0,get:t[n]})}(t,{default:function(){return l},getImageProps:function(){return o}});let i=n(8229),s=n(8883),r=n(3063),a=i._(n(1193));function o(e){let{props:t}=(0,s.getImgProps)(e,{defaultLoader:a.default,imgConf:{deviceSizes:[640,750,828,1080,1200,1920,2048,3840],imageSizes:[16,32,48,64,96,128,256,384],path:"/_next/image",loader:"default",dangerouslyAllowSVG:!1,unoptimized:!1}});for(let[e,n]of Object.entries(t))void 0===n&&delete t[e];return{props:t}}let l=r.Image},2863:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var i=n(5155),s=n(3168),r=n(2115),a=n(5695),o=n(6766),l=n(147),d=n(8081);function c(){let e=(0,a.useRouter)(),[t,n]=(0,r.useState)([]),[c,m]=(0,r.useState)(!0),[u,x]=(0,r.useState)(null),p=d.Ts,h=(e,t)=>{if(!t||0===t.length)return null;let n=0;t.forEach(e=>{let t=e.ingredients,i=e.quantity,s=t.cost_per_unit,r=(0,l.mT)(s,t.unit||"g",e.unit||"g",t.ingredient_name),a=t.trim_peel_waste_percentage||0,o=t.yield_percentage||100;n+=i*r*(1+a/100)/(o/100)});let i=Math.floor(n/.3)+.95;return{costPerServing:n,recommendedPrice:i,foodCostPercent:n/i*100}},[g,f]=(0,r.useState)(!1),[b,v]=(0,r.useState)({name:"",yield:1,yield_unit:"servings",instructions:""}),[j,w]=(0,r.useState)(null),[y,N]=(0,r.useState)([]),[C,k]=(0,r.useState)(!1),[D,_]=(0,r.useState)(""),[S,P]=(0,r.useState)(!1),[F,L]=(0,r.useState)(1),[E,I]=(0,r.useState)(null),[z,B]=(0,r.useState)(!1),[R,M]=(0,r.useState)(null),[A,U]=(0,r.useState)(new Set),[G,q]=(0,r.useState)(!1),[T,O]=(0,r.useState)({});(0,r.useEffect)(()=>{J()},[]),(0,r.useEffect)(()=>{if(0===t.length)return;let e=s.ND.channel("ingredient-price-changes").on("postgres_changes",{event:"UPDATE",schema:"public",table:"ingredients",filter:"cost_per_unit=neq.null"},e=>{console.log("Ingredient price changed:",e),Y()}).subscribe();return()=>{e.unsubscribe()}},[t]);let J=async()=>{try{let{data:e,error:t}=await s.ND.from("recipes").select("*").order("name");t?x(t.message):(n(e||[]),await V(e||[]))}catch(e){x("Failed to fetch recipes")}finally{m(!1)}},V=async e=>{let t={};for(let n of e)try{let e=await H(n.id),i=h(n,e);i&&(t[n.id]=i)}catch(e){console.log("Failed to calculate price for recipe ".concat(n.id,":"),e)}O(t)},Y=async()=>{if(0!==t.length)try{await V(t)}catch(e){console.log("Failed to refresh recipe prices:",e)}},H=async e=>{try{let{data:t,error:n}=await s.ND.from("recipe_ingredients").select("\n          id,\n          recipe_id,\n          ingredient_id,\n          quantity,\n          unit,\n          ingredients (\n            id,\n            ingredient_name,\n            cost_per_unit,\n            unit,\n            trim_peel_waste_percentage,\n            yield_percentage\n          )\n        ").eq("recipe_id",e);if(n)return x(n.message),[];return t||[]}catch(e){return x("Failed to fetch recipe ingredients"),[]}},W=async e=>{e.preventDefault();try{let{error:e}=await s.ND.from("recipes").insert([b]);e?x(e.message):(f(!1),v({name:"",yield:1,yield_unit:"servings",instructions:""}),J())}catch(e){x("Failed to add recipe")}},K=async t=>{try{let n=(await H(t.id)).map(e=>{let n=e.ingredients,i=e.quantity,s=n.cost_per_unit,r=i*s,a=n.trim_peel_waste_percentage||0,o=n.yield_percentage||100,l=r*(1+a/100);return{recipeId:t.id,ingredientId:n.id,ingredientName:n.ingredient_name,quantity:i,unit:e.unit,costPerUnit:s,totalCost:r,wasteAdjustedCost:l,yieldAdjustedCost:l/(o/100)}});sessionStorage.setItem("editingRecipe",JSON.stringify({recipe:t,calculations:n,dishName:t.name,dishPortions:t.yield,dishNameLocked:!0})),e.push("/webapp/cogs")}catch(e){x("Failed to load recipe for editing")}},Z=async e=>{try{console.log("\uD83D\uDD0D DEBUG: Fetching ingredients for recipe:",e.name,e.id);let t=await H(e.id);console.log("\uD83D\uDD0D DEBUG: Fetched ingredients:",t),w(e),N(t),L(e.yield),k(!0),await $(e,t)}catch(e){console.error("❌ Error in handlePreviewRecipe:",e),x("Failed to load recipe preview")}},Q=(e,t)=>{let n=j?e*(F/j.yield):e;return("gm"===t.toLowerCase()||"g"===t.toLowerCase()||"gram"===t.toLowerCase())&&n>=1e3?{value:(n/1e3).toFixed(1),unit:"kg",original:"".concat(n.toFixed(1)," ").concat(t)}:("ml"===t.toLowerCase()||"milliliter"===t.toLowerCase())&&n>=1e3?{value:(n/1e3).toFixed(1),unit:"L",original:"".concat(n.toFixed(1)," ").concat(t)}:("mg"===t.toLowerCase()||"milligram"===t.toLowerCase())&&n>=1e3?{value:(n/1e3).toFixed(1),unit:"g",original:"".concat(n.toFixed(1)," ").concat(t)}:("kg"===t.toLowerCase()||"kilogram"===t.toLowerCase())&&n>=1e3?{value:(n/1e3).toFixed(1),unit:"tonne",original:"".concat(n.toFixed(1)," ").concat(t)}:("l"===t.toLowerCase()||"liter"===t.toLowerCase()||"litre"===t.toLowerCase())&&n>=1e3?{value:(n/1e3).toFixed(1),unit:"kL",original:"".concat(n.toFixed(1)," ").concat(t)}:n<1?{value:n.toFixed(2),unit:t,original:"".concat(n.toFixed(2)," ").concat(t)}:{value:n.toFixed(1),unit:t,original:"".concat(n.toFixed(1)," ").concat(t)}},$=async(e,t)=>{console.log("\uD83E\uDD16 DEBUG: Generating AI instructions for:",e.name),console.log("\uD83E\uDD16 DEBUG: Ingredients:",t),P(!0);try{var n,i,s,r,a,o;let l=t.map(e=>e.ingredients.ingredient_name.toLowerCase());console.log("\uD83E\uDD16 DEBUG: Ingredient names:",l);let d=l.some(e=>e.includes("beef")||e.includes("chicken")||e.includes("pork")||e.includes("fish")||e.includes("lamb")||e.includes("mince")),c=l.some(e=>e.includes("carrot")||e.includes("onion")||e.includes("garlic")||e.includes("tomato")||e.includes("pepper")||e.includes("celery")),m=l.some(e=>e.includes("cheese")||e.includes("milk")||e.includes("cream")||e.includes("butter")||e.includes("yogurt")),u=l.some(e=>e.includes("rice")||e.includes("pasta")||e.includes("bread")||e.includes("flour")||e.includes("quinoa")),x="general",p="stovetop";e.name.toLowerCase().includes("burger")||e.name.toLowerCase().includes("patty")?(x="burger",p="grill/pan"):e.name.toLowerCase().includes("soup")||e.name.toLowerCase().includes("stew")?(x="soup",p="stovetop"):e.name.toLowerCase().includes("salad")?(x="salad",p="cold prep"):(e.name.toLowerCase().includes("pasta")||e.name.toLowerCase().includes("noodle"))&&(x="pasta",p="stovetop");let h="";h="burger"===x?"**Burger Preparation:**\n\n**Mise en Place:**\n1. Gather all ingredients and equipment\n2. Prepare work station with cutting board, knives, and mixing bowls\n3. Preheat ".concat("grill/pan"===p?"grill or large skillet":"cooking surface"," to medium-high heat\n\n**Ingredient Prep:**\n").concat(d?"1. Prepare protein: ".concat((null==(n=t.find(e=>e.ingredients.ingredient_name.toLowerCase().includes("beef")||e.ingredients.ingredient_name.toLowerCase().includes("mince")))?void 0:n.ingredients.ingredient_name)||"main protein"," - season and form into patties"):"","\n").concat(c?"2. Prep vegetables: Wash, peel, and chop all vegetables as needed":"","\n").concat(m?"3. Prepare dairy: ".concat((null==(i=t.find(e=>e.ingredients.ingredient_name.toLowerCase().includes("cheese")))?void 0:i.ingredients.ingredient_name)||"cheese"," - slice or grate as needed"):"","\n\n**Cooking Method:**\n1. Heat cooking surface to medium-high (375\xb0F/190\xb0C)\n2. ").concat(d?"Cook protein patties for 4-5 minutes per side for medium doneness":"Cook main ingredients","\n3. ").concat(c?"Saut\xe9 vegetables until tender-crisp":"Cook vegetables as needed","\n4. ").concat(m?"Add cheese in final 1-2 minutes of cooking":"Add finishing ingredients","\n\n**Assembly & Service:**\n1. Toast buns if desired\n2. Layer ingredients: protein, vegetables, condiments\n3. Serve immediately while hot\n4. Yield: ").concat(e.yield," ").concat(e.yield_unit,"\n\n**Professional Tips:**\n- Maintain consistent heat for even cooking\n- Don't press patties while cooking\n- Let meat rest 2-3 minutes before serving\n- Keep ingredients warm during assembly"):"soup"===x?"**Soup Preparation:**\n\n**Mise en Place:**\n1. Gather all ingredients and large pot\n2. Prepare cutting board and sharp knives\n3. Have stock or broth ready at room temperature\n\n**Ingredient Prep:**\n".concat(d?"1. Prepare protein: Cut ".concat((null==(s=t.find(e=>e.ingredients.ingredient_name.toLowerCase().includes("beef")||e.ingredients.ingredient_name.toLowerCase().includes("chicken")))?void 0:s.ingredients.ingredient_name)||"protein"," into bite-sized pieces"):"","\n").concat(c?"2. Prep vegetables: Dice aromatics (onions, carrots, celery) uniformly":"","\n").concat(u?"3. Prepare grains: ".concat((null==(r=t.find(e=>e.ingredients.ingredient_name.toLowerCase().includes("rice")||e.ingredients.ingredient_name.toLowerCase().includes("pasta")))?void 0:r.ingredients.ingredient_name)||"grains"," - rinse if needed"):"","\n\n**Cooking Method:**\n1. Heat large pot over medium heat\n2. ").concat(d?"Sear protein until browned, remove and set aside":"Start with aromatics","\n3. ").concat(c?"Saut\xe9 vegetables until softened (5-7 minutes)":"Cook base ingredients","\n4. Add liquid and bring to boil, then reduce to simmer\n5. ").concat(d?"Return protein to pot":"Add main ingredients","\n6. Simmer until all ingredients are tender (20-30 minutes)\n\n**Final Steps:**\n1. Taste and adjust seasoning\n2. Skim any excess fat from surface\n3. Serve hot with garnishes\n4. Yield: ").concat(e.yield," ").concat(e.yield_unit,"\n\n**Professional Tips:**\n- Build layers of flavor (saut\xe9 aromatics first)\n- Simmer gently to avoid breaking ingredients\n- Taste frequently and adjust seasoning\n- Cool quickly if storing"):"**".concat(e.name," Preparation:**\n\n**Mise en Place:**\n1. Gather all ingredients and equipment\n2. Prepare work station with cutting board and knives\n3. Preheat cooking equipment as needed\n\n**Ingredient Prep:**\n").concat(d?"1. Prepare protein: ".concat((null==(a=t.find(e=>e.ingredients.ingredient_name.toLowerCase().includes("beef")||e.ingredients.ingredient_name.toLowerCase().includes("chicken")||e.ingredients.ingredient_name.toLowerCase().includes("mince")))?void 0:a.ingredients.ingredient_name)||"main protein"," - cut, season, or prepare as needed"):"","\n").concat(c?"2. Prep vegetables: Wash, peel, and cut vegetables uniformly":"","\n").concat(m?"3. Prepare dairy: ".concat((null==(o=t.find(e=>e.ingredients.ingredient_name.toLowerCase().includes("cheese")||e.ingredients.ingredient_name.toLowerCase().includes("milk")))?void 0:o.ingredients.ingredient_name)||"dairy products"," - prepare as needed"):"","\n\n**Cooking Method:**\n1. Heat cooking surface to appropriate temperature\n2. ").concat(d?"Cook protein first, then remove and set aside":"Start with base ingredients","\n3. ").concat(c?"Cook vegetables until desired doneness":"Cook main ingredients","\n4. ").concat(d?"Return protein to pan":"Combine all ingredients","\n5. Season and finish cooking\n\n**Final Steps:**\n1. Taste and adjust seasoning\n2. Plate attractively for ").concat(e.yield," ").concat(e.yield_unit,"\n3. Serve immediately while hot\n\n**Professional Tips:**\n- Maintain consistent heat throughout cooking\n- Use proper knife skills for uniform cuts\n- Keep work area clean and organized\n- Taste frequently and adjust seasoning"),console.log("\uD83E\uDD16 DEBUG: Generated instructions:",h),_(h),console.log("\uD83E\uDD16 DEBUG: AI instructions state set")}catch(e){console.error("\uD83E\uDD16 DEBUG: Error generating instructions:",e),x("Failed to generate cooking instructions")}finally{P(!1)}},X=e=>{M(e),B(!0)},ee=async()=>{if(R)try{let{error:e}=await s.ND.from("recipe_ingredients").delete().eq("recipe_id",R.id);if(e)return void x(e.message);let{error:t}=await s.ND.from("recipes").delete().eq("id",R.id);if(t)return void x(t.message);await J(),I('Recipe "'.concat(p(R.name),'" deleted successfully!')),setTimeout(()=>I(null),3e3),B(!1),M(null)}catch(e){x("Failed to delete recipe")}},et=e=>{U(t=>{let n=new Set(t);return n.has(e)?n.delete(e):n.add(e),n})},en=async()=>{if(0!==A.size)try{let e=Array.from(A),{error:t}=await s.ND.from("recipe_ingredients").delete().in("recipe_id",e);if(t)return void x(t.message);let{error:n}=await s.ND.from("recipes").delete().in("id",e);if(n)return void x(n.message);await J(),I("".concat(A.size," recipe").concat(A.size>1?"s":""," deleted successfully!")),setTimeout(()=>I(null),3e3),U(new Set),q(!1)}catch(e){x("Failed to delete recipes")}};return c?(0,i.jsx)("div",{className:"min-h-screen bg-[#0a0a0a] p-4 sm:p-6",children:(0,i.jsx)("div",{className:"max-w-7xl mx-auto",children:(0,i.jsxs)("div",{className:"animate-pulse",children:[(0,i.jsx)("div",{className:"h-8 bg-[#2a2a2a] rounded-3xl w-1/2 mb-8"}),(0,i.jsx)("div",{className:"space-y-4",children:[void 0,void 0,void 0].map((e,t)=>(0,i.jsxs)("div",{className:"bg-[#1f1f1f] p-6 rounded-3xl shadow-lg border border-[#2a2a2a]",children:[(0,i.jsx)("div",{className:"h-4 bg-[#2a2a2a] rounded-xl w-3/4 mb-3"}),(0,i.jsx)("div",{className:"h-3 bg-[#2a2a2a] rounded-xl w-1/2"})]},t))})]})})}):(0,i.jsx)("div",{className:"min-h-screen bg-[#0a0a0a] p-4 sm:p-6",children:(0,i.jsxs)("div",{className:"max-w-7xl mx-auto",children:[(0,i.jsxs)("div",{className:"mb-8",children:[(0,i.jsxs)("div",{className:"flex items-center gap-4 mb-4",children:[(0,i.jsx)(o.default,{src:"/images/prepflow-logo.png",alt:"PrepFlow Logo",width:40,height:40,className:"rounded-lg",priority:!0}),(0,i.jsx)("h1",{className:"text-4xl font-bold text-white",children:"\uD83D\uDCD6 Recipe Book"})]}),(0,i.jsx)("p",{className:"text-gray-400",children:"Manage your saved recipes and create new ones"})]}),(0,i.jsxs)("div",{className:"flex flex-wrap gap-3 mb-8",children:[(0,i.jsx)("button",{onClick:()=>f(!g),className:"bg-gradient-to-r from-[#29E7CD] to-[#D925C7] text-white px-6 py-3 rounded-2xl hover:from-[#29E7CD]/80 hover:to-[#D925C7]/80 transition-all duration-200 shadow-lg hover:shadow-xl font-medium",children:g?"Cancel":"+ Add Manual Recipe"}),(0,i.jsx)("a",{href:"/webapp/cogs",className:"bg-gradient-to-r from-[#3B82F6] to-[#29E7CD] text-white px-6 py-3 rounded-2xl hover:from-[#3B82F6]/80 hover:to-[#29E7CD]/80 transition-all duration-200 shadow-lg hover:shadow-xl font-medium",children:"Create Recipe from COGS"}),(0,i.jsx)("button",{onClick:()=>{m(!0),J()},className:"bg-gradient-to-r from-[#D925C7] to-[#3B82F6] text-white px-6 py-3 rounded-2xl hover:from-[#D925C7]/80 hover:to-[#3B82F6]/80 transition-all duration-200 shadow-lg hover:shadow-xl font-medium",children:"\uD83D\uDD04 Refresh Recipes"})]}),(0,i.jsxs)("div",{className:"bg-gradient-to-br from-[#29E7CD]/10 to-[#D925C7]/10 border border-[#29E7CD]/30 p-4 sm:p-6 rounded-xl mb-6",children:[(0,i.jsx)("h2",{className:"text-lg font-semibold text-white mb-2",children:"How Recipe Book Works"}),(0,i.jsxs)("div",{className:"grid md:grid-cols-2 gap-4 text-sm text-gray-300",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("h3",{className:"font-medium text-[#3B82F6] mb-2",children:"✍️ Manual Recipes"}),(0,i.jsx)("p",{children:"Add recipes manually with instructions and portion counts. Perfect for documenting cooking methods and procedures."})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("h3",{className:"font-medium text-[#29E7CD] mb-2",children:"\uD83D\uDCCA From COGS Calculations"}),(0,i.jsx)("p",{children:"Create cost calculations in the COGS screen, then save them as recipes. These recipes include all ingredient costs and portion calculations."})]})]})]}),A.size>0&&(0,i.jsx)("div",{className:"bg-gradient-to-r from-[#ef4444]/10 to-[#dc2626]/10 border border-[#ef4444]/30 p-4 rounded-xl mb-6",children:(0,i.jsxs)("div",{className:"flex items-center justify-between",children:[(0,i.jsxs)("div",{className:"flex items-center",children:[(0,i.jsx)("div",{className:"w-8 h-8 bg-gradient-to-r from-[#ef4444] to-[#dc2626] rounded-full flex items-center justify-center mr-3",children:(0,i.jsx)("span",{className:"text-white font-bold text-sm",children:A.size})}),(0,i.jsxs)("div",{children:[(0,i.jsxs)("h3",{className:"text-white font-semibold",children:[A.size," recipe",A.size>1?"s":""," selected"]}),(0,i.jsx)("p",{className:"text-gray-400 text-sm",children:"Choose an action for the selected recipes"})]})]}),(0,i.jsxs)("div",{className:"flex gap-2",children:[(0,i.jsx)("button",{onClick:()=>{0!==A.size&&q(!0)},className:"bg-gradient-to-r from-[#ef4444] to-[#dc2626] text-white px-4 py-2 rounded-lg hover:from-[#ef4444]/80 hover:to-[#dc2626]/80 transition-all duration-200 font-medium shadow-lg hover:shadow-xl",children:"\uD83D\uDDD1️ Delete Selected"}),(0,i.jsx)("button",{onClick:()=>U(new Set),className:"bg-[#2a2a2a] text-gray-300 px-4 py-2 rounded-lg hover:bg-[#3a3a3a] transition-all duration-200 font-medium",children:"Clear Selection"})]})]})}),u&&(0,i.jsx)("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded mb-6",children:u}),E&&(0,i.jsx)("div",{className:"bg-gradient-to-r from-green-50 to-emerald-50 border border-green-200 text-green-700 px-4 py-3 rounded mb-6 flex items-center",children:(0,i.jsxs)("div",{className:"flex items-center",children:[(0,i.jsx)("svg",{className:"w-5 h-5 text-green-500 mr-2",fill:"currentColor",viewBox:"0 0 20 20",children:(0,i.jsx)("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),(0,i.jsx)("span",{className:"font-medium",children:E})]})}),g&&(0,i.jsxs)("div",{className:"bg-[#1f1f1f] p-4 sm:p-6 rounded-lg shadow mb-6",children:[(0,i.jsx)("h2",{className:"text-lg sm:text-xl font-semibold mb-4",children:"Add New Recipe"}),(0,i.jsxs)("form",{onSubmit:W,className:"space-y-4",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Recipe Name *"}),(0,i.jsx)("input",{type:"text",required:!0,value:b.name,onChange:e=>v({...b,name:e.target.value}),className:"w-full px-3 py-2 border border-[#2a2a2a] rounded-md focus:outline-none focus:ring-2 focus:ring-[#29E7CD]",placeholder:"e.g., Chicken Stir-fry"})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Yield Portions"}),(0,i.jsx)("input",{type:"number",min:"1",value:b.yield,onChange:e=>v({...b,yield:parseInt(e.target.value)}),className:"w-full px-3 py-2 border border-[#2a2a2a] rounded-md focus:outline-none focus:ring-2 focus:ring-[#29E7CD]"})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Instructions"}),(0,i.jsx)("textarea",{value:b.instructions,onChange:e=>v({...b,instructions:e.target.value}),rows:4,className:"w-full px-3 py-2 border border-[#2a2a2a] rounded-md focus:outline-none focus:ring-2 focus:ring-[#29E7CD]",placeholder:"Step-by-step cooking instructions..."})]}),(0,i.jsx)("button",{type:"submit",className:"bg-green-600 text-white px-6 py-2 rounded-lg hover:bg-green-700 transition-colors",children:"Add Recipe"})]})]}),(0,i.jsxs)("div",{className:"bg-[#1f1f1f] rounded-lg shadow overflow-hidden",children:[(0,i.jsx)("div",{className:"sticky top-0 z-10 bg-[#1f1f1f] px-4 sm:px-6 py-4 border-b border-[#2a2a2a]",children:(0,i.jsxs)("div",{className:"flex items-center justify-between",children:[(0,i.jsxs)("h2",{className:"text-lg font-semibold text-white",children:["Recipes (",t.length,")"]}),A.size>0&&(0,i.jsxs)("div",{className:"flex items-center",children:[(0,i.jsx)("div",{className:"w-6 h-6 bg-gradient-to-r from-[#ef4444] to-[#dc2626] rounded-full flex items-center justify-center mr-2",children:(0,i.jsx)("span",{className:"text-white font-bold text-xs",children:A.size})}),(0,i.jsxs)("span",{className:"text-sm text-gray-300",children:[A.size," selected"]})]})]})}),(0,i.jsx)("div",{className:"block md:hidden",children:(0,i.jsx)("div",{className:"divide-y divide-[#2a2a2a]",children:t.map(e=>(0,i.jsxs)("div",{className:"p-4 hover:bg-[#2a2a2a]/20 transition-colors",children:[(0,i.jsxs)("div",{className:"flex items-start justify-between mb-2",children:[(0,i.jsxs)("div",{className:"flex items-center",children:[(0,i.jsx)("input",{type:"checkbox",checked:A.has(e.id),onChange:()=>et(e.id),className:"w-4 h-4 text-[#29E7CD] bg-[#0a0a0a] border-[#2a2a2a] rounded focus:ring-[#29E7CD] focus:ring-2 mr-3"}),(0,i.jsx)("h3",{className:"text-sm font-medium text-white cursor-pointer",onClick:()=>Z(e),children:p(e.name)})]}),(0,i.jsx)("span",{className:"text-xs text-gray-500",children:new Date(e.created_at).toLocaleDateString()})]}),(0,i.jsxs)("div",{className:"space-y-1 text-xs text-gray-500 mb-3 ml-7",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("span",{className:"font-medium",children:"Recommended Price:"}),T[e.id]?(0,i.jsxs)("span",{className:"text-white font-semibold ml-1",children:["$",T[e.id].recommendedPrice.toFixed(2)]}):(0,i.jsx)("span",{className:"text-gray-500 ml-1",children:"Calculating..."})]}),T[e.id]&&(0,i.jsxs)("div",{children:[(0,i.jsx)("span",{className:"font-medium",children:"Food Cost:"}),(0,i.jsxs)("span",{className:"text-gray-400 ml-1",children:[T[e.id].foodCostPercent.toFixed(1),"%"]})]}),e.instructions&&(0,i.jsxs)("div",{children:[(0,i.jsx)("span",{className:"font-medium",children:"Instructions:"}),(0,i.jsx)("p",{className:"mt-1 text-gray-400 line-clamp-2",children:e.instructions})]})]}),(0,i.jsxs)("div",{className:"flex gap-2 ml-7",children:[(0,i.jsx)("button",{onClick:()=>K(e),className:"flex-1 bg-gradient-to-r from-[#29E7CD] to-[#3B82F6] text-white px-3 py-2 rounded-lg text-xs font-medium hover:from-[#29E7CD]/80 hover:to-[#3B82F6]/80 transition-all duration-200",children:"✏️ Edit in COGS"}),(0,i.jsx)("button",{onClick:()=>X(e),className:"flex-1 bg-gradient-to-r from-[#ef4444] to-[#dc2626] text-white px-3 py-2 rounded-lg text-xs font-medium hover:from-[#ef4444]/80 hover:to-[#dc2626]/80 transition-all duration-200",children:"\uD83D\uDDD1️ Delete"})]})]},e.id))})}),(0,i.jsx)("div",{className:"hidden md:block overflow-x-auto",children:(0,i.jsxs)("table",{className:"min-w-full divide-y divide-[#2a2a2a]",children:[(0,i.jsx)("thead",{className:"sticky top-0 z-10 bg-gradient-to-r from-[#2a2a2a]/50 to-[#2a2a2a]/20",children:(0,i.jsxs)("tr",{children:[(0,i.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:(0,i.jsxs)("div",{className:"flex items-center",children:[(0,i.jsx)("input",{type:"checkbox",checked:A.size===t.length&&t.length>0,onChange:()=>{A.size===t.length?U(new Set):U(new Set(t.map(e=>e.id)))},className:"w-4 h-4 text-[#29E7CD] bg-[#0a0a0a] border-[#2a2a2a] rounded focus:ring-[#29E7CD] focus:ring-2"}),(0,i.jsx)("span",{className:"ml-2",children:"Select"})]})}),(0,i.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Name"}),(0,i.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Recommended Price"}),(0,i.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Instructions"}),(0,i.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Created"}),(0,i.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Actions"})]})}),(0,i.jsx)("tbody",{className:"bg-[#1f1f1f] divide-y divide-[#2a2a2a]",children:t.map(e=>(0,i.jsxs)("tr",{className:"hover:bg-[#2a2a2a]/20 transition-colors",children:[(0,i.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-white",onClick:e=>e.stopPropagation(),children:(0,i.jsx)("input",{type:"checkbox",checked:A.has(e.id),onChange:()=>et(e.id),className:"w-4 h-4 text-[#29E7CD] bg-[#0a0a0a] border-[#2a2a2a] rounded focus:ring-[#29E7CD] focus:ring-2"})}),(0,i.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-white cursor-pointer",onClick:()=>Z(e),children:p(e.name)}),(0,i.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-300 cursor-pointer",onClick:()=>Z(e),children:T[e.id]?(0,i.jsxs)("div",{className:"flex flex-col",children:[(0,i.jsxs)("span",{className:"text-white font-semibold",children:["$",T[e.id].recommendedPrice.toFixed(2)]}),(0,i.jsxs)("span",{className:"text-xs text-gray-400",children:[T[e.id].foodCostPercent.toFixed(1),"% food cost"]})]}):(0,i.jsx)("span",{className:"text-gray-500",children:"Calculating..."})}),(0,i.jsx)("td",{className:"px-6 py-4 text-sm text-gray-300 cursor-pointer",onClick:()=>Z(e),children:e.instructions?(0,i.jsx)("div",{className:"max-w-xs truncate",children:e.instructions}):"-"}),(0,i.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-300 cursor-pointer",onClick:()=>Z(e),children:new Date(e.created_at).toLocaleDateString()}),(0,i.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-300",children:(0,i.jsxs)("div",{className:"flex gap-2",onClick:e=>e.stopPropagation(),children:[(0,i.jsx)("button",{onClick:()=>K(e),className:"bg-gradient-to-r from-[#29E7CD] to-[#3B82F6] text-white px-3 py-1 rounded-lg text-xs font-medium hover:from-[#29E7CD]/80 hover:to-[#3B82F6]/80 transition-all duration-200",children:"✏️ Edit"}),(0,i.jsx)("button",{onClick:()=>X(e),className:"bg-gradient-to-r from-[#ef4444] to-[#dc2626] text-white px-3 py-1 rounded-lg text-xs font-medium hover:from-[#ef4444]/80 hover:to-[#dc2626]/80 transition-all duration-200",children:"\uD83D\uDDD1️ Delete"})]})})]},e.id))})]})})]}),0===t.length&&(0,i.jsxs)("div",{className:"text-center py-12",children:[(0,i.jsx)("div",{className:"text-gray-400 text-6xl mb-4",children:"\uD83C\uDF73"}),(0,i.jsx)("h3",{className:"text-lg font-medium text-white mb-2",children:"No recipes yet"}),(0,i.jsx)("p",{className:"text-gray-500 mb-4",children:"Start by adding your first recipe to begin managing your kitchen costs."}),(0,i.jsx)("button",{onClick:()=>f(!0),className:"bg-gradient-to-r from-[#29E7CD] to-[#3B82F6] text-white px-4 py-2 rounded-lg hover:from-[#29E7CD]/80 hover:to-[#3B82F6]/80 transition-colors",children:"Add Your First Recipe"})]}),C&&j&&(0,i.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50",children:(0,i.jsxs)("div",{className:"bg-[#1f1f1f] rounded-2xl shadow-2xl max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:[(0,i.jsx)("div",{className:"p-6 border-b border-[#2a2a2a]",children:(0,i.jsxs)("div",{className:"flex justify-between items-start",children:[(0,i.jsxs)("div",{className:"flex-1",children:[(0,i.jsx)("h2",{className:"text-2xl font-bold text-white mb-2",children:p(j.name)}),(0,i.jsxs)("div",{className:"flex items-center gap-4 mb-4",children:[(0,i.jsxs)("div",{className:"flex items-center gap-2",children:[(0,i.jsx)("span",{className:"text-gray-400 text-sm",children:"Original Yield:"}),(0,i.jsxs)("span",{className:"text-white font-medium",children:[j.yield," ",j.yield_unit]})]}),(0,i.jsxs)("div",{className:"flex items-center gap-2",children:[(0,i.jsx)("span",{className:"text-gray-400 text-sm",children:"Adjust for:"}),(0,i.jsxs)("div",{className:"flex items-center gap-2",children:[(0,i.jsx)("button",{onClick:()=>L(Math.max(1,F-1)),className:"bg-[#2a2a2a] hover:bg-[#3a3a3a] text-white w-8 h-8 rounded-lg flex items-center justify-center text-sm font-medium transition-colors",children:"−"}),(0,i.jsx)("input",{type:"number",value:F,onChange:e=>L(Math.max(1,parseInt(e.target.value)||1)),className:"bg-[#0a0a0a] border border-[#2a2a2a] text-white text-center w-16 h-8 rounded-lg text-sm font-medium focus:ring-2 focus:ring-[#29E7CD] focus:border-transparent",min:"1"}),(0,i.jsx)("button",{onClick:()=>L(F+1),className:"bg-[#2a2a2a] hover:bg-[#3a3a3a] text-white w-8 h-8 rounded-lg flex items-center justify-center text-sm font-medium transition-colors",children:"+"})]}),(0,i.jsx)("span",{className:"text-white font-medium",children:j.yield_unit})]}),F!==j.yield&&(0,i.jsxs)("div",{className:"flex items-center gap-2",children:[(0,i.jsx)("span",{className:"text-xs text-gray-400",children:"Scale:"}),(0,i.jsxs)("span",{className:"text-sm font-medium ".concat(F>j.yield?"text-[#29E7CD]":"text-[#3B82F6]"),children:[F>j.yield?"+":"",((F/j.yield-1)*100).toFixed(0),"%"]})]})]})]}),(0,i.jsxs)("div",{className:"flex gap-2",children:[(0,i.jsx)("button",{onClick:()=>(()=>{if(!j||!y.length)return void x("No recipe data available for editing");try{console.log("\uD83D\uDD0D DEBUG: Recipe ingredients from preview:",y),console.log("\uD83D\uDD0D DEBUG: Selected recipe:",j);let t=y.map(e=>{let t=e.ingredients,n=e.quantity,i=t.cost_per_unit,s=n*i,r=t.trim_peel_waste_percentage||0,a=t.yield_percentage||100,o=s*(1+r/100);return console.log("\uD83D\uDD0D DEBUG: Converting ingredient:",{ingredientName:t.ingredient_name,quantity:n,unit:e.unit,costPerUnit:i}),{recipeId:j.id,ingredientId:t.id,ingredientName:t.ingredient_name,quantity:n,unit:e.unit,costPerUnit:i,totalCost:s,wasteAdjustedCost:o,yieldAdjustedCost:o/(a/100)}});console.log("\uD83D\uDD0D DEBUG: Final calculations array:",t),sessionStorage.setItem("editingRecipe",JSON.stringify({recipe:j,recipeId:j.id,calculations:t,dishName:j.name,dishPortions:j.yield,dishNameLocked:!0})),k(!1),e.push("/webapp/cogs")}catch(e){console.error("❌ Error in handleEditFromPreview:",e),x("Failed to load recipe for editing")}})(),className:"bg-gradient-to-r from-[#29E7CD] to-[#3B82F6] text-white px-4 py-2 rounded-lg text-sm font-medium hover:from-[#29E7CD]/80 hover:to-[#3B82F6]/80 transition-all duration-200",children:"✏️ Edit Recipe"}),(0,i.jsx)("button",{onClick:()=>{window.print()},className:"bg-gradient-to-r from-[#D925C7] to-[#29E7CD] text-white px-4 py-2 rounded-lg text-sm font-medium hover:from-[#D925C7]/80 hover:to-[#29E7CD]/80 transition-all duration-200",children:"\uD83D\uDDA8️ Print"}),(0,i.jsx)("button",{onClick:()=>k(!1),className:"bg-gray-600 text-white px-4 py-2 rounded-lg text-sm font-medium hover:bg-gray-700 transition-colors",children:"✕ Close"})]})]})}),(0,i.jsxs)("div",{className:"p-6",children:[(0,i.jsxs)("div",{className:"mb-6",children:[(0,i.jsxs)("h3",{className:"text-lg font-semibold text-white mb-4 flex items-center gap-2",children:[(0,i.jsx)("span",{className:"text-2xl",children:"\uD83D\uDCCB"}),"Ingredients",(0,i.jsxs)("span",{className:"text-sm font-normal text-gray-400 ml-2",children:["(",y.length," item",1!==y.length?"s":"",")"]})]}),(0,i.jsxs)("div",{className:"bg-[#0a0a0a] rounded-xl border border-[#2a2a2a]/50 overflow-hidden",children:[(0,i.jsx)("div",{className:"bg-gradient-to-r from-[#2a2a2a]/50 to-[#2a2a2a]/20 px-4 py-3 border-b border-[#2a2a2a]/50",children:(0,i.jsxs)("div",{className:"grid grid-cols-12 gap-4 text-sm font-medium text-gray-300",children:[(0,i.jsx)("div",{className:"col-span-1 text-center",children:"#"}),(0,i.jsx)("div",{className:"col-span-8",children:"Ingredient"}),(0,i.jsx)("div",{className:"col-span-3 text-center",children:"Quantity"})]})}),(0,i.jsx)("div",{className:"divide-y divide-[#2a2a2a]/30",children:y.map((e,t)=>{let n=e.ingredients,s=e.quantity;return(0,i.jsx)("div",{className:"px-4 py-3 hover:bg-[#2a2a2a]/20 transition-colors",children:(0,i.jsxs)("div",{className:"grid grid-cols-12 gap-4 items-center",children:[(0,i.jsx)("div",{className:"col-span-1 text-center",children:(0,i.jsx)("span",{className:"text-sm text-gray-400 font-mono",children:String(t+1).padStart(2,"0")})}),(0,i.jsx)("div",{className:"col-span-8",children:(0,i.jsx)("div",{className:"text-white font-medium",children:n.ingredient_name})}),(0,i.jsx)("div",{className:"col-span-3 text-center",children:(0,i.jsx)("span",{className:"text-white font-medium",children:(()=>{let t=Q(s,e.unit),n=t.unit!==e.unit.toLowerCase();return(0,i.jsxs)(i.Fragment,{children:[t.value," ",t.unit,n&&(0,i.jsxs)("div",{className:"text-xs text-gray-400 mt-1",children:["(",t.original,")"]}),F!==j.yield&&!n&&(0,i.jsxs)("div",{className:"text-xs text-gray-400 mt-1",children:["(orig: ",s," ",e.unit,")"]})]})})()})})]})},e.id)})})]})]}),(0,i.jsxs)("div",{className:"mb-6",children:[(0,i.jsx)("h3",{className:"text-lg font-semibold text-white mb-4",children:"\uD83E\uDD16 AI-Generated Cooking Method"}),(0,i.jsx)("div",{className:"bg-[#0a0a0a] rounded-lg p-4",children:S?(0,i.jsxs)("div",{className:"flex items-center justify-center py-8",children:[(0,i.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-[#29E7CD]"}),(0,i.jsx)("span",{className:"ml-3 text-gray-400",children:"Generating cooking instructions..."})]}):(0,i.jsx)("div",{className:"text-gray-300 whitespace-pre-wrap",children:D})})]}),j.instructions&&(0,i.jsxs)("div",{children:[(0,i.jsx)("h3",{className:"text-lg font-semibold text-white mb-4",children:"\uD83D\uDC68‍\uD83C\uDF73 Manual Instructions"}),(0,i.jsx)("div",{className:"bg-[#0a0a0a] rounded-lg p-4",children:(0,i.jsx)("div",{className:"text-gray-300 whitespace-pre-wrap",children:j.instructions})})]})]})]})}),z&&R&&(0,i.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50",children:(0,i.jsxs)("div",{className:"bg-[#1f1f1f] rounded-2xl shadow-2xl max-w-md w-full border border-[#2a2a2a]",children:[(0,i.jsx)("div",{className:"p-6 border-b border-[#2a2a2a]",children:(0,i.jsxs)("div",{className:"flex items-center",children:[(0,i.jsx)("div",{className:"w-12 h-12 bg-gradient-to-r from-[#ef4444] to-[#dc2626] rounded-full flex items-center justify-center mr-4",children:(0,i.jsx)("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,i.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})})}),(0,i.jsxs)("div",{children:[(0,i.jsx)("h3",{className:"text-xl font-bold text-white",children:"Delete Recipe"}),(0,i.jsx)("p",{className:"text-gray-400 text-sm",children:"This action cannot be undone"})]})]})}),(0,i.jsxs)("div",{className:"p-6",children:[(0,i.jsxs)("p",{className:"text-gray-300 mb-6",children:["Are you sure you want to delete ",(0,i.jsxs)("span",{className:"font-semibold text-white",children:['"',p(R.name),'"']}),"? This will permanently remove the recipe and all its ingredients from your Recipe Book."]}),(0,i.jsxs)("div",{className:"flex gap-3",children:[(0,i.jsx)("button",{onClick:()=>{B(!1),M(null)},className:"flex-1 bg-[#2a2a2a] text-gray-300 px-4 py-3 rounded-xl hover:bg-[#3a3a3a] transition-all duration-200 font-medium",children:"Cancel"}),(0,i.jsx)("button",{onClick:ee,className:"flex-1 bg-gradient-to-r from-[#ef4444] to-[#dc2626] text-white px-4 py-3 rounded-xl hover:from-[#ef4444]/80 hover:to-[#dc2626]/80 transition-all duration-200 font-medium shadow-lg hover:shadow-xl",children:"Delete Recipe"})]})]})]})}),G&&(0,i.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50",children:(0,i.jsxs)("div",{className:"bg-[#1f1f1f] rounded-2xl shadow-2xl max-w-md w-full border border-[#2a2a2a]",children:[(0,i.jsx)("div",{className:"p-6 border-b border-[#2a2a2a]",children:(0,i.jsxs)("div",{className:"flex items-center",children:[(0,i.jsx)("div",{className:"w-12 h-12 bg-gradient-to-r from-[#ef4444] to-[#dc2626] rounded-full flex items-center justify-center mr-4",children:(0,i.jsx)("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,i.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})}),(0,i.jsxs)("div",{children:[(0,i.jsx)("h3",{className:"text-xl font-bold text-white",children:"Delete Multiple Recipes"}),(0,i.jsx)("p",{className:"text-gray-400 text-sm",children:"This action cannot be undone"})]})]})}),(0,i.jsxs)("div",{className:"p-6",children:[(0,i.jsxs)("p",{className:"text-gray-300 mb-6",children:["Are you sure you want to delete ",(0,i.jsxs)("span",{className:"font-semibold text-white",children:[A.size," recipe",A.size>1?"s":""]}),"? This will permanently remove all selected recipes and their ingredients from your Recipe Book."]}),(0,i.jsxs)("div",{className:"bg-[#0a0a0a] rounded-lg p-4 mb-6 max-h-32 overflow-y-auto",children:[(0,i.jsx)("h4",{className:"text-sm font-medium text-white mb-2",children:"Selected Recipes:"}),(0,i.jsx)("div",{className:"space-y-1",children:Array.from(A).map(e=>{let n=t.find(t=>t.id===e);return n?(0,i.jsxs)("div",{className:"text-xs text-gray-400",children:["• ",p(n.name)]},e):null})})]}),(0,i.jsxs)("div",{className:"flex gap-3",children:[(0,i.jsx)("button",{onClick:()=>{q(!1)},className:"flex-1 bg-[#2a2a2a] text-gray-300 px-4 py-3 rounded-xl hover:bg-[#3a3a3a] transition-all duration-200 font-medium",children:"Cancel"}),(0,i.jsxs)("button",{onClick:en,className:"flex-1 bg-gradient-to-r from-[#ef4444] to-[#dc2626] text-white px-4 py-3 rounded-xl hover:from-[#ef4444]/80 hover:to-[#dc2626]/80 transition-all duration-200 font-medium shadow-lg hover:shadow-xl",children:["Delete ",A.size," Recipe",A.size>1?"s":""]})]})]})]})}),j&&(0,i.jsx)("div",{className:"hidden print-recipe-card print:block print:fixed print:inset-0 print:bg-white print:p-8 print:z-[9999] print:m-0",children:(0,i.jsxs)("div",{className:"print:max-w-none print:w-full print:h-full print:overflow-visible print:m-0 print:p-0",children:[(0,i.jsxs)("div",{className:"print:flex print:justify-between print:items-center print:mb-8 print:border-b print:border-gray-300 print:pb-4",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("h1",{className:"print:text-3xl print:font-bold print:text-black print:mb-2",children:p(j.name)}),(0,i.jsxs)("p",{className:"print:text-lg print:text-gray-600",children:["Yield: ",F," ",j.yield_unit,F!==j.yield&&(0,i.jsxs)("span",{className:"print:ml-2 print:text-sm print:text-gray-500",children:["(scaled from ",j.yield," ",j.yield_unit,")"]})]})]}),(0,i.jsxs)("div",{className:"print:flex print:items-center print:gap-3",children:[(0,i.jsx)("img",{src:"/images/prepflow-logo.png",alt:"PrepFlow",className:"print:w-16 print:h-16 print:object-contain"}),(0,i.jsxs)("div",{className:"print:text-right",children:[(0,i.jsx)("div",{className:"print:text-sm print:font-semibold print:text-black",children:"PrepFlow"}),(0,i.jsx)("div",{className:"print:text-xs print:text-gray-500",children:"Kitchen Management"})]})]})]}),(0,i.jsxs)("div",{className:"print:mb-8",children:[(0,i.jsx)("h2",{className:"print:text-2xl print:font-bold print:text-black print:mb-4 print:border-b print:border-gray-300 print:pb-2",children:"\uD83D\uDCCB Ingredients"}),(0,i.jsx)("div",{className:"print:space-y-2",children:y.map((e,t)=>{let n=e.ingredients,s=Q(e.quantity,e.unit);return(0,i.jsxs)("div",{className:"print:flex print:justify-between print:items-center print:py-1 print:border-b print:border-gray-100 print:last:border-b-0",children:[(0,i.jsxs)("div",{className:"print:flex print:items-center print:gap-3",children:[(0,i.jsxs)("span",{className:"print:text-sm print:text-gray-500 print:font-mono print:w-6",children:[String(t+1).padStart(2,"0"),"."]}),(0,i.jsx)("span",{className:"print:text-black print:font-medium",children:n.ingredient_name})]}),(0,i.jsxs)("span",{className:"print:text-black print:font-semibold",children:[s.value," ",s.unit]})]},e.id)})})]}),(0,i.jsxs)("div",{className:"print:mb-8",children:[(0,i.jsx)("h2",{className:"print:text-2xl print:font-bold print:text-black print:mb-4 print:border-b print:border-gray-300 print:pb-2",children:"\uD83E\uDD16 Cooking Instructions"}),(0,i.jsx)("div",{className:"print:text-black print:leading-relaxed print:whitespace-pre-line",children:D})]}),(0,i.jsxs)("div",{className:"print:mt-12 print:pt-4 print:border-t print:border-gray-300 print:text-center print:text-xs print:text-gray-500",children:[(0,i.jsx)("p",{children:"Generated by PrepFlow Kitchen Management System"}),(0,i.jsxs)("p",{children:["Printed on ",new Date().toLocaleDateString()," at ",new Date().toLocaleTimeString()]})]})]})})]})})}},3168:(e,t,n)=>{"use strict";n.d(t,{ND:()=>a});var i=n(2354);n(9509);let s="https://dulkrqgjfohsuxhsmofo.supabase.co",r="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImR1bGtycWdqZm9oc3V4aHNtb2ZvIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTY5NzYwMDMsImV4cCI6MjA3MjU1MjAwM30.b_P98mAantymNfWy1Qz18SaR-LwrPjuaebO2Uj_5JK8";if(!s||!r)throw Error("Missing Supabase environment variables. Please check your .env.local file.");let a=(0,i.UU)(s,r)},5695:(e,t,n)=>{"use strict";var i=n(8999);n.o(i,"usePathname")&&n.d(t,{usePathname:function(){return i.usePathname}}),n.o(i,"useRouter")&&n.d(t,{useRouter:function(){return i.useRouter}}),n.o(i,"useSearchParams")&&n.d(t,{useSearchParams:function(){return i.useSearchParams}})},6766:(e,t,n)=>{"use strict";n.d(t,{default:()=>s.a});var i=n(1469),s=n.n(i)},8081:(e,t,n)=>{"use strict";function i(e){return e?e.split(" ").map(e=>{let t=e.toLowerCase();return"and"===t||"or"===t||"the"===t||"of"===t||"in"===t||"with"===t||"for"===t||"to"===t||"from"===t?t:e.charAt(0).toUpperCase()+e.slice(1).toLowerCase()}).join(" "):""}function s(e){return i(e)}function r(e){return i(e)}function a(e){return i(e)}function o(e){return i(e)}function l(e){return i(e)}function d(e){return i(e)}function c(e){return i(e)}n.d(t,{$m:()=>c,M$:()=>l,SC:()=>a,Ts:()=>r,_J:()=>s,xQ:()=>d,zl:()=>o})}},e=>{e.O(0,[354,63,441,964,358],()=>e(e.s=873)),_N_E=e.O()}]);