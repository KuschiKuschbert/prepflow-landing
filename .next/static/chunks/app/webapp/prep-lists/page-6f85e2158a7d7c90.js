(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6220],{95252:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>l});var a=s(95155),i=s(12115),r=s(34908),n=s(12104);function l(){let{t:e}=(0,r.Bd)(),[t,s]=(0,i.useState)([]),[l,c]=(0,i.useState)([]),[o,d]=(0,i.useState)([]),[x,p]=(0,i.useState)(!1),[m,h]=(0,i.useState)(null),[u,g]=(0,i.useState)(!1),[b,f]=(0,i.useState)(null),[j,v]=(0,i.useState)({kitchenSectionId:"",name:"",notes:"",items:[]}),y="user-123";(0,i.useEffect)(()=>{N(),w(),C()},[]);let N=async()=>{try{let e=await fetch("/api/prep-lists?userId=".concat(y)),t=await e.json();t.success?s(t.data):h(t.message||"Failed to fetch prep lists")}catch(e){h("Failed to fetch prep lists")}finally{p(!1)}},w=async()=>{try{let e=await fetch("/api/kitchen-sections?userId=".concat(y)),t=await e.json();t.success&&c(t.data)}catch(e){console.error("Failed to fetch kitchen sections:",e)}},C=async()=>{try{let e=await fetch("/api/ingredients?userId=".concat(y)),t=await e.json();t.success&&d(t.data)}catch(e){console.error("Failed to fetch ingredients:",e)}},L=async e=>{e.preventDefault();try{let e=b?"PUT":"POST",t=b?{id:b.id,kitchenSectionId:j.kitchenSectionId,name:j.name,notes:j.notes,status:"draft",items:j.items.filter(e=>e.ingredientId&&e.quantity)}:{userId:y,kitchenSectionId:j.kitchenSectionId,name:j.name,notes:j.notes,items:j.items.filter(e=>e.ingredientId&&e.quantity)},s=await fetch("/api/prep-lists",{method:e,headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}),a=await s.json();a.success?(await N(),E(),h(null)):h(a.message||"Failed to save prep list")}catch(e){h("Failed to save prep list")}},k=async e=>{if(confirm("Are you sure you want to delete this prep list?"))try{let t=await fetch("/api/prep-lists?id=".concat(e),{method:"DELETE"}),s=await t.json();s.success?await N():h(s.message||"Failed to delete prep list")}catch(e){h("Failed to delete prep list")}},D=async(e,t)=>{try{let s=await fetch("/api/prep-lists",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:e,status:t})}),a=await s.json();a.success?await N():h(a.message||"Failed to update status")}catch(e){h("Failed to update status")}},S=(e,t,s)=>{let a=[...j.items];a[e]={...a[e],[t]:s},v({...j,items:a})},E=()=>{v({kitchenSectionId:"",name:"",notes:"",items:[]}),g(!1),f(null)};return x?(0,a.jsx)(n.JQ,{}):(0,a.jsx)("div",{className:"min-h-screen bg-[#0a0a0a] text-white",children:(0,a.jsxs)("div",{className:"container mx-auto px-4 py-8",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-8",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("h1",{className:"text-3xl font-bold text-white mb-2",children:["\uD83D\uDCDD ",e("prepLists.title","Prep Lists")]}),(0,a.jsx)("p",{className:"text-gray-400",children:e("prepLists.subtitle","Create and manage kitchen prep lists by section")})]}),(0,a.jsxs)("button",{onClick:()=>g(!0),className:"px-6 py-3 bg-gradient-to-r from-[#29E7CD] to-[#D925C7] text-white rounded-2xl hover:shadow-xl transition-all duration-200 font-semibold",children:["+ ",e("prepLists.createPrepList","Create Prep List")]})]}),m&&(0,a.jsx)("div",{className:"mb-6 p-4 bg-red-400/10 border border-red-400/20 rounded-2xl",children:(0,a.jsx)("p",{className:"text-red-400",children:m})}),(0,a.jsx)("div",{className:"space-y-4",children:0===t.length?(0,a.jsxs)("div",{className:"text-center py-12",children:[(0,a.jsx)("div",{className:"w-20 h-20 bg-gradient-to-br from-[#29E7CD]/20 to-[#D925C7]/20 rounded-2xl flex items-center justify-center mx-auto mb-4",children:(0,a.jsx)("span",{className:"text-3xl",children:"\uD83D\uDCDD"})}),(0,a.jsx)("h3",{className:"text-xl font-semibold text-white mb-2",children:e("prepLists.noPrepLists","No Prep Lists")}),(0,a.jsx)("p",{className:"text-gray-400 mb-6",children:e("prepLists.noPrepListsDesc","Create your first prep list to organize kitchen preparation")}),(0,a.jsx)("button",{onClick:()=>g(!0),className:"px-6 py-3 bg-gradient-to-r from-[#29E7CD] to-[#D925C7] text-white rounded-2xl hover:shadow-xl transition-all duration-200 font-semibold",children:e("prepLists.createFirstPrepList","Create Your First Prep List")})]}):t.map(t=>(0,a.jsx)("div",{className:"bg-[#1f1f1f] border border-[#2a2a2a] rounded-2xl p-6 hover:shadow-xl hover:border-[#29E7CD]/50 transition-all duration-200",children:(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-4 mb-3",children:[(0,a.jsx)("div",{className:"w-12 h-12 rounded-xl flex items-center justify-center",style:{backgroundColor:"".concat(t.kitchen_sections.color,"20")},children:(0,a.jsx)("span",{className:"text-lg",children:"\uD83D\uDCDD"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"font-semibold text-white text-lg",children:t.name}),(0,a.jsx)("p",{className:"text-sm text-gray-400",children:t.kitchen_sections.name})]})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-4 mb-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-xs text-gray-400 mb-1",children:e("prepLists.status","Status")}),(0,a.jsx)("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ".concat((e=>{switch(e){case"draft":default:return"text-gray-400 bg-gray-400/10";case"active":return"text-blue-400 bg-blue-400/10";case"completed":return"text-green-400 bg-green-400/10";case"cancelled":return"text-red-400 bg-red-400/10"}})(t.status)),children:t.status.charAt(0).toUpperCase()+t.status.slice(1)})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-xs text-gray-400 mb-1",children:e("prepLists.items","Items")}),(0,a.jsx)("p",{className:"text-white font-semibold",children:t.prep_list_items.length})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-xs text-gray-400 mb-1",children:e("prepLists.created","Created")}),(0,a.jsx)("p",{className:"text-white font-semibold",children:new Date(t.created_at).toLocaleDateString()})]})]}),t.notes&&(0,a.jsx)("p",{className:"text-sm text-gray-300 mb-4",children:t.notes}),t.prep_list_items.length>0&&(0,a.jsxs)("div",{className:"bg-[#2a2a2a]/30 rounded-xl p-4",children:[(0,a.jsx)("h4",{className:"text-sm font-semibold text-white mb-3",children:e("prepLists.items","Items")}),(0,a.jsxs)("div",{className:"space-y-2",children:[t.prep_list_items.slice(0,3).map(e=>(0,a.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,a.jsx)("span",{className:"text-gray-300",children:e.ingredients.name}),(0,a.jsxs)("span",{className:"text-white font-semibold",children:[e.quantity," ",e.unit]})]},e.id)),t.prep_list_items.length>3&&(0,a.jsxs)("p",{className:"text-xs text-gray-400",children:["+",t.prep_list_items.length-3," more items"]})]})]})]}),(0,a.jsxs)("div",{className:"flex flex-col space-y-2",children:[(0,a.jsxs)("select",{value:t.status,onChange:e=>D(t.id,e.target.value),className:"px-3 py-2 bg-[#2a2a2a] border border-[#2a2a2a] rounded-xl text-white text-sm focus:ring-2 focus:ring-[#29E7CD] focus:border-transparent",children:[(0,a.jsx)("option",{value:"draft",children:"Draft"}),(0,a.jsx)("option",{value:"active",children:"Active"}),(0,a.jsx)("option",{value:"completed",children:"Completed"}),(0,a.jsx)("option",{value:"cancelled",children:"Cancelled"})]}),(0,a.jsxs)("div",{className:"flex space-x-2",children:[(0,a.jsx)("button",{onClick:()=>{f(t),v({kitchenSectionId:t.kitchen_section_id,name:t.name,notes:t.notes||"",items:t.prep_list_items.map(e=>({ingredientId:e.ingredient_id,quantity:e.quantity.toString(),unit:e.unit,notes:e.notes||""}))}),g(!0)},className:"p-2 text-[#29E7CD] hover:bg-[#29E7CD]/10 rounded-xl transition-colors",title:String(e("prepLists.edit","Edit")),children:(0,a.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})})}),(0,a.jsx)("button",{onClick:()=>k(t.id),className:"p-2 text-red-400 hover:bg-red-400/10 rounded-xl transition-colors",title:String(e("prepLists.delete","Delete")),children:(0,a.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})]})]})},t.id))}),u&&(0,a.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50",children:(0,a.jsxs)("div",{className:"bg-[#1f1f1f] border border-[#2a2a2a] rounded-3xl p-6 w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,a.jsx)("h2",{className:"text-xl font-semibold text-white",children:b?e("prepLists.editPrepList","Edit Prep List"):e("prepLists.createPrepList","Create Prep List")}),(0,a.jsx)("button",{onClick:E,className:"p-2 text-gray-400 hover:text-white transition-colors",children:(0,a.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,a.jsxs)("form",{onSubmit:L,className:"space-y-6",children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:e("prepLists.kitchenSection","Kitchen Section")}),(0,a.jsxs)("select",{value:j.kitchenSectionId,onChange:e=>v({...j,kitchenSectionId:e.target.value}),className:"w-full px-4 py-3 bg-[#2a2a2a] border border-[#2a2a2a] rounded-xl text-white focus:ring-2 focus:ring-[#29E7CD] focus:border-transparent",required:!0,children:[(0,a.jsx)("option",{value:"",children:e("prepLists.selectSection","Select a kitchen section")}),l.map(e=>(0,a.jsx)("option",{value:e.id,children:e.name},e.id))]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:e("prepLists.name","Prep List Name")}),(0,a.jsx)("input",{type:"text",value:j.name,onChange:e=>v({...j,name:e.target.value}),className:"w-full px-4 py-3 bg-[#2a2a2a] border border-[#2a2a2a] rounded-xl text-white focus:ring-2 focus:ring-[#29E7CD] focus:border-transparent",placeholder:"e.g., Morning Prep - Hot Kitchen",required:!0})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:e("prepLists.notes","Notes")}),(0,a.jsx)("textarea",{value:j.notes,onChange:e=>v({...j,notes:e.target.value}),className:"w-full px-4 py-3 bg-[#2a2a2a] border border-[#2a2a2a] rounded-xl text-white focus:ring-2 focus:ring-[#29E7CD] focus:border-transparent",rows:3,placeholder:String(e("prepLists.notesPlaceholder","Optional notes about this prep list"))})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-white",children:e("prepLists.items","Items")}),(0,a.jsxs)("button",{type:"button",onClick:()=>{v({...j,items:[...j.items,{ingredientId:"",quantity:"",unit:"",notes:""}]})},className:"px-4 py-2 bg-[#29E7CD]/10 text-[#29E7CD] rounded-xl hover:bg-[#29E7CD]/20 transition-colors text-sm font-semibold",children:["+ ",e("prepLists.addItem","Add Item")]})]}),(0,a.jsx)("div",{className:"space-y-3",children:j.items.map((t,s)=>(0,a.jsxs)("div",{className:"bg-[#2a2a2a]/30 rounded-xl p-4",children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-3 mb-3",children:[(0,a.jsxs)("div",{className:"md:col-span-2",children:[(0,a.jsx)("label",{className:"block text-xs text-gray-400 mb-1",children:e("prepLists.ingredient","Ingredient")}),(0,a.jsxs)("select",{value:t.ingredientId,onChange:e=>S(s,"ingredientId",e.target.value),className:"w-full px-3 py-2 bg-[#1f1f1f] border border-[#2a2a2a] rounded-lg text-white text-sm focus:ring-2 focus:ring-[#29E7CD] focus:border-transparent",required:!0,children:[(0,a.jsx)("option",{value:"",children:e("prepLists.selectIngredient","Select ingredient")}),o.map(e=>(0,a.jsxs)("option",{value:e.id,children:[e.name," (",e.unit,")"]},e.id))]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-xs text-gray-400 mb-1",children:e("prepLists.quantity","Quantity")}),(0,a.jsx)("input",{type:"number",step:"0.01",value:t.quantity,onChange:e=>S(s,"quantity",e.target.value),className:"w-full px-3 py-2 bg-[#1f1f1f] border border-[#2a2a2a] rounded-lg text-white text-sm focus:ring-2 focus:ring-[#29E7CD] focus:border-transparent",placeholder:"0",required:!0})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-xs text-gray-400 mb-1",children:e("prepLists.unit","Unit")}),(0,a.jsx)("input",{type:"text",value:t.unit,onChange:e=>S(s,"unit",e.target.value),className:"w-full px-3 py-2 bg-[#1f1f1f] border border-[#2a2a2a] rounded-lg text-white text-sm focus:ring-2 focus:ring-[#29E7CD] focus:border-transparent",placeholder:"kg",required:!0})]})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("input",{type:"text",value:t.notes,onChange:e=>S(s,"notes",e.target.value),className:"flex-1 px-3 py-2 bg-[#1f1f1f] border border-[#2a2a2a] rounded-lg text-white text-sm focus:ring-2 focus:ring-[#29E7CD] focus:border-transparent mr-3",placeholder:String(e("prepLists.itemNotes","Item notes (optional)"))}),(0,a.jsx)("button",{type:"button",onClick:()=>{v({...j,items:j.items.filter((e,t)=>t!==s)})},className:"p-2 text-red-400 hover:bg-red-400/10 rounded-lg transition-colors",children:(0,a.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})]},s))})]}),(0,a.jsxs)("div",{className:"flex space-x-3 pt-4",children:[(0,a.jsx)("button",{type:"button",onClick:E,className:"flex-1 px-4 py-3 bg-[#2a2a2a] text-gray-300 rounded-xl hover:bg-[#2a2a2a]/80 transition-colors",children:e("prepLists.cancel","Cancel")}),(0,a.jsx)("button",{type:"submit",className:"flex-1 px-4 py-3 bg-gradient-to-r from-[#29E7CD] to-[#D925C7] text-white rounded-xl hover:shadow-xl transition-all duration-200 font-semibold",children:b?e("prepLists.update","Update"):e("prepLists.create","Create")})]})]})]})})]})})}},97915:(e,t,s)=>{Promise.resolve().then(s.bind(s,95252))}},e=>{e.O(0,[2076,563,8650,8405,9420,622,7979,1899,4450,9324,8585,9592,433,2652,3494,2574,9173,3023,1356,309,4191,2834,957,6691,1151,9473,9219,6053,3376,7358],()=>e(e.s=97915)),_N_E=e.O()}]);