(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4760],{977:(e,s,a)=>{Promise.resolve().then(a.bind(a,70204))},70204:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>n});var t=a(95155),i=a(12115),l=a(34908),r=a(12104);function n(){let{t:e}=(0,l.Bd)(),[s,a]=(0,i.useState)([]),[n,c]=(0,i.useState)(!1),[d,o]=(0,i.useState)(null),[x,m]=(0,i.useState)(!1),[p,h]=(0,i.useState)(null),[u,g]=(0,i.useState)(""),b="user-123";(0,i.useEffect)(()=>{f()},[]);let f=async()=>{try{let e=await fetch("/api/ai-specials?userId=".concat(b)),s=await e.json();s.success?a(s.data):o(s.message||"Failed to fetch AI specials")}catch(e){o("Failed to fetch AI specials")}finally{c(!1)}},j=async e=>{if(e.preventDefault(),!p)return void o("Please select an image file");m(!0),o(null);try{let e=new FileReader;e.onload=async()=>{let s=e.result,a=await fetch("/api/ai-specials",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:b,imageData:s,prompt:u||void 0})}),t=await a.json();t.success?(await f(),h(null),g("")):o(t.message||"Failed to process image"),m(!1)},e.readAsDataURL(p)}catch(e){o("Failed to process image"),m(!1)}};return n?(0,t.jsx)("div",{className:"min-h-screen bg-[#0a0a0a] p-4 sm:p-6",children:(0,t.jsxs)("div",{className:"max-w-7xl mx-auto",children:[(0,t.jsx)("div",{className:"mb-8",children:(0,t.jsx)(r.O0,{variant:"stats",height:"64px"})}),(0,t.jsx)("div",{className:"bg-[#1f1f1f] p-6 rounded-3xl shadow-lg border border-[#2a2a2a] mb-8",children:(0,t.jsx)(r.O0,{variant:"form",height:"200px"})}),(0,t.jsx)("div",{className:"space-y-4",children:(0,t.jsx)(r.O0,{variant:"card",count:3,height:"120px"})})]})}):(0,t.jsx)("div",{className:"min-h-screen bg-[#0a0a0a] text-white",children:(0,t.jsxs)("div",{className:"container mx-auto px-4 py-8",children:[(0,t.jsx)("div",{className:"flex items-center justify-between mb-8",children:(0,t.jsxs)("div",{children:[(0,t.jsxs)("h1",{className:"text-3xl font-bold text-white mb-2",children:["\uD83E\uDD16 ",e("aiSpecials.title","AI Specials Generator")]}),(0,t.jsx)("p",{className:"text-gray-400",children:e("aiSpecials.subtitle","Generate specials from ingredient photos using AI")})]})}),d&&(0,t.jsx)("div",{className:"mb-6 p-4 bg-red-400/10 border border-red-400/20 rounded-2xl",children:(0,t.jsx)("p",{className:"text-red-400",children:d})}),(0,t.jsxs)("div",{className:"bg-[#1f1f1f] border border-[#2a2a2a] rounded-2xl p-6 mb-8",children:[(0,t.jsx)("h2",{className:"text-xl font-semibold text-white mb-4",children:e("aiSpecials.uploadImage","Upload Ingredient Image")}),(0,t.jsxs)("form",{onSubmit:j,className:"space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:e("aiSpecials.selectImage","Select Image")}),(0,t.jsx)("input",{type:"file",accept:"image/*",onChange:e=>{var s;let a=null==(s=e.target.files)?void 0:s[0];a&&h(a)},className:"w-full px-4 py-3 bg-[#2a2a2a] border border-[#2a2a2a] rounded-xl text-white focus:ring-2 focus:ring-[#29E7CD] focus:border-transparent",required:!0}),p&&(0,t.jsxs)("p",{className:"text-sm text-gray-400 mt-2",children:[e("aiSpecials.selectedFile","Selected"),": ",p.name]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:e("aiSpecials.customPrompt","Custom Prompt (Optional)")}),(0,t.jsx)("textarea",{value:u,onChange:e=>g(e.target.value),className:"w-full px-4 py-3 bg-[#2a2a2a] border border-[#2a2a2a] rounded-xl text-white focus:ring-2 focus:ring-[#29E7CD] focus:border-transparent",rows:3,placeholder:"e.g., Create a vegetarian special using these ingredients"})]}),(0,t.jsx)("button",{type:"submit",disabled:x||!p,className:"w-full px-6 py-3 bg-gradient-to-r from-[#29E7CD] to-[#D925C7] text-white rounded-xl hover:shadow-xl transition-all duration-200 font-semibold disabled:opacity-50 disabled:cursor-not-allowed",children:x?(0,t.jsxs)("div",{className:"flex items-center justify-center space-x-2",children:[(0,t.jsx)("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),(0,t.jsx)("span",{children:e("aiSpecials.processing","Processing...")})]}):e("aiSpecials.generateSpecials","Generate Specials")})]})]}),(0,t.jsx)("div",{className:"space-y-4",children:0===s.length?(0,t.jsxs)("div",{className:"text-center py-12",children:[(0,t.jsx)("div",{className:"w-20 h-20 bg-gradient-to-br from-[#29E7CD]/20 to-[#D925C7]/20 rounded-2xl flex items-center justify-center mx-auto mb-4",children:(0,t.jsx)("span",{className:"text-3xl",children:"\uD83E\uDD16"})}),(0,t.jsx)("h3",{className:"text-xl font-semibold text-white mb-2",children:e("aiSpecials.noResults","No AI Specials Generated")}),(0,t.jsx)("p",{className:"text-gray-400 mb-6",children:e("aiSpecials.noResultsDesc","Upload an image of your ingredients to generate AI-powered specials")})]}):s.map(s=>{var a,i;return(0,t.jsx)("div",{className:"bg-[#1f1f1f] border border-[#2a2a2a] rounded-2xl p-6 hover:shadow-xl hover:border-[#29E7CD]/50 transition-all duration-200",children:(0,t.jsxs)("div",{className:"flex items-start space-x-4 mb-4",children:[(0,t.jsx)("div",{className:"w-16 h-16 bg-gradient-to-br from-[#29E7CD]/20 to-[#D925C7]/20 rounded-xl flex items-center justify-center flex-shrink-0",children:(0,t.jsx)("span",{className:"text-lg",children:"\uD83E\uDD16"})}),(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-4 mb-3",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"font-semibold text-white text-lg",children:e("aiSpecials.aiAnalysis","AI Analysis")}),(0,t.jsx)("p",{className:"text-sm text-gray-400",children:new Date(s.created_at).toLocaleDateString()})]}),(0,t.jsx)("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ".concat((e=>{switch(e){case"pending":return"text-yellow-400 bg-yellow-400/10";case"processing":return"text-blue-400 bg-blue-400/10";case"completed":return"text-green-400 bg-green-400/10";case"failed":return"text-red-400 bg-red-400/10";default:return"text-gray-400 bg-gray-400/10"}})(s.status)),children:s.status.charAt(0).toUpperCase()+s.status.slice(1)})]}),"completed"===s.status&&s.ai_response&&(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h4",{className:"text-sm font-semibold text-white mb-2",children:e("aiSpecials.detectedIngredients","Detected Ingredients")}),(0,t.jsx)("div",{className:"flex flex-wrap gap-2",children:null==(a=s.ai_response.ingredients)?void 0:a.map((e,s)=>(0,t.jsx)("span",{className:"px-3 py-1 bg-[#29E7CD]/10 text-[#29E7CD] rounded-full text-sm border border-[#29E7CD]/20",children:e},s))})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h4",{className:"text-sm font-semibold text-white mb-2",children:e("aiSpecials.specialSuggestions","Special Suggestions")}),(0,t.jsx)("div",{className:"space-y-2",children:null==(i=s.ai_response.suggestions)?void 0:i.map((e,s)=>(0,t.jsx)("div",{className:"p-3 bg-[#2a2a2a]/30 rounded-xl border border-[#2a2a2a]",children:(0,t.jsx)("p",{className:"text-sm text-gray-300",children:e})},s))})]}),s.ai_response.confidence&&(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsxs)("span",{className:"text-xs text-gray-400",children:[e("aiSpecials.confidence","AI Confidence"),":"]}),(0,t.jsx)("div",{className:"flex-1 bg-[#2a2a2a] rounded-full h-2",children:(0,t.jsx)("div",{className:"bg-gradient-to-r from-[#29E7CD] to-[#D925C7] h-2 rounded-full transition-all duration-300",style:{width:"".concat(100*s.ai_response.confidence,"%")}})}),(0,t.jsxs)("span",{className:"text-xs text-gray-400",children:[Math.round(100*s.ai_response.confidence),"%"]})]})]}),"processing"===s.status&&(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)("div",{className:"w-4 h-4 border-2 border-[#29E7CD] border-t-transparent rounded-full animate-spin"}),(0,t.jsx)("span",{className:"text-sm text-gray-400",children:e("aiSpecials.processingImage","Processing image with AI...")})]}),"failed"===s.status&&(0,t.jsx)("div",{className:"text-sm text-red-400",children:e("aiSpecials.processingFailed","Failed to process image. Please try again.")})]})]})},s.id)})})]})})}}},e=>{e.O(0,[2076,563,8650,8405,9420,622,7979,1899,4450,9324,8585,9592,433,2652,3494,2574,9173,3023,1356,309,4191,2834,957,6691,1151,9473,9219,6053,3376,7358],()=>e(e.s=977)),_N_E=e.O()}]);