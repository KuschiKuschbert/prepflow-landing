(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7177],{19501:(e,t,r)=>{Promise.resolve().then(r.t.bind(r,41290,23)),Promise.resolve().then(r.bind(r,70899)),Promise.resolve().then(r.bind(r,32733)),Promise.resolve().then(r.bind(r,15254)),Promise.resolve().then(r.bind(r,63179)),Promise.resolve().then(r.bind(r,37025)),Promise.resolve().then(r.t.bind(r,54587,23)),Promise.resolve().then(r.t.bind(r,24705,23))},32733:(e,t,r)=>{"use strict";r.d(t,{default:()=>c});var n=r(95155),a=r(68321),i=r(20063),s=r(12115);function o(e){let{measurementId:t}=e,r=(0,i.usePathname)(),o=(0,i.useSearchParams)(),c=(0,s.useRef)(!1),l=()=>{window.gtag||(window.dataLayer=window.dataLayer||[],window.gtag=function(){window.dataLayer.push(arguments)},window.gtag("js",new Date),window.gtag("config",t,{page_title:document.title,page_location:window.location.href,send_page_view:!1}),c.current=!0,console.log("✅ Google Analytics initialized with ID:",t))};return(0,s.useEffect)(()=>{r&&window.gtag&&c.current&&(window.gtag("event","page_view",{page_title:document.title,page_location:window.location.href,page_path:r+(o.toString()?"?".concat(o.toString()):"")}),console.log("\uD83D\uDCCA GA4 Page View tracked:",r))},[r,o]),(0,s.useEffect)(()=>{let e=()=>{"function"==typeof window.gtag?l():setTimeout(e,100)};e()},[t]),(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(a.default,{strategy:"afterInteractive",src:"https://www.googletagmanager.com/gtag/js?id=".concat(t),onLoad:()=>{console.log("\uD83D\uDCE5 Google Analytics script loaded"),l()},onError:()=>{console.error("❌ Failed to load Google Analytics script")}}),(0,n.jsx)(a.default,{id:"google-analytics-init",strategy:"afterInteractive",dangerouslySetInnerHTML:{__html:"\n            window.dataLayer = window.dataLayer || [];\n            function gtag(){dataLayer.push(arguments);}\n            gtag('js', new Date());\n            gtag('config', '".concat(t,"', {\n              page_title: document.title,\n              page_location: window.location.href,\n              send_page_view: false,\n            });\n            console.log('\uD83D\uDD27 Google Analytics gtag function initialized');\n          ")},onLoad:()=>{console.log("✅ Google Analytics initialization script loaded"),l()}})]})}function c(e){let{measurementId:t}=e;return(0,n.jsx)(s.Suspense,{fallback:null,children:(0,n.jsx)(o,{measurementId:t})})}r(32733)},63179:(e,t,r)=>{"use strict";r.d(t,{default:()=>s});var n=r(12115),a=r(73412),i=r(98901);function s(e){let{enabled:t=!0,onMetric:r}=e;return(0,n.useEffect)(()=>{if(!t)return;let e=e=>{(0,i.sx)(e.name,"web-vitals",e.id,Math.round(e.value)),window.gtag&&window.gtag("event",e.name,{event_category:"Web Vitals",event_label:e.id,value:Math.round(e.value),non_interaction:!0,custom_parameter_metric_name:e.name,custom_parameter_metric_value:Math.round(e.value),custom_parameter_metric_delta:Math.round(e.delta),custom_parameter_metric_rating:e.rating,custom_parameter_page:window.location.pathname}),r&&r(e)};(0,a.IN)(e),(0,a.rH)(e),(0,a.zB)(e),(0,a.fK)(e),(0,a.Ck)(e)},[t,r]),null}},70899:(e,t,r)=>{"use strict";r.d(t,{default:()=>y});var n=r(95155),a=r(12115),i=r(98901);let s={coreWebVitals:{lcp:2500,fid:100,cls:.1,fcp:1800,tti:3800,si:3e3,tbt:300},resources:{totalSize:5e5,jsSize:2e5,cssSize:5e4,imageSize:1e5,fontSize:3e4,thirdPartySize:1e5},network:{totalRequests:50,jsRequests:10,cssRequests:3,imageRequests:15,fontRequests:5,thirdPartyRequests:10},scores:{performance:80,accessibility:90,bestPractices:80,seo:80},pages:{landing:{lcp:2e3,fid:80,cls:.08,totalSize:4e5,jsSize:15e4},webapp:{lcp:3e3,fid:100,cls:.1,totalSize:6e5,jsSize:25e4},auth:{lcp:1500,fid:60,cls:.05,totalSize:2e5,jsSize:1e5}}};class o{static getInstance(){return o.instance||(o.instance=new o),o.instance}checkBudget(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"landing",r=[],n=this.budgets.pages[t]||this.budgets.pages.landing;return e.lcp&&e.lcp>n.lcp&&r.push({metric:"lcp",actual:e.lcp,budget:n.lcp,severity:this.getSeverity(e.lcp,n.lcp),message:"LCP ".concat(e.lcp,"ms exceeds budget of ").concat(n.lcp,"ms")}),e.fid&&e.fid>n.fid&&r.push({metric:"fid",actual:e.fid,budget:n.fid,severity:this.getSeverity(e.fid,n.fid),message:"FID ".concat(e.fid,"ms exceeds budget of ").concat(n.fid,"ms")}),e.cls&&e.cls>n.cls&&r.push({metric:"cls",actual:e.cls,budget:n.cls,severity:this.getSeverity(e.cls,n.cls),message:"CLS ".concat(e.cls," exceeds budget of ").concat(n.cls)}),e.resources&&(e.resources.totalSize>n.totalSize&&r.push({metric:"totalSize",actual:e.resources.totalSize,budget:n.totalSize,severity:this.getSeverity(e.resources.totalSize,n.totalSize),message:"Total size ".concat(e.resources.totalSize," bytes exceeds budget of ").concat(n.totalSize," bytes")}),e.resources.jsSize>n.jsSize&&r.push({metric:"jsSize",actual:e.resources.jsSize,budget:n.jsSize,severity:this.getSeverity(e.resources.jsSize,n.jsSize),message:"JavaScript size ".concat(e.resources.jsSize," bytes exceeds budget of ").concat(n.jsSize," bytes")})),this.violations.push(...r),{passed:0===r.length,violations:r,score:this.calculateScore(r),timestamp:Date.now(),pageType:t}}getSeverity(e,t){let r=e/t;return r>=2?"critical":r>=1.5?"high":r>=1.2?"medium":"low"}calculateScore(e){if(0===e.length)return 100;let t=e.filter(e=>"critical"===e.severity).length,r=e.filter(e=>"high"===e.severity).length;return Math.round(Math.max(0,100-(25*t+15*r+10*e.filter(e=>"medium"===e.severity).length+5*e.filter(e=>"low"===e.severity).length)))}getViolations(){return[...this.violations]}getViolationsBySeverity(e){return this.violations.filter(t=>t.severity===e)}clearViolations(){this.violations=[]}generateBudgetReport(){let e=this.violations.length,t=this.getViolationsBySeverity("critical").length,r=this.getViolationsBySeverity("high").length;return{totalViolations:e,criticalViolations:t,highViolations:r,mediumViolations:this.getViolationsBySeverity("medium").length,lowViolations:this.getViolationsBySeverity("low").length,score:this.calculateScore(this.violations),violations:this.violations,timestamp:Date.now()}}isWithinBudget(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"landing";return this.checkBudget(e,t).passed}getBudgetRecommendations(e){let t=[];return e.forEach(e=>{switch(e.metric){case"lcp":t.push("Optimize images, reduce server response time, or eliminate render-blocking resources");break;case"fid":t.push("Reduce JavaScript execution time or break up long tasks");break;case"cls":t.push("Add size attributes to images and videos, avoid inserting content above existing content");break;case"totalSize":t.push("Enable compression, remove unused code, or optimize images");break;case"jsSize":t.push("Code splitting, tree shaking, or remove unused JavaScript");break;case"cssSize":t.push("Remove unused CSS or inline critical CSS");break;case"imageSize":t.push("Optimize images, use modern formats (WebP/AVIF), or implement lazy loading");break;case"fontSize":t.push("Font subsetting, preloading, or use system fonts")}}),[...new Set(t)]}constructor(){this.violations=[],this.budgets=s}}let c=o.getInstance(),l={sampling:{performance:.1,errors:1,userInteractions:.05,resourceTiming:.2},thresholds:{lcp:2500,fid:100,cls:.1,fcp:1800,tti:3800,si:3e3,tbt:300},errorTracking:{enabled:!0,maxErrors:100,errorTimeout:5e3},session:{timeout:18e5,maxDuration:864e5}};class u{static getInstance(){return u.instance||(u.instance=new u),u.instance}initialize(){this.isInitialized||(console.log("\uD83D\uDD0D Initializing Advanced RUM monitoring..."),this.initializePerformanceMonitoring(),this.initializeErrorTracking(),this.initializeInteractionTracking(),this.initializeResourceMonitoring(),this.initializeNavigationMonitoring(),this.initializeSessionManagement(),this.isInitialized=!0,console.log("✅ Advanced RUM monitoring initialized"))}initializePerformanceMonitoring(){if(!(Math.random()>l.sampling.performance)){if("PerformanceObserver"in window){let e=new PerformanceObserver(e=>{let t=e.getEntries(),r=t[t.length-1];r&&(this.data.performance.lcp=r.startTime,this.trackPerformanceMetric("lcp",r.startTime))});e.observe({entryTypes:["largest-contentful-paint"]}),this.observers.set("lcp",e)}if("PerformanceObserver"in window){let e=new PerformanceObserver(e=>{e.getEntries().forEach(e=>{let t=e.processingStart-e.startTime;this.data.performance.fid=t,this.trackPerformanceMetric("fid",t)})});e.observe({entryTypes:["first-input"]}),this.observers.set("fid",e)}if("PerformanceObserver"in window){let e=0,t=new PerformanceObserver(t=>{t.getEntries().forEach(t=>{t.hadRecentInput||(e+=t.value)})});t.observe({entryTypes:["layout-shift"]}),this.observers.set("cls",t),setTimeout(()=>{this.data.performance.cls=e,this.trackPerformanceMetric("cls",e)},5e3)}if("memory"in performance){let e=performance.memory;this.data.performance.memory={usedJSHeapSize:e.usedJSHeapSize,totalJSHeapSize:e.totalJSHeapSize,jsHeapSizeLimit:e.jsHeapSizeLimit}}}}initializeErrorTracking(){l.errorTracking.enabled&&(window.addEventListener("error",e=>{var t;this.trackError({message:e.message,stack:null==(t=e.error)?void 0:t.stack,filename:e.filename,lineno:e.lineno,colno:e.colno,timestamp:Date.now(),severity:this.getErrorSeverity(e.error),context:{url:window.location.href,userAgent:navigator.userAgent,viewport:{width:window.innerWidth,height:window.innerHeight}}})}),window.addEventListener("unhandledrejection",e=>{var t;this.trackError({message:"Unhandled Promise Rejection: ".concat(e.reason),stack:null==(t=e.reason)?void 0:t.stack,timestamp:Date.now(),severity:"high",context:{url:window.location.href,userAgent:navigator.userAgent}})}))}initializeInteractionTracking(){Math.random()>l.sampling.userInteractions||["click","scroll","keydown","resize","focus","blur"].forEach(e=>{window.addEventListener(e,t=>{this.trackInteraction({type:e,target:this.getElementSelector(t.target),timestamp:Date.now(),x:t.clientX,y:t.clientY,key:t.key,deltaX:t.deltaX,deltaY:t.deltaY})})})}initializeResourceMonitoring(){if(!(Math.random()>l.sampling.resourceTiming)&&"PerformanceObserver"in window){let e=new PerformanceObserver(e=>{e.getEntries().forEach(e=>{"resource"===e.entryType&&this.trackResource({name:e.name,type:e.initiatorType,duration:e.duration,size:e.transferSize||0,startTime:e.startTime,endTime:e.startTime+e.duration,success:e.transferSize>0,error:0===e.transferSize?"Failed to load":void 0})})});e.observe({entryTypes:["resource"]}),this.observers.set("resource",e)}}initializeNavigationMonitoring(){if("PerformanceObserver"in window){let e=new PerformanceObserver(e=>{e.getEntries().forEach(e=>{"navigation"===e.entryType&&(this.data.navigation={type:e.type,startTime:e.startTime,endTime:e.loadEventEnd,duration:e.loadEventEnd-e.startTime,redirectCount:e.redirectCount,transferSize:e.transferSize,encodedBodySize:e.encodedBodySize,decodedBodySize:e.decodedBodySize})})});e.observe({entryTypes:["navigation"]}),this.observers.set("navigation",e)}}initializeSessionManagement(){setTimeout(()=>{this.endSession()},l.session.timeout),document.addEventListener("visibilitychange",()=>{document.hidden?this.pauseSession():this.resumeSession()}),window.addEventListener("beforeunload",()=>{this.endSession()})}trackPerformanceMetric(e,t){let r=l.thresholds[e],n=r&&t>r;n&&console.warn("⚠️ Performance threshold exceeded: ".concat(e," = ").concat(t,"ms (threshold: ").concat(r,"ms)")),window.gtag&&window.gtag("event","performance_metric",{event_category:"performance",event_label:e,value:Math.round(t),custom_parameter_metric:e,custom_parameter_value:Math.round(t),custom_parameter_threshold:r,custom_parameter_violation:n})}trackError(e){!(this.errorCount>=l.errorTracking.maxErrors)&&(this.data.errors.push(e),this.errorCount++,console.error("\uD83D\uDEA8 RUM Error tracked:",e),window.gtag&&window.gtag("event","rum_error",{event_category:"error",event_label:e.severity,value:1,custom_parameter_error_message:e.message,custom_parameter_error_severity:e.severity,custom_parameter_error_filename:e.filename,custom_parameter_error_line:e.lineno}))}trackInteraction(e){this.data.interactions.push(e),window.gtag&&window.gtag("event","user_interaction",{event_category:"interaction",event_label:e.type,value:1,custom_parameter_interaction_type:e.type,custom_parameter_interaction_target:e.target})}trackResource(e){this.data.resources.push(e),window.gtag&&window.gtag("event","resource_load",{event_category:"performance",event_label:e.type,value:Math.round(e.duration),custom_parameter_resource_name:e.name,custom_parameter_resource_type:e.type,custom_parameter_resource_duration:Math.round(e.duration),custom_parameter_resource_size:e.size,custom_parameter_resource_success:e.success})}getErrorSeverity(e){return"ChunkLoadError"===e.name||"Loading chunk failed"===e.name?"critical":"TypeError"===e.name||"ReferenceError"===e.name?"high":"SyntaxError"===e.name?"medium":"low"}getElementSelector(e){return e.id?"#".concat(e.id):e.className?".".concat(e.className.split(" ")[0]):e.tagName.toLowerCase()}generateSessionId(){return"rum_"+Math.random().toString(36).substr(2,9)+"_"+Date.now()}initializeRUMData(){var e,t,r;return{sessionId:this.sessionId,userId:this.userId,page:window.location.pathname,timestamp:Date.now(),userAgent:navigator.userAgent,viewport:{width:window.innerWidth,height:window.innerHeight},connection:{effectiveType:(null==(e=navigator.connection)?void 0:e.effectiveType)||"unknown",downlink:(null==(t=navigator.connection)?void 0:t.downlink)||0,rtt:(null==(r=navigator.connection)?void 0:r.rtt)||0},performance:{},errors:[],interactions:[],resources:[],navigation:{type:"navigate",startTime:0,endTime:0,duration:0,redirectCount:0,transferSize:0,encodedBodySize:0,decodedBodySize:0}}}pauseSession(){console.log("⏸️ RUM session paused")}resumeSession(){console.log("▶️ RUM session resumed")}endSession(){console.log("\uD83C\uDFC1 RUM session ended"),this.sendRUMData(),this.observers.forEach(e=>e.disconnect()),this.observers.clear()}sendRUMData(){window.gtag&&window.gtag("event","rum_session_end",{event_category:"performance",event_label:"session_end",value:this.data.performance.lcp||0,custom_parameter_session_id:this.data.sessionId,custom_parameter_page:this.data.page,custom_parameter_errors:this.data.errors.length,custom_parameter_interactions:this.data.interactions.length,custom_parameter_resources:this.data.resources.length,custom_parameter_lcp:this.data.performance.lcp,custom_parameter_fid:this.data.performance.fid,custom_parameter_cls:this.data.performance.cls})}getRUMData(){return{...this.data}}setUserId(e){this.userId=e,this.data.userId=e}getSessionId(){return this.sessionId}constructor(){this.observers=new Map,this.errorCount=0,this.isInitialized=!1,this.sessionId=this.generateSessionId(),this.startTime=Date.now(),this.data=this.initializeRUMData()}}let d=u.getInstance(),m={successCriteria:{lcp:{threshold:2500,weight:.3},fid:{threshold:100,weight:.2},cls:{threshold:.1,weight:.2},fcp:{threshold:1800,weight:.15},tti:{threshold:3800,weight:.1},si:{threshold:3e3,weight:.05}},testDuration:12096e5,minSampleSize:100,maxSampleSize:1e4};class g{static getInstance(){return g.instance||(g.instance=new g),g.instance}createTest(e){let t=this.generateTestId(),r={...e,id:t,startDate:Date.now(),status:"draft"};return this.activeTests.set(t,r),this.testData.set(t,[]),console.log("\uD83E\uDDEA A/B test created: ".concat(e.name," (").concat(t,")")),t}startTest(e){let t=this.activeTests.get(e);return!!t&&(t.status="running",t.startDate=Date.now(),t.endDate=t.startDate+m.testDuration,console.log("\uD83D\uDE80 A/B test started: ".concat(t.name)),!0)}assignVariant(e,t){let r=this.activeTests.get(e);if(!r||"running"!==r.status)return null;let n=this.getUserAssignment(e,t);if(n)return n;let a=this.selectVariant(r.variants);return a?(this.storeUserAssignment(e,t,a.id),this.trackVariantAssignment(e,a.id,t),a.id):null}trackPerformance(e,t,r,n){var a;let i=this.activeTests.get(e);if(!i||"running"!==i.status)return;let s={testId:e,variantId:t,userId:n,metrics:r,timestamp:Date.now(),sessionId:this.getSessionId()};null==(a=this.testData.get(e))||a.push(s),this.updateVariantPerformance(e,t,r),this.checkTestCompletion(e),this.trackPerformanceMetric(e,t,r,n)}getCurrentVariant(e,t){return this.getUserAssignment(e,t)}getTestResults(e){let t=this.activeTests.get(e);return t&&t.results?t.results:null}getActiveTests(){return Array.from(this.activeTests.values()).filter(e=>"running"===e.status)}selectVariant(e){let t=Math.random(),r=0;for(let n of e)if(t<=(r+=n.weight))return n;return e[0]}updateVariantPerformance(e,t,r){let n=this.activeTests.get(e);if(!n)return;let a=n.variants.find(e=>e.id===t);a&&(Object.keys(r).forEach(e=>{let t=r[e];"number"==typeof t&&(a.performance[e]=t)}),a.performance.score=this.calculatePerformanceScore(r))}calculatePerformanceScore(e){let t=0,r=0;return Object.keys(m.successCriteria).forEach(n=>{let a=m.successCriteria[n],i=e[n];if("number"==typeof i){let e=Math.min(i/a.threshold,1);t+=e*a.weight,r+=a.weight}}),r>0?t/r*100:0}checkTestCompletion(e){let t=this.activeTests.get(e);if(!t)return;let r=(this.testData.get(e)||[]).length;if(!(r<m.minSampleSize)&&(Date.now()>t.endDate||r>=m.maxSampleSize||this.isStatisticallySignificant(e)))return void this.completeTest(e)}completeTest(e){var t,r;let n=this.activeTests.get(e);n&&(n.status="completed",n.results=this.calculateTestResults(e),console.log("\uD83C\uDFC1 A/B test completed: ".concat(n.name)),console.log("\uD83C\uDFC6 Winner: ".concat(null==(t=n.results)?void 0:t.winner)),console.log("\uD83D\uDCCA Confidence: ".concat(null==(r=n.results)?void 0:r.confidence,"%")))}calculateTestResults(e){let t=this.activeTests.get(e);if(!t)return{};let r=this.testData.get(e)||[],n=t.variants.map(e=>{let t=r.filter(t=>t.variantId===e.id),n=t.length>0?t.reduce((e,t)=>e+(t.metrics.score||0),0)/t.length:0;return{variantId:e.id,score:n,sampleSize:t.length}}),a=n.reduce((e,t)=>t.score>e.score?t:e),i=this.calculateConfidence(n),s=this.calculatePValue(n),o=this.calculateEffectSize(n),c=this.generateRecommendations(t,n);return{winner:a.variantId,confidence:i,pValue:s,effectSize:o,sampleSize:r.length,duration:Date.now()-t.startDate,recommendations:c}}calculateConfidence(e){let t=e.map(e=>e.score),r=Math.max(...t),n=r-Math.min(...t);return n>0?Math.min(95,n/r*100):50}calculatePValue(e){let t=e.map(e=>e.score),r=Math.max(...t),n=r-Math.min(...t);return n>0?Math.max(.01,1-n/r):.5}calculateEffectSize(e){let t=e.map(e=>e.score),r=t.reduce((e,t)=>e+t,0)/t.length,n=Math.sqrt(t.reduce((e,t)=>e+Math.pow(t-r,2),0)/t.length);return n>0?(Math.max(...t)-Math.min(...t))/n:0}isStatisticallySignificant(e){let t=this.activeTests.get(e);if(!t)return!1;let r=this.testData.get(e)||[],n=t.variants.map(e=>{let t=r.filter(t=>t.variantId===e.id);return t.length>0?t.reduce((e,t)=>e+(t.metrics.score||0),0)/t.length:0});return Math.max(...n)-Math.min(...n)>10&&r.length>=m.minSampleSize}generateRecommendations(e,t){let r=[],n=t.reduce((e,t)=>t.score>e.score?t:e);r.push("Winner: ".concat(n.variantId," with score ").concat(n.score.toFixed(2))),n.score>80?r.push("Consider implementing the winning variant as the default"):n.score<60&&r.push("Consider running additional tests or refining the variants");let a=t.filter(e=>e.score<50);return a.length>0&&r.push("Consider removing low-performing variants: ".concat(a.map(e=>e.variantId).join(", "))),r}trackVariantAssignment(e,t,r){window.gtag&&window.gtag("event","ab_test_assignment",{event_category:"ab_testing",event_label:e,value:1,custom_parameter_test_id:e,custom_parameter_variant_id:t,custom_parameter_user_id:r})}trackPerformanceMetric(e,t,r,n){window.gtag&&window.gtag("event","ab_test_performance",{event_category:"ab_testing",event_label:e,value:r.score||0,custom_parameter_test_id:e,custom_parameter_variant_id:t,custom_parameter_user_id:n,custom_parameter_lcp:r.lcp,custom_parameter_fid:r.fid,custom_parameter_cls:r.cls,custom_parameter_score:r.score})}storeUserAssignment(e,t,r){let n="ab_test_".concat(e,"_").concat(t);localStorage.setItem(n,r)}getUserAssignment(e,t){let r="ab_test_".concat(e,"_").concat(t);return localStorage.getItem(r)}getSessionId(){return"session_"+Math.random().toString(36).substr(2,9)}generateTestId(){return"test_"+Math.random().toString(36).substr(2,9)+"_"+Date.now()}constructor(){this.activeTests=new Map,this.testData=new Map,this.currentVariant=null}}let h=g.getInstance();var p=r(95704);let f={thresholds:{lcp:{warning:2e3,critical:3e3},fid:{warning:80,critical:120},cls:{warning:.08,critical:.12},fcp:{warning:1500,critical:2e3},tti:{warning:3e3,critical:4e3},si:{warning:2500,critical:3500},tbt:{warning:200,critical:300}},regression:{sensitivity:.15,minSamples:10,timeWindow:864e5},channels:{console:!0,analytics:!0,webhook:!1,email:!1},webhook:{url:p.env.PERFORMANCE_WEBHOOK_URL||"",timeout:5e3,retries:3},email:{to:p.env.ALERT_EMAIL_TO||"",from:p.env.ALERT_EMAIL_FROM||"alerts@prepflow.org",subject:"PrepFlow Performance Alert"}};class v{static getInstance(){return v.instance||(v.instance=new v),v.instance}initializeDefaultRules(){[{id:"lcp_critical",name:"LCP Critical Alert",metric:"lcp",condition:"greater_than",threshold:f.thresholds.lcp.critical,severity:"critical",enabled:!0,cooldown:18e5},{id:"lcp_warning",name:"LCP Warning Alert",metric:"lcp",condition:"greater_than",threshold:f.thresholds.lcp.warning,severity:"warning",enabled:!0,cooldown:9e5},{id:"fid_critical",name:"FID Critical Alert",metric:"fid",condition:"greater_than",threshold:f.thresholds.fid.critical,severity:"critical",enabled:!0,cooldown:18e5},{id:"cls_critical",name:"CLS Critical Alert",metric:"cls",condition:"greater_than",threshold:f.thresholds.cls.critical,severity:"critical",enabled:!0,cooldown:18e5}].forEach(e=>{this.alertRules.set(e.id,e)})}checkPerformance(e,t,r,n){let a=Date.now(),i=n||this.generateSessionId();this.storePerformanceData(t,e,a),this.alertRules.forEach(n=>{if(!n.enabled)return;let s=e[n.metric];"number"==typeof s&&!this.isInCooldown(n.id,a)&&this.evaluateCondition(s,n.condition,n.threshold)&&(this.triggerAlert(n,s,t,r,i,a),this.setCooldown(n.id,a+n.cooldown))}),this.checkRegressions(t,e,a)}checkRegressions(e,t,r){let n=(this.performanceHistory.get(e)||[]).filter(e=>r-e.timestamp<f.regression.timeWindow);if(n.length<f.regression.minSamples)return;let a=this.calculateBaseline(n);Object.keys(t).forEach(i=>{let s=t[i];if("number"!=typeof s)return;let o=a[i];if("number"!=typeof o)return;let c=(s-o)/o*100;if(Math.abs(c)>=100*f.regression.sensitivity){let t={metric:i,currentValue:s,previousValue:o,changePercent:c,severity:this.getRegressionSeverity(c),trend:c>0?"degrading":"improving",confidence:this.calculateRegressionConfidence(n,i)};this.triggerRegressionAlert(t,e,r)}})}calculateBaseline(e){let t={},r={};return e.forEach(e=>{Object.keys(e.metrics).forEach(t=>{let n=e.metrics[t];"number"==typeof n&&(r[t]||(r[t]=[]),r[t].push(n))})}),Object.keys(r).forEach(e=>{let n=r[e].sort((e,t)=>e-t),a=Math.floor(n.length/2);t[e]=n.length%2==0?(n[a-1]+n[a])/2:n[a]}),t}getRegressionSeverity(e){let t=Math.abs(e);return t>=50?"critical":t>=30?"high":t>=15?"medium":"low"}calculateRegressionConfidence(e,t){let r=e.map(e=>e.metrics[t]).filter(e=>"number"==typeof e);if(r.length<3)return .5;let n=r.reduce((e,t)=>e+t,0)/r.length;return Math.max(.5,1-Math.sqrt(r.reduce((e,t)=>e+Math.pow(t-n,2),0)/r.length)/n)}triggerAlert(e,t,r,n,a,i){let s=this.generateAlertId(),o=i||Date.now(),c={id:s,type:e.severity,metric:e.metric,currentValue:t,threshold:e.threshold,message:"".concat(e.name,": ").concat(e.metric," = ").concat(t," (threshold: ").concat(e.threshold,")"),timestamp:o,page:r,userId:n,sessionId:a||this.generateSessionId(),resolved:!1};this.alerts.set(s,c),this.sendAlert(c),console.warn("\uD83D\uDEA8 Performance Alert: ".concat(c.message))}triggerRegressionAlert(e,t,r){let n=this.generateAlertId(),a={id:n,type:"regression",metric:e.metric,currentValue:e.currentValue,threshold:e.previousValue,previousValue:e.previousValue,changePercent:e.changePercent,message:"Performance Regression: ".concat(e.metric," ").concat(e.trend," by ").concat(e.changePercent.toFixed(1),"% (").concat(e.currentValue," vs ").concat(e.previousValue,")"),timestamp:r,page:t,sessionId:this.generateSessionId(),resolved:!1};this.alerts.set(n,a),this.sendAlert(a),console.warn("\uD83D\uDCC9 Performance Regression: ".concat(a.message))}sendAlert(e){f.channels.console&&this.sendConsoleAlert(e),f.channels.analytics&&this.sendAnalyticsAlert(e),f.channels.webhook&&f.webhook.url&&this.sendWebhookAlert(e),f.channels.email&&f.email.to&&this.sendEmailAlert(e)}sendConsoleAlert(e){let t="critical"===e.type?"\uD83D\uDEA8":"warning"===e.type?"⚠️":"\uD83D\uDCC9";console.error("".concat(t," ").concat(e.message," (").concat(e.page,")"))}sendAnalyticsAlert(e){window.gtag&&window.gtag("event","performance_alert",{event_category:"performance",event_label:e.type,value:Math.round(e.currentValue),custom_parameter_alert_id:e.id,custom_parameter_metric:e.metric,custom_parameter_threshold:e.threshold,custom_parameter_page:e.page,custom_parameter_change_percent:e.changePercent})}sendWebhookAlert(e){f.webhook.url&&fetch(f.webhook.url,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).catch(e=>{console.error("Failed to send webhook alert:",e)})}sendEmailAlert(e){console.log("\uD83D\uDCE7 Email alert would be sent: ".concat(e.message))}evaluateCondition(e,t,r){switch(t){case"greater_than":return e>r;case"less_than":return e<r;case"equals":return e===r;case"not_equals":return e!==r;default:return!1}}isInCooldown(e,t){let r=this.cooldowns.get(e);return!!r&&t<r}setCooldown(e,t){this.cooldowns.set(e,t)}storePerformanceData(e,t,r){let n=this.performanceHistory.get(e)||[];n.push({metrics:t,timestamp:r});let a=r-f.regression.timeWindow,i=n.filter(e=>e.timestamp>a);this.performanceHistory.set(e,i)}generateAlertId(){return"alert_"+Math.random().toString(36).substr(2,9)+"_"+Date.now()}generateSessionId(){return"session_"+Math.random().toString(36).substr(2,9)}getAlerts(){return Array.from(this.alerts.values())}getActiveAlerts(){return Array.from(this.alerts.values()).filter(e=>!e.resolved)}resolveAlert(e){let t=this.alerts.get(e);return!!t&&(t.resolved=!0,t.resolvedAt=Date.now(),console.log("✅ Alert resolved: ".concat(t.message)),!0)}addAlertRule(e){this.alertRules.set(e.id,e)}removeAlertRule(e){return this.alertRules.delete(e)}getAlertRules(){return Array.from(this.alertRules.values())}getPerformanceHistory(e){return this.performanceHistory.get(e)||[]}clearOldAlerts(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:6048e5,t=Date.now()-e;for(let[e,r]of this.alerts)r.timestamp<t&&this.alerts.delete(e)}constructor(){this.alerts=new Map,this.alertRules=new Map,this.performanceHistory=new Map,this.cooldowns=new Map,this.initializeDefaultRules()}}let w=v.getInstance();function _(e){let{onMetrics:t,enabled:r=!0,sampleRate:n=.1}=e,[s,o]=(0,a.useState)(null),l=(0,a.useRef)(!1),u=(0,a.useRef)(!1),m=(0,a.useRef)(!1),g=(0,a.useRef)(!1),p=(0,a.useRef)(null),f=(0,a.useRef)(null),v=(0,a.useRef)(null),_=(0,a.useRef)(null);(0,a.useEffect)(()=>{if(!r)return;if(Math.random()>n)return void console.log("\uD83D\uDCCA PrepFlow Performance: User not sampled for performance tracking");console.log("\uD83D\uDE80 PrepFlow Performance: Starting advanced performance tracking");let e=async()=>{try{d.initialize(),console.log("\uD83E\uDDEA Initializing Performance-based A/B Testing...");let e=h.createTest({name:"Landing Page Performance Optimization",description:"Test different landing page configurations for performance",endDate:Date.now()+12096e5,variants:[{id:"control",name:"Control",weight:.25,config:{},performance:{},users:0,conversions:0,conversionRate:0},{id:"variant_a",name:"Variant A",weight:.25,config:{},performance:{},users:0,conversions:0,conversionRate:0},{id:"variant_b",name:"Variant B",weight:.25,config:{},performance:{},users:0,conversions:0,conversionRate:0},{id:"variant_c",name:"Variant C",weight:.25,config:{},performance:{},users:0,conversions:0,conversionRate:0}],successCriteria:{primary:"lcp",secondary:["fid","cls"],threshold:2500,weight:.3}});h.startTest(e),console.log("✅ Performance-based A/B Testing initialized"),console.log("\uD83D\uDEA8 Initializing Performance Alerts..."),w.clearOldAlerts(),console.log("✅ Performance Alerts initialized"),await y(),S(),b(),z(),M(),T(),console.log("✅ PrepFlow Performance: All tracking initialized")}catch(e){console.error("❌ PrepFlow Performance: Initialization failed:",e)}};return"complete"===document.readyState?e():window.addEventListener("load",e),()=>{p.current&&p.current.disconnect(),f.current&&f.current.disconnect(),v.current&&v.current.disconnect(),_.current&&_.current.disconnect()}},[r,n]);let y=async()=>{if(l.current)return;l.current=!0;let e=performance.getEntriesByType("navigation")[0],r=performance.getEntriesByType("paint");if(e){var n;let a={dns:e.domainLookupEnd-e.domainLookupStart,tcp:e.connectEnd-e.connectStart,request:e.responseStart-e.requestStart,response:e.responseEnd-e.responseStart,dom:e.domContentLoadedEventEnd-e.domContentLoadedEventStart,load:e.loadEventEnd-e.loadEventStart,total:e.loadEventEnd-e.fetchStart},c={fcp:(null==(n=r.find(e=>"first-contentful-paint"===e.name))?void 0:n.startTime)||null,lcp:null};o(e=>({...e,navigation:a,paint:c,lcp:null,fid:null,cls:null,resources:{slowResources:[],totalResources:0,averageLoadTime:0},ux:{timeToInteractive:null,firstInputDelay:null,cumulativeLayoutShift:null},network:{effectiveType:null,downlink:null,rtt:null},memory:{usedJSHeapSize:null,totalJSHeapSize:null,jsHeapSizeLimit:null}})),(0,i._N)({pageLoadTime:a.total,firstContentfulPaint:c.fcp||0,largestContentfulPaint:0,firstInputDelay:0,cumulativeLayoutShift:0,timestamp:Date.now(),page:window.location.pathname,sessionId:"session_"+Math.random().toString(36).substr(2,9)}),window.gtag&&window.gtag("event","page_performance",{event_category:"performance",event_label:"initial_load",value:Math.round(a.total),custom_parameter_page_load_time:Math.round(a.total),custom_parameter_dom_content_loaded:Math.round(a.dom),custom_parameter_first_byte:Math.round(a.request),custom_parameter_page:window.location.pathname}),t&&t(s)}},S=()=>{if("PerformanceObserver"in window&&!u.current&&(f.current=new PerformanceObserver(e=>{let t=e.getEntries(),r=t[t.length-1];if(r&&!u.current){var n,a;u.current=!0;let e=r.startTime;o(t=>({...t,lcp:e,paint:{...null==t?void 0:t.paint,lcp:e}})),(0,i.sx)("lcp","performance","largest_contentful_paint",Math.round(e)),window.gtag&&window.gtag("event","largest_contentful_paint",{event_category:"performance",event_label:"lcp_measured",value:Math.round(e),custom_parameter_lcp_value:Math.round(e),custom_parameter_page:window.location.pathname});let t={lcp:Math.round(e),fid:null,cls:null,fcp:null,tti:null};!function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"landing",r=c.checkBudget(e,t);!r.passed&&(console.warn("\uD83D\uDEA8 Performance budget violations detected:",r.violations),window.gtag&&window.gtag("event","performance_budget_violation",{event_category:"performance",event_label:"budget_violation",value:r.score,custom_parameter_violations:r.violations.length,custom_parameter_page_type:t,custom_parameter_score:r.score}))}(t,"landing"),n=window.location.pathname,a="session_".concat(Date.now()),w.checkPerformance(t,n,void 0,a)}}),f.current.observe({entryTypes:["largest-contentful-paint"]})),"PerformanceObserver"in window&&!m.current&&(v.current=new PerformanceObserver(e=>{e.getEntries().forEach(e=>{if(!m.current){m.current=!0;let t=e.processingStart-e.startTime;o(e=>({...e,fid:t,ux:{...null==e?void 0:e.ux,firstInputDelay:t}})),(0,i.sx)("fid","performance","first_input_delay",Math.round(t)),window.gtag&&window.gtag("event","first_input_delay",{event_category:"performance",event_label:"fid_measured",value:Math.round(t),custom_parameter_fid_value:Math.round(t),custom_parameter_page:window.location.pathname})}})}),v.current.observe({entryTypes:["first-input"]})),"PerformanceObserver"in window&&!g.current){let e=0;_.current=new PerformanceObserver(t=>{t.getEntries().forEach(t=>{t.hadRecentInput||(e+=t.value)})}),_.current.observe({entryTypes:["layout-shift"]}),setTimeout(()=>{!g.current&&e>0&&(g.current=!0,o(t=>({...t,cls:e,ux:{...null==t?void 0:t.ux,cumulativeLayoutShift:e}})),(0,i.sx)("cls","performance","cumulative_layout_shift",Math.round(1e3*e)),window.gtag&&window.gtag("event","cumulative_layout_shift",{event_category:"performance",event_label:"cls_measured",value:Math.round(1e3*e),custom_parameter_cls_value:Math.round(1e3*e),custom_parameter_page:window.location.pathname}))},5e3)}},b=()=>{if("PerformanceObserver"in window){let e=[],t=0,r=0;p.current=new PerformanceObserver(n=>{n.getEntries().forEach(n=>{"resource"===n.entryType&&(t++,r+=n.duration,n.duration>1e3&&e.push({name:n.name,duration:Math.round(n.duration),size:n.transferSize||0,type:n.initiatorType}))});let a=t>0?r/t:0;o(r=>({...r,resources:{slowResources:e,totalResources:t,averageLoadTime:Math.round(a)}})),e.length>0&&((0,i.sx)("slow_resources","performance","slow_loading",e.length),window.gtag&&window.gtag("event","slow_resources",{event_category:"performance",event_label:"slow_loading_detected",value:e.length,custom_parameter_slow_resources_count:e.length,custom_parameter_page:window.location.pathname}))}),p.current.observe({entryTypes:["resource"]})}},z=()=>{let e=performance.now();o(t=>({...t,ux:{...null==t?void 0:t.ux,timeToInteractive:e}}));let t=()=>{let e=performance.now();(0,i.sx)("user_interaction","performance","interaction_timing",Math.round(e)),window.gtag&&window.gtag("event","user_interaction",{event_category:"performance",event_label:"interaction_timing",value:Math.round(e),custom_parameter_time_since_load:Math.round(e),custom_parameter_page:window.location.pathname})};document.addEventListener("click",t,{once:!0}),document.addEventListener("scroll",t,{once:!0})},M=()=>{if("connection"in navigator){let e=navigator.connection;o(t=>({...t,network:{effectiveType:e.effectiveType||null,downlink:e.downlink||null,rtt:e.rtt||null}})),(0,i.sx)("network_quality","performance",e.effectiveType||"unknown",0)}},T=()=>{if("memory"in performance){let e=performance.memory;o(t=>({...t,memory:{usedJSHeapSize:e.usedJSHeapSize||null,totalJSHeapSize:e.totalJSHeapSize||null,jsHeapSizeLimit:e.jsHeapSizeLimit||null}}));let t=e.usedJSHeapSize/e.jsHeapSizeLimit*100;(0,i.sx)("memory_usage","performance","memory_usage",Math.round(t))}};return null}function y(){return(0,n.jsx)(_,{})}}},e=>{e.O(0,[1741,8557,563,8650,8405,9420,622,7979,1899,4450,9324,8585,9592,433,2652,3494,2574,9173,3023,1356,309,4191,2834,957,6691,1151,9473,9219,6053,3376,2076,7358],()=>e(e.s=19501)),_N_E=e.O()}]);